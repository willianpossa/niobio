(function(l){var n=l.ui.autocomplete.prototype,f=n._renderMenu,d=n._renderItem;n._renderMenu=function(b,a){f.call(this,b,a);var g=this.options.selectItem;if(g&&g.on){var g=g.cls,g=void 0===g?"ui-state-highlight":g,c=this.element.val();c&&g&&l("a",b).filter(function(){return l(this).text()===c}).addClass(g)}};n._renderItem=function(b,a){var g=d.call(this,b,a),c=this.options.highlightText;if(c&&c.on){var m=this.element.val();if(m){var m=new RegExp("("+m+")","i"),e=a.label;if(m.test(e)){var h=c.style,
c=c.cls,e=e.replace(m,"<span style='"+(void 0===h?"font-weight:bold;":h)+"' class='"+(void 0===c?"":c)+"'>$1</span>");g.find("a").html(e)}}}return g};var n=l.paramquery=l.paramquery||{},c=function(b,a,g,c){a=a.slice();for(var d=[],e=0,h=a.length;e<h;e++){var y=a[e],C=y.cb,v=y.one;if(v){if(y._oncerun)continue;y._oncerun=!0}!1===C.call(b,g,c)&&(g.preventDefault(),g.stopPropagation());v&&d.push(e);if(g.isImmediatePropagationStopped())break}if(d.length)for(e=d.length-1;0<=e;e--)a.splice(d[e],1)};n._trigger=
function(b,a,g){var k,d,e=this.listeners,h=e[b],y=this.options,C=y.allEvents,v=y.bubble,p=this.element,s=y[b];g=g||{};a=l.Event(a);a.type=this.widgetName+":"+b;a.target=p[0];if(d=a.originalEvent)for(k in d)k in a||(a[k]=d[k]);C&&"function"==typeof C&&C.call(this,a,g);if(h&&h.length&&(c(this,h,a,g),a.isImmediatePropagationStopped())||y.trigger&&(p[v?"trigger":"triggerHandler"](a,g),a.isImmediatePropagationStopped()))return!a.isDefaultPrevented();s&&!1===s.call(this,a,g)&&(a.preventDefault(),a.stopPropagation());
(h=e[b+"Done"])&&h.length&&c(this,h,a,g);return!a.isDefaultPrevented()};n.on=function(){var b=arguments;if("boolean"==typeof b[0])var a=b[0],g=b[1],c=b[2],b=b[3];else g=b[0],c=b[1],b=b[2];for(var g=g.split(" "),d=0;d<g.length;d++){var e=g[d];if(e){var h=c,y=b,C=a,v=this.listeners[e];v||(v=this.listeners[e]=[]);v[C?"unshift":"push"]({cb:h,one:y})}}return this};n.one=function(){for(var b=arguments.length,a=[],g=0;g<b;g++)a[g]=arguments[g];a[b]=!0;return this.on.apply(this,a)};n.off=function(b,a){for(var g=
b.split(" "),c=0;c<g.length;c++){var d=g[c];if(d){var e=d;if(d=a){if(e=this.listeners[e]){for(var h=[],y=0,C=e.length;y<C;y++)d==e[y].cb&&h.push(y);if(h.length)for(y=h.length-1;0<=y;y--)e.splice(h[y],1)}}else delete this.listeners[e]}}return this};l.widget("paramquery.pqTooltip",l.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var b=l(this),a=b.closest(".pq-grid").pqGrid("getInstance").grid,g=a.getCellIndices({$td:b});return(a=
a.data({rowIndx:g.rowIndx,dataIndx:g.dataIndx,data:"pq_valid"}).data)?(b=a.icon,a=a.msg,(""==b?"":"<span class='ui-icon "+b+" pq-tooltip-icon'></span>")+(null!=a?a:"")):b.attr("title")}},_create:function(){this._super();var b=this.element,a=this.eventNamespace;b.on("pqtooltipopen"+a,function(a,b){var c=l(a.target),e=l(a.originalEvent.target);e.on("remove",function(e){c.pqTooltip("close",e,!0)});if(c.is(".pq-grid")){var h=c.pqGrid("getCellIndices",{$td:e}),y=h.dataIndx,C;(C=c.pqGrid("getRowData",{rowIndx:h.rowIndx}))&&
(C=C.pq_celldata)&&(C=C[y])&&(C=C.pq_valid)&&(y=C,h=y.style,b.tooltip.addClass(y.cls),y=b.tooltip.attr("style"),b.tooltip.attr("style",y+";"+h));c.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(h,y){h.currentTarget=e[0];c.pqTooltip("close",h,!0)})}});b.on("pqtooltipclose"+a,function(a,b){var c=l(a.target);l(a.originalEvent.target).off("remove");c.is(".pq-grid")&&c.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(l){var n=window.pq=n||{},f=l.paramquery,d=Array.prototype;d.find||(d.find=function(a,b){for(var c=0,e=this.length,h;c<e;c++)if(h=this[c],a.call(b,h,c,this))return h});d.findIndex||(d.findIndex=function(a,b){for(var c=0,e=this.length,h;c<e;c++)if(h=this[c],a.call(b,h,c,this))return c;return-1});d.map||(d.map=function(a,b){for(var c=0,e=this.length,h=[];c<e;c++)h.push(a.call(b,this[c],c,this));return h});d.forEach||(d.forEach=function(a,b){for(var c=0,e=this.length;c<e;c++)a.call(b,this[c],
c,this)});n.getFn=function(){var a={};return function(b){var c=b;"string"!==typeof b||(c=a[b])||(c=window,b.split(".").forEach(function(e){c=c[e]}),a[b]=c);return c}}();n.searchSeqArray=function(a,b){var c=a.length,e=b,h=b,y=0,h=h>c-1?c-1:h,C;do{C=a[h];y++;if(C<b){if(h==c-1){h=-1;break}h=Math.ceil((h+e)/2);h=h>c-1?c-1:h}else if(C>b)e=h,h=Math.floor(h/2);else break;if(100<y)throw"too many iterations";}while(1);return h};n.arrayUnique=function(a,b){var c=[],e,h=a.length,y,C={},v;for(e=0;e<h;e++)y=a[e],
v=b?y[b]:y,C.hasOwnProperty(v)||(C[v]=1,c.push(y));return c};f.select=function(a){var b=a.options,c=a.groupIndx,e=a.labelIndx,h=a.valueIndx,y=null!=e&&null!=h,C=null!=c,v=a.prepend,d=a.dataMap,s,r,t;a=["<select ",a.attr," >"];if(v)for(var l in v)a.push('<option value="',l,'">',v[l],"</option>");if(b&&b.length){for(var v=0,f=b.length;v<f;v++){var w=b[v];if(y){var x=w[h],z=w.pq_disabled?'disabled="disabled" ':"",n=w.pq_selected?'selected="selected" ':"";if(null!=x){if(d){s={};for(t=0;t<d.length;t++){var B=
d[t];s[B]=w[B]}s="data-map='"+JSON.stringify(s)+"'"}else s="";t=s;C&&(B=w.pq_disabled_group?'disabled="disabled" ':"",s=w[c],r!=s&&(null!=r&&a.push("</optgroup>"),a.push('<optgroup label="',s,'" ',B," >"),r=s));e==h?a.push("<option ",n,z,t,">",x,"</option>"):a.push("<option ",n,z,t,' value="',x,'">',w[e],"</option>")}}else if("object"==typeof w)for(l in w)a.push('<option value="',l,'">',w[l],"</option>");else a.push("<option>",w,"</option>")}C&&a.push("</optgroup>")}a.push("</select>");return a.join("")};
l.fn.pqval=function(a){if(a){if(a.incr)return a=this.data("pq_value"),this.prop("indeterminate",!1),a?(a=!1,this.prop("checked",!1)):!1===a?(a=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(a=!0,this.prop("checked",!0)),this.data("pq_value",a),a;a=a.val;this.data("pq_value",a);this.prop("indeterminate",!1);null==a?(this.prop("indeterminate",!0),this.prop("checked",!1)):a?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};f.xmlToArray=function(a,
b){var c=b.itemParent,e=b.itemNames,h=[];l(a).find(c).each(function(a,b){var g=l(b),c=[];l(e).each(function(e,h){c.push(g.find(h).text().replace(/\r|\n|\t/g,""))});h.push(c)});return h};f.xmlToJson=function(a,b){var c=b.itemParent,e=b.itemNames,h=[];l(a).find(c).each(function(a,b){for(var g=l(b),c={},k=0,d=e.length;k<d;k++){var m=e[k];c[m]=g.find(m).text().replace(/\r|\n|\t/g,"")}h.push(c)});return h};f.tableToArray=function(a){var b=[],c=[];a=l(a).children("tbody").children("tr");var e=a.length?
l(a[0]):l(),h=1<a.length?l(a[1]):l();e.children("th,td").each(function(e,a){var g=l(a),c=g.html(),g=g.width(),d="left";if(h.length)var m=h.find("td:eq("+e+")").attr("align"),d=m?m:d;b.push({title:c,width:g,dataType:"string",align:d,dataIndx:e})});a.each(function(e,h){if(0!=e){var a=[];l(h).children("td").each(function(e,h){a.push(l.trim(l(h).html()))});c.push(a)}});return{data:c,colModel:b}};var c={};f.formatCurrency=function(a,b){var d=parseFloat(a);if(!isNaN(d)){var e=0>d,h;a:{var y=b,C,v;if(y){y=
y.split(":");y=e&&1<y.length?y[1]:y[0];if(C=c[y]){h=C;break a}v=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(v=y.match(v))&&v.length&&(C={symbol:v[1]||"",thouSep:v[2],thousand:v[3].length,decSep:v[4],decimal:v[5].length,symbolEnd:v[6]||""},c[y]=C)}h=C=C||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}y=h.symbol;C=h.symbolEnd;v=h.thousand;var p=h.thouSep,s=h.decSep,r=h.decimal,d=d.toFixed(r);h=d.length;var t=r+s.length,r=d.substring(0,
h-t),d=d.substring(h-t+s.length,h);h=r.match(/\d/g).reverse();r=[];for(t=0;t<h.length;t++)0<t&&0==t%v&&r.push(p),r.push(h[t]);r=r.reverse();r=r.join("");return(e?"-":"")+y+r+s+d+C}};n.formatNumber=f.formatCurrency;n.validation={is:function(a,b){if("string"==a||!a)return!0;a=a.substring(0,1).toUpperCase()+a.substring(1,a.length);return this["is"+a](b)},isFloat:function(a){var b=parseFloat(a);return isNaN(b)||b!=a?!1:!0},isInteger:function(a){var b=parseInt(a);return isNaN(b)||b!=a?!1:!0},isDate:function(a){a=
Date.parse(a);return isNaN(a)?!1:!0}};var b=[],a=f.toLetter=function(g){var c=b[g];if(!c){g++;var d=g%26,c=g/26|0,d=d?String.fromCharCode(64+d):(--c,"Z"),c=c?a(c-1)+d:d;g--;b[g]=c}return c};f.generateData=function(b,c){for(var d=[],e=0;e<c;e++)d[e]=a(e);for(var h=[],e=0;e<b;e++)for(var y=h[e]=[],C=0;C<c;C++)y[C]=d[C]+(e+1);return h}})(jQuery);
(function(l){function n(a,b,c){return a?l("<span tabindex='0' rel='tooltip' data-placement='top' title='"+b+"' class='btn btn-xs "+c+"'></span>"):l("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+b+"'><span class='ui-icon ui-icon-"+c+"'></span></span>")}function f(a,b){a.bind("click keydown",function(a){if("keydown"!=a.type||a.keyCode==l.ui.keyCode.ENTER)return b.call(this,a)})}function d(a,b,c){b[c?"addClass":"removeClass"]("disabled").css("pointer-events",c?"none":
"").attr("tabindex",c?"":"0")}var c={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};l.extend(c.options,c._regional);c._create=function(){var a=this,b=this.options,c=this.element,d=b.bootstrap,e=d.on;this.listeners={};c.addClass("pq-pager "+(e?d.pager:""));this.first=n(e,b.strFirstPage,e?d.firstIcon:"seek-first").appendTo(c);f(this.first,function(e){1<b.curPage&&a._onChange(e,1)});this.prev=n(e,b.strPrevPage,e?d.prevIcon:"seek-prev").appendTo(c);f(this.prev,function(e){1<b.curPage&&
a._onChange(e,b.curPage-1)});l("<span class='pq-separator'></span>").appendTo(c);this.pageHolder=l("<span class='pq-page-placeholder'></span>").appendTo(c);l("<span class='pq-separator'></span>").appendTo(c);this.next=n(e,b.strNextPage,e?d.nextIcon:"seek-next").appendTo(c);f(this.next,function(e){b.curPage<b.totalPages&&a._onChange(e,b.curPage+1)});this.last=n(e,b.strLastPage,e?d.lastIcon:"seek-end").appendTo(c);f(this.last,function(e){b.curPage!==b.totalPages&&a._onChange(e,b.totalPages)});l("<span class='pq-separator'></span>").appendTo(c);
this.rPPHolder=l("<span class='pq-page-placeholder'></span>").appendTo(c);this.$refresh=n(e,b.strRefresh,e?d.refreshIcon:"refresh").appendTo(c);f(this.$refresh,function(e){if(!1===a._trigger("beforeRefresh",e))return!1;a._trigger("refresh",e)});l("<span class='pq-separator'></span>").appendTo(c);this.$msg=l("<span class='pq-pager-msg'></span>").appendTo(c);this._refresh()};c._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};c._setOption=function(a,b){if("curPage"==
a||"totalPages"==a)b*=1;this._super(a,b)};c._setOptions=function(a){var b,c=!1,d=this.options;for(b in a){var e=a[b],h=typeof e;"string"==h||"number"==h?e!=d[b]&&(this._setOption(b,e),c=!0):"function"==typeof e.splice||l.isPlainObject(e)?JSON.stringify(e)!=JSON.stringify(d[b])&&(this._setOption(b,e),c=!0):e!=d[b]&&(this._setOption(b,e),c=!0)}c&&this._refresh();return this};l.widget("paramquery.pqPager",c);pq.pager=function(a,b){var c=l(a).pqPager(b);return c.data("paramqueryPqPager")||c.data("paramquery-pqPager")};
var b=l.paramquery;b.pqPager.regional={};b.pqPager.regional.en=c._regional;c=b.pqPager.prototype;b.pqPager.defaults=c.options;c._refreshPage=function(){var a=this;this.pageHolder.empty();for(var b=this.options,c=b.bootstrap,d=b.strPage.split(" "),e=[],h=0,y=d.length;h<y;h++){var C=d[h];"{0}"==C?e.push("<input type='text' tabindex='0' class='pq-pager-input ",c.on?"":"ui-corner-all","' />"):"{1}"==C?e.push("<span class='total'></span>"):e.push("<span>",C,"</span>")}c=e.join("");c=l(c).appendTo(this.pageHolder);
this.page=c.filter("input").bind("keydown",function(e){e.keyCode===l.ui.keyCode.ENTER&&l(this).trigger("change")}).bind("change",function(e){var h=l(this),y=h.val();if(isNaN(y)||1>y)return h.val(b.curPage),!1;y=parseInt(y);if(y!==b.curPage&&(y>b.totalPages||!1===a._onChange(e,y)))return h.val(b.curPage),!1});this.$total=c.filter("span.total")};c._onChange=function(a,b){if(!1===this._trigger("beforeChange",a,{curPage:b})||!1===this._trigger("change",a,{curPage:b}))return!1;this.option({curPage:b})};
c._refresh=function(){this._refreshPage();var a=this,b=this.options,c=b.bootstrap;this.rPPHolder.empty();if(b.strRpp){var m=b.rPPOptions,e=b.strRpp;if(-1!=e.indexOf("{0}")){for(var c=["<select class='",c.on?"":"ui-corner-all","'>"],h=0,y=m.length;h<y;h++){var C=m[h];c.push('<option value="',C,'">',C,"</option>")}c.push("</select>");m=c.join("");e=e.replace("{0}","</span>"+m);e="<span>"+e+"<span class='pq-separator'></span>"}else e="<span>"+e+"</span><span class='pq-separator'></span>";this.$rPP=l(e).appendTo(this.rPPHolder).filter("select").val(b.rPP).change(function(e){var h=
l(this),y=h.val();if(!1===a._trigger("beforeChange",e,{rPP:y}))return h.val(a.options.rPP),!1;!1!==a._trigger("change",e,{rPP:y})&&(a.options.rPP=y)})}e=b.bootstrap.on;m=b.curPage>=b.totalPages;d(e,this.next,m);d(e,this.last,m);m=1>=b.curPage;d(e,this.first,m);d(e,this.prev,m);this.page.val(b.curPage);this.$total.text(b.totalPages);0<this.options.totalRecords?(e=b.rPP,m=b.curPage,c=b.totalRecords,h=m*e,h>c&&(h=c),b=b.strDisplay,b=b.replace("{0}",(m-1)*e+1),b=b.replace("{1}",h),b=b.replace("{2}",c),
this.$msg.html(b)):this.$msg.html("")};c.getInstance=function(){return{pager:this}};c._trigger=b._trigger;c.on=b.on;c.one=b.one;c.off=b.off})(jQuery);
(function(l){function n(b,a){return b?"<div class='"+a+"'></div>":"<div class='ui-icon ui-icon-"+a+"'></div>"}var f=l.paramquery,d={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){l(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(b,a){var c=this.options;"disabled"==b?(this._super(b,a),!0==a?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==b?(c[b]=a,this._createLayout()):"ratio"==b?0<=a&&1>=a&&(c[b]=a):c[b]=a},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};l.widget("paramquery.pqScrollBar",d);pq.scrollbar=function(b,a){var c=l(b).pqScrollBar(a);return c.data("paramqueryPqScrollBar")||c.data("paramquery-pqScrollBar")};d=f.pqScrollBar.prototype;f.pqScrollBar.defaults=d.options;d._createLayout=function(){var b=this,a=this.options,c=a.bootstrap,d=c.on,m=a.direction,e=this.eventNamespace,h=a.theme,y=this.element.empty();"vertical"==m?(y.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),h?(y.addClass("pq-sb-vert-t"),
y[0].innerHTML=["<div class='top-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-top","'>",n(d,d?c.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",d?c.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-bottom","'>",n(d,d?c.down:"triangle-1-s"),"</div>"].join("")):(y.addClass("pq-sb-vert-wt"),y[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(y.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),h?(y.addClass("pq-sb-horiz-t"),y[0].innerHTML=["<div class='left-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-left","'>",n(d,d?c.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",d?c.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-right","'>",n(d,d?c.right:"triangle-1-e"),"</div>"].join("")):(y.addClass("pq-sb-horiz-wt"),y.width(this.width),
y[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));y.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(h){if(!a.disabled&&!b.$slider.is(":hidden"))if(l(document).off("."+e).on("mouseup."+
e,function(e){b._mouseup(e)}),"vertical"==m){var y=h.pageY,c=b.element.offset().top,g=c+a.length,d=b.$slider,k=d.offset().top,f=d.height(),d=k+f;y<k&&y>c+17?b._setTimerPageLeft(y,f,h,0):y>d&&y<g-17&&b._setTimerPageRight(y,f,h,0)}else y=h.pageX,c=b.element.offset().left,g=c+a.length,k=b.$slider.offset().left,d=k+b.$slider.width(),y<k&&y>c+17?(b.$slider.css("left",y-b.element.offset().left),b._updateCurPosAndTrigger(h)):y>d&&y<g-17&&(b.$slider.css("left",y-b.element.offset().left-b.$slider.width()),
b._updateCurPosAndTrigger(h))});c=this.$slider=l("div.pq-sb-slider",this.element);c.attr("tabindex","0");this._bindSliderEvents(c);this.$top_btn=l("div.top-btn,div.left-btn",this.element).click(function(e){if(!b.options.disabled)return b.decr_cur_pos(e),!1}).mousedown(function(e){if(!b.options.disabled)return b.mousedownTimeout=setTimeout(function(){b.mousedownInterval=setInterval(function(){b.decr_cur_pos(e)},0)},b.options.timeout),!1}).bind("mouseup mouseout",function(e){b._mouseup(e)});this.$bottom_btn=
l("div.bottom-btn,div.right-btn",this.element).click(function(e){if(!b.options.disabled)return b.incr_cur_pos(e),!1}).mousedown(function(e){if(!b.options.disabled)return b.mousedownTimeout=setTimeout(function(){b.mousedownInterval=setInterval(function(){b.incr_cur_pos(e)},0)},b.options.timeout),!1}).bind("mouseup mouseout",function(e){b._mouseup(e)});this.refresh()};var c=0;d._setTimerPageLeft=function(b,a,g,d){var m=this,e=m.options;this.mousedownTimeout=window.setTimeout(function(){if(b>=m.$slider.offset().top)m._mouseup();
else{m._pageLeft(g);var h=c?0:e.timeout;c++;m._setTimerPageLeft(b,a,g,h)}},d)};d._setTimerPageRight=function(b,a,g,d){var m=this;this.mousedownTimeout=window.setTimeout(function(){if(b<=m.$slider.offset().top+a)m._mouseup();else{m._pageRight(g);var e=c?0:m.options.timeout;c++;m._setTimerPageRight(b,a,g,e)}},d)};d._bindSliderEvents=function(b){var a=this,c="x";"vertical"==this.options.direction&&(c="y");b.draggable({axis:c,helper:function(b,c){a._setDragLimits();return this},start:function(b){a.topWhileDrag=
null;a.dragging=!0},drag:function(b){a.dragging=!0;var c=a.options.pace;"optimum"==c?a._setNormalPace(b):"fast"==c&&a._updateCurPosAndTrigger(b)},stop:function(b){"fast"!=a.options.pace&&a._updateCurPosAndTrigger(b);a.dragging=!1;a.refresh()}}).on("keydown.pq-scrollbar",function(b){var c=b.keyCode,e=a.options,h=e.cur_pos,y=e.ratio,C=e.num_eles,g=l.ui.keyCode;null==a.keydownTimeout&&(a.keydownTimeout=window.setTimeout(function(){c==g.DOWN||c==g.RIGHT?a.incr_cur_pos(b):c==g.UP||c==g.LEFT?a.decr_cur_pos(b):
c==g.HOME?e.steps?0<h&&(e.cur_pos=0,a.updateSliderPos(),a.scroll(b)):0<y&&(e.ratio=0,a.updateSliderPos(),a.drag(b)):c==g.END?e.steps?h<C&&(e.cur_pos=C,a.updateSliderPos(),a.scroll(b)):1>y&&(e.ratio=1,a.updateSliderPos(),a.drag(b)):"vertical"==e.direction&&(c==g.PAGE_DOWN?a._pageRight(b):c==g.PAGE_UP&&a._pageLeft(b));a.keydownTimeout=null},0));if(c==g.DOWN||c==g.RIGHT||c==g.UP||c==g.LEFT||c==g.PAGE_DOWN||c==g.PAGE_UP||c==g.HOME||c==g.END)return b.preventDefault(),!1})};d.decr_cur_pos=function(b){var a=
this.options;if(a.steps)0<a.cur_pos&&(a.cur_pos--,this.updateSliderPos(),this.scroll(b));else if(0<a.ratio){var c=a.ratio-1/(a.num_eles-1);0>c&&(c=0);a.ratio=c;this.updateSliderPos();this.drag(b)}};d.incr_cur_pos=function(b){var a=this.options;if(a.steps)a.cur_pos<a.num_eles-1&&a.cur_pos++,this.updateSliderPos(),this.scroll(b);else{if(1>a.ratio){var c=a.ratio+1/(a.num_eles-1);1<c&&(c=1);a.ratio=c}this.updateSliderPos();this.drag(b)}};d._mouseup=function(b){this.options.disabled||(c=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};d._setDragLimits=function(){var b=this.options;if("vertical"==b.direction){var a=this.element.offset().top+17,b=a+b.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,a,0,b])}else a=this.element.offset().left+17,b=a+b.length-34-this.slider_length,this.$slider.draggable("option","containment",[a,0,b,0])};d._validateCurPos=function(){var b=this.options;b.cur_pos>=b.num_eles&&
(b.cur_pos=b.num_eles-1);0>b.cur_pos&&(b.cur_pos=0)};d._updateSliderPosRatio=function(){var b=this.options,a=b.direction,c=b.ratio,d=this.$slider[0],b=b.length-34-this.slider_length;if(null==c)throw"updateSliderPosRatio ratio N/A";c=c*b+17;"vertical"==a?d.style.top=c+"px":d.style.left=c+"px"};d._updateSliderPosCurPos=function(){var b=this.options,a=this.$slider[0],c=this.scroll_space*b.cur_pos/(b.num_eles-1);"vertical"==b.direction?a.style.top=17+c+"px":a.style.left=17+c+"px"};d.updateSliderPos=function(){var b=
this.options;if(void 0===b.steps)throw"updateSliderPos. steps N/A";b.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};d.scroll=function(b){var a=this.options;this._trigger("scroll",b,{cur_pos:a.cur_pos,num_eles:a.num_eles})};d.drag=function(b){this._trigger("drag",b,{ratio:this.options.ratio})};d._pageRight=function(b){this._trigger("pageRight",b,null)};d._pageLeft=function(b){this._trigger("pageLeft",b,null)};d._setSliderBgLength=function(){var b=this.options,a=b.theme,c=this.$slider,
d=b.length,d=Math.round(((d-34)*d/(40*b.num_eles+d)-14)/2);1>d&&(d=1);var m=14+2*d;this.scroll_space=b.length-34-m;if(m!==this.slider_length)if(this.slider_length=m,b="vertical"===b.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},a)c[b.dim](m-2);else l(b.cls,this.element)[b.dim](d),c[b.dim](m)};d._updateCurPosAndTrigger=function(b,a){var c=this.options,d=c.direction,m=this.$slider;null==a&&(a=parseInt(m[0].style["vertical"===d?"top":"left"]));d=(a-17)/(c.length-
34-this.slider_length);if(c.steps){if(d*=c.num_eles-1,d=Math.round(d),c.cur_pos!=d){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<a&&c.cur_pos>d||this.topWhileDrag>a&&c.cur_pos<d))return;this.topWhileDrag=a}this.options.cur_pos=d;this.scroll(b)}}else c.ratio=d,this.drag(b)};d._setNormalPace=function(b){this.timer&&(window.clearInterval(this.timer),this.timer=null);var a=this,c=this.options.direction;a.timer=window.setInterval(function(){var d=parseInt(a.$slider[0].style["vertical"===
c?"top":"left"]);a.prev_top===d&&(a._updateCurPosAndTrigger(b,d),window.clearInterval(a.timer),a.timer=null);a.prev_top=d},20)};d.refresh=function(){var b=this.options,a=this.$slider[0],c=this.element;1>=b.num_eles?c[0].style.display="none":(c[0].style.display="",this._validateCurPos(),this.dragging||(c["vertical"===b.direction?"height":"width"](b.length),this._setSliderBgLength(),a.style.display=4>this.scroll_space||1>=b.num_eles?"none":""),this.updateSliderPos())};d._trigger=f._trigger;d.on=f.on;
d.one=f.one;d.off=f.off})(jQuery);
(function(l){l.paramquery=l.paramquery||{};l.paramquery.onResize=function(n,f){var d=l(n);"static"===d.css("position")&&d.css("position","relative");var c=l('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(d);c[0].data="about:blank";c.css("opacity","0");for(var b=0;b<d.length;b++)l(c[b].contentWindow).on("resize",function(a){f()})}})(jQuery);
(function(l){function n(e){return"<span class='btn btn-xs glyphicon glyphicon-"+e+"' ></span>"}function f(e){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+e+"'></span></span>"}var d=function(){};d.prototype.belongs=function(e){if(e.target==this.that.element[0])return!0};var c=l.paramquery;c.cClass=d;var b=function(e){this.that=e;var h=this.options=e.options,a=this;if(null!=h.postRenderInterval)e.on("refresh",function(){a.prColDef.length&&a.postRenderAll()}).on("refreshRow",
function(e,h){a.prColDef.length&&a.postRenderRow(h)}).on("refreshCell",function(e,h){h.column.postRender&&a.postRenderRow(h)}).on("refreshColumn",function(e,h){h.column.postRender&&a.setTimerPostRender(0,h.colIndx,h.column)});if(!h.mergeModel.flex)e.on("refresh refreshCell refreshRow refreshColumn",a.onRefreshMerge(e))};c.cGenerateView=b;d=b.prototype=new d;d.onRefreshMerge=function(e){return function(){for(var h=e.$cont.find(".pq-merge-cell-div"),a,b,c,g,d=h.length,k=[],m=[];d--;)a=h[d],a=a.parentNode,
b||(b=2*parseInt(l(a).css("paddingTop")),c=2*parseInt(l(a).css("paddingLeft"))),g=Math.max(a.offsetHeight,28),g-=b,a=a.offsetWidth-c,k[d]=g-1+"px",m[d]=a+"px";for(d=h.length;d--;)a=h[d],a.style.height=k[d],a.style.width=m[d]}};d.generateView=function(e){e=e||{};var h=this.that,a=h.options,b="flex"===a.width,g="flex"===a.height,d=a.cls,k=d.cont_inner,m=d.cont_inner_b,t,l,f=h.initH,w=h.finalH,x=h.pqpanes;if(e.$cont)t=this._generateTables(null,null,e),d=e.$cont,d.empty(),d[0].innerHTML=x.v?["<div class='",
k,"'>",t,"</div><div class='",k,"'>",t,"</div>"].join(""):["<div class='",k,"'>",t,"</div>"].join(""),a=d.children("div").children("table"),h.tables[0]={$tbl:a,$cont:d};else{t=h.initV;l=h.finalV;var n=h.pdata,d=h.$cont;null!=a.editModel.indices&&h.blurEditor({force:!0});f={pageData:n,initV:t,finalV:l,initH:f,finalH:w,source:e.source};h._trigger("beforeTableView",null,f);t=this._generateTables(t,l,e);d.empty();0===h.totalVisibleRows?d.append("<div class='"+k+" pq-grid-norows' >"+a.strNoRows+"</div>"):
(e=g||b?"style='position:relative;'":"",d[0].innerHTML=x.h&&x.v?["<div class='",k,"'>",t,"</div><div class='",k,"'>",t,"</div><div class='",k," ",m,"'>",t,"</div><div class='",k," ",m,"'>",t,"</div>"].join(""):x.v?["<div class='",k,"' ",e," >",t,"</div><div class='",k,"' >",t,"</div>"].join(""):x.h?["<div class='",k,"' style='position:static;' >",t,"</div><div class='",k," ",m,"' style='position:static;' >",t,"</div>"].join(""):["<div class='",k,"' ",e," >",t,"</div>"].join(""));h.$tbl=d.children("div").children("table");
if(a.scrollModel.flexContent&&h.$tbl[0])c.onResize(h.$tbl[0],function(){var e=h.iRefresh;e.ignoreTResize||e.softRefresh()});this.setPaneEvents();h._trigger("refresh",null,f)}this.setPanes()};d.postRenderRow=function(e){var h=this.that,a=this.prColDef,b=h.iMerge,c=e.rowIndx,g;null!=e.colIndx&&(a=[{colIndx:e.colIndx,column:e.column}]);for(var d=0,k=a.length;d<k;d++)e=a[d],g=e.column.postRender,e=e.colIndx,b.ismergedCell(c,e)?b.isRootCell(c,e,"a")&&(e=b.getRootCell(c,e),g.call(h,e)):(e=h.normalize({rowIndx:c,
colIndx:e}),g.call(h,e))};d.setTimerPostRender=function(e,h,a){var b=this.that,c=this,g=b.pdata,d=function(e){return-1==b.options.postRenderInterval?e():setTimeout(e,0)};g&&g.length&&(c.postRenderTimeoutID=d(function(){var d=b.initV,k=b.options.freezeRows;e<d&&e>=k&&(e=d);g[e].pq_hidden||c.postRenderRow({column:a,colIndx:h,rowIndx:e+b.rowIndxOffset});e++;e<=b.finalV&&c.setTimerPostRender(e)}))};d.postRenderAll=function(){var e=this.that,h=this,a=e.pdata,b=e.options.postRenderInterval,e=function(e){return-1==
b?e():setTimeout(e,b)};a&&a.length&&(clearTimeout(h.postRenderTimeoutID),h.postRenderTimeoutID=e(function(){h.setTimerPostRender(0)}))};d.scrollView=function(){var e=this.that,h=this.options,a=h.virtualY;h.virtualX||e.hscroll.drag();a||e.vscroll.drag()};d.setPaneEvents=function(){var e=this.that,h=e.pqpanes,a=e.$cont.children("div"),b=e.iMouseSelection;if((e=e.$tbl)&&e.length)if(h.h&&h.v){var h=l(a[0]),e=l(a[1]),c=l(a[2]),a=l(a[3]);h.on("scroll",function(e){this.scrollLeft=this.scrollTop=0});e.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)});c.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})}else if(h.v)h=l(a[0]),a=l(a[1]),h.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else if(h.h)h=l(a[0]),a=l(a[1]),h.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)}),a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})};d.setPanes=function(){var e=this.that,h=e.pqpanes,a=e.$cont.children("div"),b=e.iRefresh,c=e.$tbl,g=e.options,d=e.calcWidthCols(-1,1*g.freezeCols)+1,k="flex"!==g.width||g.maxWidth?b.getEContWd():"";if(e.tables.length){var m=e.tables[0].$tbl,
f=e.tables[0].$cont,u=m.parent("div");h.v?(l(u[0]).css({width:d}),l(u[1]).css({left:d,width:k-d}),l(m[1]).css({left:-1*d})):l(u[0]).css({width:k});f.height(m[0].scrollHeight-1);b.setContHeight()}if(c&&c.length)if(b="flex"!==g.height||g.maxHeight?b.getEContHt():"",h.h&&h.v){var m=l(a[0]),f=l(a[1]),u=l(c[1]),w=l(a[2]),x=l(c[2]),a=l(a[3]),n=l(c[3]),c=e.calcHeightFrozenRows();m.css({width:d,height:c});f.css({left:d,width:k-d,height:c});u.css({left:-1*d});w.css({width:d,top:c,height:b-c});x.css({marginTop:-(c+
1)});a.css({left:d,width:k-d,top:c,height:b-c});n.css({marginTop:-(c+1),left:-1*d})}else h.v?(m=l(a[0]),a=l(a[1]),c=l(c[1]),m.css({width:d,height:b}),a.css({left:d,width:k-d,height:b}),c.css({left:-1*d})):h.h?(m=l(a[0]),a=l(a[1]),f=l(c[1]),c=e.calcHeightFrozenRows(),m.css({height:c,width:k}),a.css({width:k,top:c,height:b-c}),f.css({marginTop:-(c+1)})):a.css({width:k,height:b});g.showHeader&&(h.vH?(e.$header_left.css({width:d}),e.$header_right.css({left:d,width:k-d}),e.$header_right_inner.css({left:-d})):
e.$header_left.css({width:k}))};d.createColDefs=function(){for(var e=this.that,h=e.colModel,a=e.initH,b=e.finalH,e=e.options.freezeCols,c=[],g=[],d=0;d<=b;d++){if(d<a&&d>=e&&(d=a,d>b))throw"initH>finalH";var k=h[d];k.hidden||(c.push({column:k,colIndx:d}),k.postRender&&"function"==typeof k.postRender&&g.push({column:k,colIndx:d}))}this.colDef=c;this.prColDef=g};d._generateTables=function(e,h,a){a=a||{};var b=this.that,c=b.options,g=c.bootstrap,d=c.numberCell,k=b.iRefresh,m=1*c.freezeRows,l=0,f=a.other;
h=f?a.data.length-1:h;f?a=a.data:(a=b.pdata,this.setFrozenRip(a,m));if(f||null!=e&&null!=h){this.vrows=k.vrows;this.vfrows=k.vfrows;l=["pq-grid-table"];g.on&&l.push(g.tbody);c.columnBorders&&l.push("pq-td-border-right");c.rowBorders&&l.push("pq-td-border-top");l.push(c.wrap?"pq-wrap":"pq-no-wrap");c=["<table class='"+l.join(" ")+"' >"];c.push("<tr class='pq-row-hidden'>");d.show&&(b=d.width,c.push("<td style='width:"+b+"px;' ></td>"));l=this.colDef;d=0;for(g=l.length;d<g;d++)b=l[d],k=b.colIndx,b=
b.column.outerWidth,c.push("<td style='width:",b,"px;' pq-col-indx='",k,"'></td>");c.push("</tr>");for(l=0;l<=h;l++)l<e&&l>=m&&(l=e),d=a[l],g=l,d&&d.pq_hidden||(k=d.pq_detail&&d.pq_detail.show,this._generateRow(d,g,c,f,k),k&&this._generateDetailRow(d,g,c));c.push("</table>");return c.join("")}};d.appendRow=function(e){var h=this.that,a=h.pdata,b=h.colModel,c=h.finalV;c+e>a.length&&(e=a.length-c);if(e){if(1<e)throw"noRows > 1";h._trigger("beforeTableView",null,{pageData:a,initV:c,finalV:c,initH:h.initH,
finalH:h.finalH,colModel:b});h.refreshRow({rowIndxPage:c,refresh:!1})}return e};d.prependRow=function(e){var h=this.that,a=h.options.freezeRows,b=h.calcVisibleRows(h.pdata,0,a),c=h.pdata,g=h.initV,d=h.colModel;if(h._mergeCells){if(b)for(b=0;b<a;b++)h.refreshRow({rowIndxPage:b,refresh:!1});h.refreshRow({rowIndxPage:g+1,refresh:!1})}h._trigger("beforeTableView",null,{pageData:c,initV:g,finalV:g,initH:h.initH,finalH:h.finalH,colModel:d});h.refreshRow({rowIndxPage:g,refresh:!1});return e};d.removeTopRow=
function(e){for(var h=this.that,a=h.options.freezeRows,b=h.calcVisibleRows(h.pdata,0,a),c=h.$tbl,g=l([]),d=0;d<c.length;d++)var k=l(c[d]).children("tbody").children("tr:gt(0)").slice(b,e+b),g=g.add(k);g.remove();if(h._mergeCells){if(b)for(d=0;d<a;d++)h.refreshRow({rowIndxPage:d,refresh:!1});h.refreshRow({rowIndxPage:h.initV,refresh:!1})}};d.removeBottomRow=function(e){var h=this.that.$tbl;if(e)for(var a=0;a<h.length;a++)l(h[a]).children("tbody").children("tr:gt(0)").slice(-e).remove()};d.format=function(){var e=
l.datepicker,h=pq.formatNumber;return function(a,b,c){if("date"==c){if(!isNaN(Date.parse(a)))return e.formatDate(b,new Date(a))}else return h(a,b)}}();d.renderCell=function(e){var h=this.that,a=[],b=[],c=e.Export,g=!1,d=this.options,m=["pq-grid-cell"];if(!e.other&&!c&&h._mergeCells){e=h.iMerge.renderCell(e);if(null==e)return"";e.rowspan&&(a.push("rowspan='"+e.rowspan+"'","colspan='"+e.colspan+"'"),d.mergeModel.flex||(g=!0,m.push("pq-merge-cell")));e.style&&b.push(e.style);e.cls&&m.push(e.cls)}var l=
e.rowData,f=e.column,u=e.colIndx,w=f.dataIndx,x=d.freezeCols,d=d.columnBorders;if(l){c||(a.push("pq-col-indx='"+u+"'"),"right"==f.align?m.push("pq-align-right"):"center"==f.align&&m.push("pq-align-center"),u==x-1&&d&&m.push("pq-last-frozen-col"),(u=f.cls)&&m.push(u),(u=h.iSelection.dirty?null:l.pq_cellselect)&&u[w]&&m.push(h.iCells.hclass));var n,x=l[w],u=(u=f.format)?this.format(x,u,f.dataType):x;e.dataIndx=w;e.cellData=x;e.formatVal=u;if(f.render&&(n=f.render.call(h,e))&&"string"!=typeof n){var x=
n.attr,d=n.cls,A=n.style;x&&a.push(x);d&&m.push(d);A&&b.push(A);n=n.text}null==n&&f._render&&(n=f._render.call(h,e));n&&"string"!=typeof n&&(x=n.attr,d=n.cls,A=n.style,x&&a.push(x),d&&m.push(d),A&&b.push(A),n=n.text);null==n&&(n=u);if(c)return n;if(""===n||void 0==n)n="&nbsp;";(e=l.pq_cellcls)&&(e=e[w])&&m.push(e);if(l=l.pq_cellattr)if(w=l[w]){var w=k(w),B;for(B in w)l=w[B],"style"==B?b.push(l):a.push(B+'="'+l+'"')}b=b.length?" style='"+b.join("")+"' ":"";return["<td class='",m.join(" "),"' ",a.join(" "),
b," >",g?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":"",n,g?"</div></div></div>":"","</td>"].join("")}};d.setFrozenRip=function(e,h){if(e){for(var a;h--&&(a=e[h])&&a.pq_hidden;);this.frozenRip=h}};d.refreshRow=function(e,h){var a=this.that.pdata[e];this._generateRow(a,e,h,null,a.pq_detail&&a.pq_detail.show)};d._generateRow=function(e,h,a,b,c){var g=["pq-grid-row"];this.frozenRip===h&&g.push("pq-last-frozen-row");c&&g.push("pq-detail-master");var d=this.that,m=this.options,l=
m.rowInit;c=m.numberCell;var f="",u="",w=d.rowIndxOffset,x=h+w;l&&(l=l.call(d,{rowData:e,rowIndxPage:h,rowIndx:x}))&&(l.cls&&g.push(l.cls),f+=l.attr?" "+l.attr:"",u+=l.style?l.style:"");!b&&m.stripeRows&&this.isOdd(h,m.freezeRows)&&g.push("pq-grid-oddRow");e.pq_rowselect&&g.push(d.iRows.hclass);d=e.pq_rowcls;null!=d&&g.push(d);if(d=e.pq_rowattr){var d=k(d),n;for(n in d)f+=" "+n+'="'+d[n]+'"'}u=u?"style='"+u+"'":"";a.push("<tr pq-row-indx='",h,"' class='",g.join(" "),"' ",f," ",u," >");c.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",
b?"&nbsp;":x+1,"</td>"].join(""));e={rowIndx:h+w,rowIndxPage:h,other:b,rowData:e};h=this.colDef;b=0;for(g=h.length;b<g;b++)n=h[b],c=n.colIndx,e.column=n.column,e.colIndx=c,a.push(this.renderCell(e));a.push("</tr>");return a};d.isOdd=function(e,h){var a=pq.searchSeqArray(e<h?this.vfrows:this.vrows,e);return a/2==parseInt(a/2)};d._generateDetailRow=function(e,h,a){var b=["pq-grid-row pq-detail-child"],c=this.that,g=c.options,d=g.numberCell;g.stripeRows&&this.isOdd(h,g.freezeRows)&&b.push("pq-grid-oddRow");
e.pq_rowselect&&b.push(c.iRows.hclass);e=e.pq_rowcls;null!=e&&b.push(e);a.push("<tr pq-row-indx='"+h+"' class='"+b.join(" ")+"' >");d.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};d={widgetEventPrefix:"pqgrid",_create:function(){var e=this,h=this.options,y=h.dataModel,g=h.bootstrap,d=g.on,k=h.roundCorners&&!d,s=h.ui,r=h.sortModel;l(document).triggerHandler("pqGrid:bootup",{instance:this});
this.BS_on=d;h.collapsible||(h.collapsible={on:!1,collapsed:!1});h.flexHeight&&(h.height="flex");h.flexWidth&&(h.width="flex");if(y.sortIndx){r.on=h.sortable;r.type=y.sorting;var f=[],q=y.sortIndx,y=y.sortDir;if(l.isArray(q)){for(var u=0;u<q.length;u++){var n=y&&y[u]?y[u]:"up";f.push({dataIndx:q[u],dir:n})}r.single=!1}else f.push({dataIndx:q,dir:y?y:"up"}),r.single=!0;r.sorter=f}!1===h.virtualXHeader&&(h.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new b(this);this.iRefresh=new c.cRefresh(this);
this.iKeyNav=new m(this);this.iIsValid=new a(this);this.tables=[];this.$tbl=null;this.iColModel=new c.cColModel(this);this.iSort=new c.cSort(this);this.iHeader=new c.cHeader(this);this._initTypeColumns();r=this.element;r.on("scroll"+this.eventNamespace,function(){this.scrollTop=this.scrollLeft=0});f=d?g.grid:s.grid;q=d?"":s.header_o;y=d?"":s.bottom;g=d?g.top:s.top;r.empty().addClass("pq-grid "+f+" "+(k?" ui-corner-all":"")).html(["<div class='pq-grid-top ",g," ",k?" ui-corner-top":"","'><div class='pq-grid-title",
k?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",q,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",y," ",k?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=l("div.pq-grid-bottom",r);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=l("div.pq-grid-top",r);h.showTop||this.$top.css("display",
"none");this.$title=l("div.pq-grid-title",r);h.showTitle||this.$title.css("display","none");k=this.$grid_center=l("div.pq-grid-center",r).on("scroll",function(){this.scrollTop=0});this.$header_o=l("div.pq-header-outer",this.$grid_center).on("scroll",function(){this.scrollLeft=this.scrollTop=0});this.$footer=l("div.pq-grid-footer",r);this.$cont_o=l(".pq-grid-cont-outer",k);g=this.$cont=l("div.pq-grid-cont",k);l(window).bind("resize"+e.eventNamespace+" orientationchange"+e.eventNamespace,function(h,
a){e.onWindowResize(h,a)});g.on("click",".pq-grid-cell,.pq-grid-number-cell",function(h){if(!0!==l.data(h.target,e.widgetName+".preventClickEvent")&&l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onClickCell(h)});g.on("click","tr.pq-grid-row",function(h){if(!0!==l.data(h.target,e.widgetName+".preventClickEvent")&&l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onClickRow(h)});g.on("contextmenu","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickCell(h)});
g.on("contextmenu","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickRow(h)});g.on("dblclick","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickCell(h)});g.on("dblclick","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickRow(h)});g.on("blur",function(){e.onblur()});g.on("focus",function(){e.onfocus()});g.on("mousedown",function(h){if(1===h.which){var a=
l(h.target);if(a.closest(".pq-grid")[0]==e.element[0]){var b;b=a.closest(".pq-grid-cell:not(.pq-detail-child)");if(b.length&&(h.currentTarget=b[0],b=e._onCellMouseDown(h),!1===b))return!1;if(!h.isPropagationStopped()){a=a.closest(".pq-grid-row");if(a.length&&(h.currentTarget=a[0],b=e._onRowMouseDown(h),!1===b))return!1;if(!h.isPropagationStopped())return e._onContMouseDown(h)}}}});g.on("mouseenter","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseEnter(h,
l(this))});g.on("mouseenter","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseEnter(h,l(this))});g.on("mouseleave","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseLeave(h,l(this))});g.on("mouseleave","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseLeave(h,l(this))});g.on("keyup",function(h){l(h.target).closest(".pq-grid")[0]==e.element[0]&&
e._trigger("keyUp",h,null)});k.bind("mousewheel DOMMouseScroll",function(h){return e._onMouseWheel(h)});this.$hvscroll=l("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(k);d=l("<div class='pq-vscroll'></div>").appendTo(k);this.prevVScroll=0;g=h.scrollModel;void 0===g.lastColumn&&h.virtualX&&(g.lastColumn="auto");this.vscroll=pq.scrollbar(d,{pace:g.pace,theme:g.theme,bootstrap:h.bootstrap,steps:h.virtualY&&!g.smooth,direction:"vertical",cur_pos:0,pageRight:function(){e.iKeyNav.pageDown()},
pageLeft:function(){e.iKeyNav.pageUp()},drag:function(h,a){e.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(h,a){e.iRefresh.refreshVscroll(a)}});d=l("<div class='pq-hscroll'></div>").appendTo(k);"flex"===h.height&&d.css("position","relative");this.hscroll=pq.scrollbar(d,{direction:"horizontal",pace:g.pace,bootstrap:h.bootstrap,theme:g.theme,steps:h.virtualX&&!g.smooth,cur_pos:0,drag:function(h,a){e.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){h.virtualX&&
!h.scrollModel.smooth&&e.refresh()}});h.selectionModel["native"]||this.disableSelection();k.bind("keydown.pq-grid",function(h){l(h.target).closest(".pq-grid")[0]==e.element[0]&&e._onKeyPressDown(h)});this._refreshTitle();this.iRows=new c.cRows(this);this.iCells=new c.cCells(this);this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new c.cResizeColumns(this);this._mouseInit()},_mouseDown:function(e){var h=this;if(l(e.target).closest(".pq-editor-focus").length)this._blurEditMode=
!0,window.setTimeout(function(){h._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(e){return h._mousePQUp(e)},l(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(e)},destroy:function(){this._trigger("destroy");this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var e in this)delete this[e];this.options=void 0;l.fragments={}},_setOption:function(e,h){var a=
this.options,b=a.dataModel;if("height"===e)"flex"===h?(b=this.vscroll,h&&b&&b.widget().hasClass("pq-sb-vert")&&(a.virtualY?b.option("cur_pos",0):b.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),a[e]=h;else if("width"===e&&"flex"==h)a[e]=h,b=this.hscroll,h&&b&&b.widget().hasClass("pq-sb-horiz")&&(a.virtualX?b.option("cur_pos",0):b.option("ratio",0));else if("title"==e)a[e]=h,this._refreshTitle();else if("roundCorners"==
e)(a[e]=h)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==e)a[e]=h,this.hscroll.option("steps",h);else if("virtualY"==e)a[e]=h,this.vscroll.option("steps",h);else if("freezeCols"==e)h=parseInt(h),!isNaN(h)&&0<=h&&h<=this.colModel.length-2&&(a[e]=h);else if("freezeRows"==e)h=parseInt(h),
!isNaN(h)&&0<=h&&(a[e]=h);else if("resizable"==e)a[e]=h,this._refreshResizable();else if("draggable"==e)a[e]=h,this._refreshDraggable();else if("scrollModel"==e)a[e]=h;else if("dataModel"==e)h.data!==b.data&&b.dataUF&&(b.dataUF.length=0),a[e]=h;else{if("groupModel"==e)throw"use groupOption() to set groupModel options.";"pageModel"==e?a[e]=h:"selectionModel"===e?a[e]=h:"colModel"===e||"columnTemplate"==e?(a[e]=h,this.iColModel.init()):"disabled"===e?(this._super(e,h),!0===h?this._disable():this._enable()):
"numberCell"===e?(a[e]=h,this.iRefresh.decidePanes()):"strLoading"===e?(a[e]=h,this._refreshLoadingString()):"showTop"===e?(a[e]=h,this.$top.css("display",h?"":"none")):"showTitle"===e?(a[e]=h,this.$title.css("display",h?"":"none")):"showToolbar"===e?(a[e]=h,this._toolbar.widget().css("display",h?"":"none")):"toolbar"==e?a[e]=h:"collapsible"===e?(a[e]=h,this._createCollapse()):"showBottom"===e?(a[e]=h,this.$bottom.css("display",h?"":"none")):a[e]=h}return this}};d.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",
trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},
distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:l.ui.keyCode.ENTER,onSave:"nextFocus",
onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,
freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},swipeModel:{on:!0,speed:20,
ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};l.extend(!0,d.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strLoading:"Loading",strNoRows:"No rows to display."});l.widget("paramquery._pqGrid",
l.ui.mouse,d);d=c._pqGrid.prototype;d.refreshCM=function(e){e?this.option("colModel",e):this.iColModel.init()};d.readCell=function(e,h,a,b,c){h=h.dataIndx;return a&&!1===a.isRootCell(b,c,"o")?void 0:e[h]};d.saveCell=function(e,h,a){e[h.dataIndx]=a};d._destroyResizable=function(){var e=this.element,h=e.data();(h.resizable||h.uiResizable||h["ui-resizable"])&&e.resizable("destroy")};d._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};
d._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};d._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);l(window).unbind(this.eventNamespace);l(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};d.collapse=function(e){var h=
this,a=this.element,b=this.options.collapsible,c=b.$collapse.children("span"),g=function(){a.css("overflow","hidden");c.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&a.resizable("destroy");h._toolbar&&h._toolbar.disable();b.collapsed=!0;b._collapsed=!0;b.animating=!1;h._trigger("collapse")};e=e?e:{};if(b._collapsed)return!1;b.htCapture=a.height();!1===e.animate?(a.height(23),g()):(b.animating=!0,a.animate({height:"23px"},function(){g()}))};
d.expand=function(e){var h=this,a=this.element,b=this.options.collapsible,c=b.htCapture,g=b.$collapse.children("span"),d=function(){a.css("overflow","");b._collapsed=!1;b.collapsed=!1;h._refreshResizable();b.refreshAfterExpand&&h.refresh();g.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");h._toolbar&&h._toolbar.enable();b.animating=!1;h._trigger("expand")};e=e?e:{};if(!1===b._collapsed)return!1;!1===e.animate?(a.height(c),d()):(b.animating=!0,a.animate({height:c},function(){d()}))};
d._createCollapse=function(){var e=this,h=this.$top,a=this.BS_on,b=this.options.collapsible;b.$stripe||(h=l("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(h),b.$stripe=h);b.on?b.$collapse||(b.$collapse=l(a?n("collapse-down"):f("circle-triangle-n")).appendTo(b.$stripe).click(function(h){b.collapsed?e.expand():e.collapse()})):b.$collapse&&(b.$collapse.remove(),delete b.$collapse);b.collapsed&&!b._collapsed?e.collapse({animate:!1}):!b.collapsed&&b._collapsed&&e.expand({animate:!1});b.toggle?
b.$toggle||(b.$toggle=l(a?n("fullscreen"):f("arrow-4-diag")).prependTo(b.$stripe).click(function(h){e.toggle()})):b.$toggle&&(b.$toggle.remove(),delete b.$toggle)};d.toggle=function(){var e=this.options,h=e.collapsible,a=this.element,b,c=this._maxim;b=c?"min":"max";var g=l(document.body);if(!1===this._trigger("beforeToggle",null,{state:b}))return!1;"min"==b?(e=c.eleObj,h=c.docObj,this.option({height:e.height,width:e.width,maxHeight:e.maxHeight,maxWidth:e.maxWidth}),a[0].style.cssText=e.cssText,g[0].style.cssText=
h.cssText,l("html").css({overflow:"visible"}),window.scrollTo(h.scrollLeft,h.scrollTop),this._maxim=null):(e={height:e.height,width:e.width,cssText:a[0].style.cssText,maxHeight:e.maxHeight,maxWidth:e.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),a.css(l.extend({position:"fixed",left:0,top:0,margin:0},h.css)),h={scrollLeft:l(window).scrollLeft(),scrollTop:l(window).scrollTop(),cssText:g[0].style.cssText},g.css({height:0,width:0,overflow:"hidden",position:"static"}),
l("html").css({overflow:"hidden"}),window.scrollTo(0,0),this._maxim={eleObj:e,docObj:h});this._trigger("toggle",null,{state:b});this._refreshResizable();this.refresh();l(window).trigger("resize",{$grid:a,state:b})};d._mouseCapture=function(e){var h=this.options;return h.virtualX&&h.virtualY&&!h.scrollModel.smooth||!e.target?!1:l(e.target).closest(".pq-grid")[0]==this.element[0]?(e=h.swipeModel,!1==e.on||"touch"==e.on&&!l.support.touch?!1:!0):!1};d._saveDims=function(){var e=this.$tbl,h=this.$tbl_header;
if(e)for(var a=0;a<e.length;a++){var b=e[a],c=l(b);c.data("offsetHeight",Math.round(b.offsetHeight)-1);c.data("scrollWidth",Math.round(b.scrollWidth))}if(h)for(a=0;a<h.length;a++)b=h[a],e=l(b).parent(),e.data("offsetHeight",Math.round(b.offsetHeight)),e.data("scrollWidth",Math.round(b.scrollWidth))};d._mousePQUp=function(e){l(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",e,null)};d._mouseStart=function(e){this.blurEditor({force:!0});return!0};d._mouseDrag=
function(e){return!1==this._trigger("mouseDrag",e,null)?!1:!0};d._mouseStop=function(e){return!1==this._trigger("mouseStop",e,null)?!1:!0};d.onWindowResize=function(e,h){var a=this,b=a.options,c=a.element,g=c.parent();if(h){var d=h.$grid;if(d&&(d==c||0==c.closest(d).length))return}g.length&&(g[0]==document.body||"fixed"==c.css("position")?(c=window.innerHeight?window.innerHeight:l(window).height(),g=l(window).width()):(c=g.height(),g=g.width()),null==a._lastParentHt||c!=a._lastParentHt||g!=a._lastParentWd)&&
(a._lastParentHt=c,a._lastParentWd=g,l.support.touch&&b.editModel.indices&&l(document.activeElement).is(".pq-editor-focus")||(a.autoResizeTimeout&&clearTimeout(a.autoResizeTimeout),a.autoResizeTimeout=window.setTimeout(function(){a._refreshAfterResize();delete a.autoResizeTimeout},b.autoSizeInterval||0)))};d._onMouseWheel=function(e){this._saveDims();var h=this.options,a=0,b=!1;e=e.originalEvent;var c=e.wheelDeltaX,g=e.wheelDeltaY,d=e.wheelDelta;if(c&&Math.abs(c)>Math.abs(g)){if("flex"==h.width)return!0;
b=!0;a=c/120}else if(d){if(!this.iRefresh.vscroll)return!0;a=d/120}else if(e.detail){if(!this.iRefresh.vscroll)return!0;a=-1*e.detail/3}a*=3;e=b?this.hscroll:this.vscroll;g=parseInt(e.option("cur_pos"));c=parseInt(e.option("num_eles"));if(!h.scrollModel.smooth&&(b&&h.virtualX||!b&&h.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":"floor"](a);h=g-a;0>h?h=0:h>c-1&&(h=c-1);if(h==g)return!0;e.option("cur_pos",g-a);e.scroll()}else{h=e.option("ratio");a=h-a/(c-1);1<a?a=1:0>a&&(a=0);if(h==
a)return!0;e.option("ratio",a);e.drag()}return!1};d._onDblClickCell=function(e){var h=l(e.currentTarget),a=this.getCellIndices({$td:h}),b=a.rowIndxPage,c=b+this.rowIndxOffset,a=a.colIndx;if(null!=a){if(!1==this._trigger("cellDblClick",e,{$td:h,rowIndxPage:b,rowIndx:c,colIndx:a,column:this.colModel[a],rowData:this.pdata[b]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:c})&&this.isEditableCell({colIndx:a,rowIndx:c})&&this.editCell({rowIndxPage:b,colIndx:a})}};d._onClickCont=
function(e){};d._onClickRow=function(e){var h=l(e.currentTarget),a=parseInt(h.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowClick",e,{$tr:h,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};d._onRightClickRow=function(e){var h=l(e.currentTarget),a=parseInt(h.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowRightClick",e,{$tr:h,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};d._onDblClickRow=function(e){var h=l(e.currentTarget),
a=parseInt(h.attr("pq-row-indx")),b=this.getRowIndxOffset();if(!1==this._trigger("rowDblClick",e,{$tr:h,rowIndxPage:a,rowIndx:a+b,rowData:this.pdata[a]}))return!1};d.getValueFromDataType=function(e,h,a){if("date"==h)return h=Date.parse(e),isNaN(h)?"":a?h:e;if("object"==h)return e;if("integer"==h)h=parseInt(e);else if("float"==h)h=parseFloat(e);else return"bool"==h?(h=l.trim(e).toLowerCase(),0==h.length?null:"true"==h||"yes"==h||"1"==h?!0:"false"==h||"no"==h||"0"==h?!1:Boolean(h)):l.trim(e);return isNaN(h)||
null==h?null==e?e:null:h};var a=function(e){this.that=e},g=a.prototype;g._isValidCell=function(e){var h=this.that,a=e.column,b=a.validations;if(!b||!b.length)return{valid:!0};var c=e.value,g=a.dataType,d=function(e){return h.getValueFromDataType(e,g,!0)};e=e.rowData;if(!e)throw"rowData required.";for(var k=0;k<b.length;k++){var m=b[k],l=m.type,f=!1,n=m.msg,x=m.value;if(!1!==m.on&&(null==c&&"function"!=typeof l?f=!1:"minLen"==l?(c=d(c),x=d(x),c.length>=x&&(f=!0)):"nonEmpty"==l?null!=c&&""!==c&&(f=
!0):"maxLen"==l?(c=d(c),x=d(x),c.length<=x&&(f=!0)):"gt"==l?(c=d(c),x=d(x),c>x&&(f=!0)):"gte"==l?(c=d(c),x=d(x),c>=x&&(f=!0)):"lt"==l?(c=d(c),x=d(x),c<x&&(f=!0)):"lte"==l?(c=d(c),x=d(x),c<=x&&(f=!0)):"neq"==l?(c=d(c),x=d(x),c!==x&&(f=!0)):"regexp"==l?(new RegExp(x)).test(c)&&(f=!0):"function"==typeof l?(x={column:a,value:c,rowData:e,msg:n},!1==l.call(h,x)?(f=!1,x.msg!=n&&(n=x.msg)):f=!0):f=!0,!f))return{valid:!1,msg:n,column:a,warn:m.warn,dataIndx:a.dataIndx,validation:m}}return{valid:!0}};g.isValidCell=
function(e){var h=this.that,a=e.rowData,b=e.rowIndx,c=e.value,g=e.valueDef,d=e.column,k=e.focusInvalid,m=h.options,f=m.bootstrap,u=e.allowInvalid,n=d.dataIndx,x=m.validation,z=m.warning,A=m.editModel,B=A.invalidClass,E=A.warnClass,A=document.activeElement;if(e.checkEditable&&!1==h.isEditableCell({rowIndx:b,dataIndx:n}))return{valid:!0};e=this._isValidCell({column:d,value:c,rowData:a});var c=e.valid,d=e.warn,D=e.msg;if(c)h.data({rowData:a,dataIndx:n,data:"pq_valid"})&&(h.removeClass({rowData:a,rowIndx:b,
dataIndx:n,cls:E+" "+B}),h.removeData({rowData:a,dataIndx:n,data:"pq_valid"}));else var x=l.extend({},d?z:x,e.validation),F=x.css,N=x.cls,L=x.icon,J=x.style;if(u||d){if(c)return{valid:!0};h.addClass({rowData:a,rowIndx:b,dataIndx:n,cls:d?E:B});h.data({rowData:a,dataIndx:n,data:{pq_valid:{css:F,icon:L,style:J,msg:D,cls:N}}});return e}if(!c){if(null==b&&(a=h.getRowIndx({rowData:a,dataUF:!0}),b=a.rowIndx,null==b||a.uf))return e.uf=a.uf,e;if(k){var I;if(!g)h.goToPage({rowIndx:b}),b={rowIndx:b,dataIndx:n},
b=h.normalize(b),I=h.getCell(b),h["cell"==m.selectionModel.type?"setSelection":"scrollCell"](b),h.focus(b);else if(l(A).hasClass("pq-editor-focus")&&(g=m.editModel.indices)){m=g.rowIndx;g=g.dataIndx;if(null!=b&&b!=m)throw"incorrect usage of isValid rowIndx: "+b;if(n!=g)throw"incorrect usage of isValid dataIndx: "+n;h.editCell({rowIndx:m,dataIndx:n})}var G;if(I||(G=h.getEditCell())&&G.$cell){h=I||G.$cell;h.attr("title",D);I="tooltip";G="open";f.on&&f.tooltip&&(I=f.tooltip,G="show");try{h[I]("destroy")}catch(M){}h[I]({trigger:"manual",
position:{my:"left center+5",at:"right center"},content:function(){return(""==L?"":"<span class='ui-icon "+L+" pq-tooltip-icon'></span>")+D},open:function(e,h){var a=h.tooltip;N&&a.addClass(N);if(J){var b=a.attr("style");a.attr("style",b+";"+J)}F&&a.tooltip.css(F)}})[I](G)}}return e}if(g&&(G=h.getEditCell())&&G.$cell){h=G.$cell;h.removeAttr("title");try{h.tooltip("destroy")}catch(H){}}return{valid:!0}};d.isValid=function(e){return this.iIsValid.isValid(e)};g.isValid=function(e){e=e||{};var h=this.that,
a=e.allowInvalid,b=e.focusInvalid,c=e.checkEditable,a=null==a?!1:a,g=e.dataIndx;if(null!=g){var d=h.columns[g],k=e.rowData||h.getRowData(e),m=e.hasOwnProperty("value"),h=m?e.value:k[g],h=this.isValidCell({rowData:k,checkEditable:c,rowIndx:e.rowIndx,value:h,valueDef:m,column:d,allowInvalid:a,focusInvalid:b});return h.valid||h.warn?{valid:!0}:h}if(null!=e.rowIndx||null!=e.rowIndxPage||null!=e.rowData)for(var k=e.rowData||h.getRowData(e),l=h.colModel,m=[],f=0,n=l.length;f<n;f++){if(d=l[f],!d.hidden&&
(g=d.dataIndx,h=k[g],h=this.isValidCell({rowData:k,value:h,column:d,rowIndx:e.rowIndx,checkEditable:c,allowInvalid:a,focusInvalid:b}),!h.valid&&!h.warn))if(a)m.push({rowData:k,dataIndx:g,column:d});else return h}else{e=e.data?e.data:h.options.dataModel.data;m=[];if(!e)return null;f=0;for(n=e.length;f<n;f++){k=e[f];if(c&&(d=this.getRowIndx({rowData:k}).rowIndx,null==d||!1==h.isEditableRow({rowData:k,rowIndx:d})))continue;k=this.isValid({rowData:k,rowIndx:d,checkEditable:c,allowInvalid:a,focusInvalid:b});
g=k.cells;if(!1===a){if(!k.valid)return k}else g&&g.length&&(m=m.concat(g))}}return a&&m.length?{cells:m,valid:!1}:{valid:!0}};d.isValidChange=function(e){e=e||{};var h=this.getChanges(),h=h.updateList.concat(h.addList);e.data=h;return this.isValid(e)};d.isEditableRow=function(e){var h=this.options.editable;return null!=h?"function"==typeof h?h.call(this,this.normalize(e)):h:!0};d.isEditableCell=function(e){e=this.normalize(e);var h=e.column,a=h.editable;return e.checkVisible&&h.hidden?!1:null!=a?
"function"==typeof a?a.call(this,e):a:!0};d._onContMouseDown=function(e){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",e,null))return!1;var h=l(e.target);e=h.closest(".pq-grid-cell,.pq-grid-number-cell");h=h.closest(".pq-grid-row");e.length||h.length||(e=this.$cont[0],e.setAttribute("tabindex",0),e.focus());return!0};d._onCellMouseDown=function(e){var h=l(e.currentTarget),a=this.getCellIndices({$td:h});if(null!=a.rowIndx)return a=this.iMerge.getRootCell(a.rowIndx,a.colIndx,
"o"),a=this.normalize(a),a.$td=h,!1==this._trigger("cellMouseDown",e,a)?!1:!0};d._onRowMouseDown=function(e){var h=l(e.currentTarget),a=this.getRowIndx({$tr:h});a.$tr=h;return!1==this._trigger("rowMouseDown",e,a)?!1:!0};d._onCellMouseEnter=function(e,h){var a=this.options,b=this.getCellIndices({$td:h});if(null!=b.rowIndx&&null!=b.colIndx){if(!1===this._trigger("cellMouseEnter",e,b))return!1;"cell"==a.hoverMode&&this.highlightCell(h);return!0}};d._onRowMouseEnter=function(e,h){var a=this.options,b=
this.getRowIndx({$tr:h}),c=b.rowIndxPage;if(!1===this._trigger("rowMouseEnter",e,b))return!1;"row"==a.hoverMode&&this.highlightRow(c);return!0};d._onCellMouseLeave=function(e,h){"cell"==this.options.hoverMode&&this.unHighlightCell(h);return!0};d._onRowMouseLeave=function(e,h){var a=this.getRowIndx({$tr:h}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(a);return!0};d.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};d.disableSelection=
function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(e){if(e.target){var h=l(e.target);if(h.is("input,textarea,select")||h.closest(".pq-native-select").length)return!0;e.preventDefault()}})};d._onClickCell=function(e){var h=this.options.editModel,a=l(e.currentTarget),b=this.getCellIndices({$td:a}),b=this.iMerge.getRootCell(b.rowIndx,b.colIndx,"o"),b=this.normalize(b),c=b.rowIndx,g=b.colIndx;b.$td=a;b.evt=e;if(!1==this._trigger("cellClick",e,b))return!1;
null==g||0>g||1==h.clicksToEdit&&this.isEditableRow({rowIndx:c})&&this.isEditableCell({colIndx:g,rowIndx:c})&&this.editCell(b)};d._onRightClickCell=function(e){var h=l(e.currentTarget),a=this.getCellIndices({$td:h}),b=a.rowIndxPage,c=b+this.rowIndxOffset,a=a.colIndx,g=this.colModel;if(null!=a&&(g=g[a],!1==this._trigger("cellRightClick",e,{$td:h,rowIndxPage:b,rowIndx:c,colIndx:a,dataIndx:g.dataIndx,column:g,rowData:this.pdata[b]})))return!1};d.highlightCell=function(e){e.addClass("pq-grid-cell-hover ui-state-hover")};
d.unHighlightCell=function(e){e.removeClass("pq-grid-cell-hover ui-state-hover")};d.highlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.addClass("pq-grid-row-hover ui-state-hover")};d.unHighlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.removeClass("pq-grid-row-hover ui-state-hover")};d._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};d._findCellFromEvt=function(e){e=l(e.target).closest(".pq-grid-cell");
if(null==e||0==e.length)return{rowIndxPage:null,colIndx:null,$td:null};var h=this.getCellIndices({$td:e});h.$td=e;return h};d._initPager=function(){var e=this,h=e.options,a=h.pageModel;a.type&&(h={bootstrap:h.bootstrap,change:function(h,a){e.blurEditor({force:!0});var b=e.options.pageModel;void 0!=a.curPage&&(b.prevPage=b.curPage,b.curPage=a.curPage);void 0!=a.rPP&&(b.rPP=a.rPP);"remote"==b.type?e.remoteRequest({callback:function(){e._onDataAvailable({apply:!0,header:!1})}}):e.refreshView({header:!1,
source:"pager"})},refresh:function(h){e.refreshDataAndView()}},h=l.extend(h,a),this.pagerW=pq.pager(a.appendTo?a.appendTo:this.$footer,h))};d.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=l("<div class='pq-loading'></div>").appendTo(this.element);l(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",
.2)};d._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};d.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};d.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};d.refreshDataFromDataModel=function(e){e=e||{};var h=this.options,a=h.pageModel,b=h.dataModel.data,c;c=a.type;var g,
d=this._queueATriggers,k;for(k in d){var m=d[k];delete d[k];this._trigger(k,m.evt,m.ui)}this._trigger("beforeRefreshData",null,{});"local"==c?(h=a.totalRecords=b.length,a.totalPages=h=Math.ceil(h/a.rPP),a.curPage>h&&(a.curPage=h),h&&!a.curPage&&(a.curPage=1),h=(a.curPage-1)*a.rPP,h=0<=h?h:0,c=a.curPage*a.rPP,c>b.length&&(c=b.length),this.pdata=b.slice(h,c),g=h):"remote"==c?(a.totalPages=h=Math.ceil(a.totalRecords/a.rPP),a.curPage>h&&(a.curPage=h),h&&!a.curPage&&(a.curPage=1),c=a.rPP,c>b.length&&(c=
b.length),this.pdata=b.slice(0,c),g=a.rPP*(a.curPage-1)):this.pdata=h.backwardCompat?b.slice(0):b;this.rowIndxOffset=0<=g?g:0;this._trigger("dataReady",null,{source:e.source})};d.getQueryStringCRUD=function(){return""};d.remoteRequest=function(e){this.loading&&this.xhr.abort();e=e||{};var h=this,a="",b="",c=this.options,g=!1,d=this.colModel,k=c.dataModel,m=c.sortModel,f=c.filterModel,u=c.pageModel;if("function"==typeof k.getUrl)(d=k.getUrl.call(this,{colModel:d,dataModel:k,sortModel:m,groupModel:c.groupModel,
pageModel:u,filterModel:f}))&&d.url&&(a=d.url),d&&d.data&&(b=d.data);else if("string"==typeof k.url){var a=k.url,b={},c={},n={};"remote"==m.type&&(e.initBySort||this.sort({initByRemote:!0}),(m=this.iSort.getQueryStringSort())&&(b={pq_sort:m}));"remote"==u.type&&(n={pq_curpage:u.curPage,pq_rpp:u.rPP});"local"!=f.type&&(f=this.iFilterData.getQueryStringFilter())&&(g=!0,c={pq_filter:f});f=k.postData;u=k.postDataOnce;f&&"function"==typeof f&&(f=f.call(this,{colModel:d,dataModel:k}));b=l.extend({pq_datatype:k.dataType},
c,n,b,f,u)}a&&(this.loading=!0,this.showLoading(),this.xhr=l.ajax({url:a,dataType:k.dataType,async:null==k.async?!0:k.async,cache:k.cache,contentType:k.contentType,type:k.method,data:b,beforeSend:function(e,a){if("function"==typeof k.beforeSend)return k.beforeSend.call(h,e,a)},success:function(a,b,c){h.onRemoteSuccess(a,b,c,g,e)},error:function(e,a,b){h.hideLoading();h.loading=!1;if("function"==typeof k.error)k.error.call(h,e,a,b);else if("abort"!=b)throw"Error : "+b;}}))};d.onRemoteSuccess=function(e,
a,b,c,g){var d=this.options,k=this.colModel,m=d.pageModel,d=d.dataModel;e="function"==typeof d.getData?d.getData.call(this,e,a,b):e;d.data=e.data;"remote"==m.type&&(null!=e.curPage&&(m.curPage=e.curPage),null!=e.totalRecords&&(m.totalRecords=e.totalRecords));this.hideLoading();this.loading=!1;this._trigger("load",null,{dataModel:d,colModel:k});c&&(this._queueATriggers.filter={ui:{}});g.callback&&g.callback()};d._refreshTitle=function(){this.$title.html(this.options.title)};d._destroyDraggable=function(){var e=
this.element,a=e.parent(".pq-wrapper");a.length&&a.data("draggable")&&(a.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),e.unwrap(".pq-wrapper"))};d._refreshDraggable=function(){var e=this.element,a=this.$title;this.options.draggable?(a.addClass("pq-draggable pq-no-capture"),e.parent(".pq-wrapper").length||e.wrap("<div class='pq-wrapper' />"),e.parent(".pq-wrapper").draggable({handle:a})):this._destroyDraggable()};d._refreshResizable=function(){var e=this,a=this.element,
b=this.options,c=-1<(b.width+"").indexOf("%"),g=-1<(b.height+"").indexOf("%"),d="auto"==b.width,k="flex"==b.width,m="flex"==b.height;if(!b.resizable||(m||g)&&(k||c||d))this._destroyResizable();else{var f="e,s,se";if(m||g)f="e";else if(k||c||d)f="s";c=!0;a.hasClass("ui-resizable")&&(g=a.resizable("option","handles"),f==g?c=!1:this._destroyResizable());c&&a.resizable({helper:"ui-state-default",handles:f,minWidth:b.minWidth,minHeight:b.minHeight?b.minHeight:100,delay:0,start:function(e,a){l(a.helper).css({opacity:.5,
background:"#ccc",border:"1px solid steelblue"})},resize:function(e,a){},stop:function(a,h){var c=e.element,g=c[0],d=b.width,k=b.height,C=-1<(d+"").indexOf("%"),m=-1<(k+"").indexOf("%"),v=!1;g.style.width=g.offsetWidth+3+"px";g.style.height=g.offsetHeight+3+"px";m||"flex"==k||(v=!0,b.height=g.offsetHeight);C||"auto"==d||"flex"==d||(v=!0,b.width=g.offsetWidth);e.refresh();c.css("position","relative");v&&l(window).trigger("resize")}})}};d._refreshAfterResize=function(){var e=this.options,a=e.width,
b=e.height,e=-1!=(a+"").indexOf("%")?!0:!1,a="auto"===a,b=-1!=(b+"").indexOf("%")?!0:!1;(e||a||b)&&this.refresh()};d.refresh=function(e){this.iRefresh.refresh(e)};d.refreshView=function(e){null!=this.options.editModel.indices&&this.blurEditor({force:!0});this.refreshDataFromDataModel(e);this.refresh(e)};d._refreshPager=function(){var e=this.options,a=e.pageModel,b=a.rPP,c=a.totalRecords;a.type?(a=e.pageModel,this.pagerW||this._initPager(),this.pagerW.option(a),c>b?this.$bottom.css("display",""):e.showBottom||
this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),e.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};d.getInstance=function(){return{grid:this}};d.refreshDataAndView=function(e){if("remote"==this.options.dataModel.location){var a=this;this.remoteRequest({callback:function(){a._onDataAvailable(e)}})}else this._onDataAvailable(e)};d.getColIndx=function(e){var a=e.dataIndx;e=e.column;var b;if(e)b=!0;else if(void 0===a)throw"dataIndx / column NA";
var c=this.colModel,g=c.length;if(b)for(a=0;a<g;a++){if(c[a]==e)return a}else if(a=this.colIndxs[a],null!=a)return a;return-1};d.getColumn=function(e){if(null==e.dataIndx)throw"dataIndx N/A";return this.columns[e.dataIndx]};d._generateCellRowOutline=function(){var e=this.options,a=e.editModel;if(this.$div_focus){if(e.debug)throw"this.$div_focus already present assert failed";}else e=this.element,a.inline&&(e=this.getCell(a.indices),e.css("padding",0).empty()),this.$div_focus=l("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(e),
a=l.extend({all:!0},a.indices),a=this.getCell(a),a.css("height",a[0].offsetHeight),a.empty(),this.refreshEditorPos()};d._removeEditOutline=function(e){if(this.$div_focus){e=this.$div_focus.find(".pq-editor-focus");e.hasClass("hasDatepicker")&&e.datepicker("hide").datepicker("destroy");if(e[0]==document.activeElement){var a=this._blurEditMode;this._blurEditMode=!0;e.blur();this._blurEditMode=a}this.$div_focus.remove();delete this.$div_focus;e=this.options.editModel;a=l.extend({},e.indices);e.indices=
null;a.rowData=void 0;this.refreshCell(a)}};d.refreshEditorPos=function(){var e=this.options.editModel,a=e.cellBorderWidth,b=this.$div_focus,c=this.getCell(e.indices);if(!c||!c.length)return!1;var e=c[0].offsetWidth,g=c[0].offsetHeight,d=this.element.offset(),c=c.offset();b.css({height:g,width:e-1,borderWidth:a,left:c.left-d.left-1,top:c.top-d.top-1})};d.setEditorPosTimer=function(){var e=this,a=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=
null);this._refreshEditorPosTimer=window.setInterval(function(){a.editModel.indices&&e.refreshEditorPos()},200)};d.get$Tbl=function(e,a){var b=this.$tbl,c=[];if(b&&b.length){var g=this.pqpanes,d=this.options,k=d.freezeRows,d=d.freezeCols;g.h&&g.v?null==a?e>=k?c.push(b[2],b[3]):c.push(b[0],b[1]):c=a>=d&&e>=k?b[3]:a<d&&e>=k?b[2]:a>=d&&e<k?b[1]:b[0]:c=g.v?null==a?b:a>=d?b[1]:b[0]:g.h?e>=k?b[1]:b[0]:b[0];if(c)return l(c)}};d.scrollCell=function(e){this.scrollRow(e);this.scrollColumn(e)};d.scrollY=function(e){this.vscroll.option("cur_pos",
e);this.vscroll.scroll()};d.scrollRow=function(e){var a=this.options;e=this.normalize(e);var b=e.rowIndxPage,c=e.rowData;if(!this.pdata||b>=this.pdata.length||!c||c.pq_hidden)return!1;a.virtualY?this._scrollRowVirtual(e):this.iMouseSelection.scrollRowNonVirtual(e)};d._scrollRowVirtual=function(e){var a=this.options,b=e.rowIndxPage,c=this.iHierarchy?!0:!1,g=e.rowIndx;e=this.vscroll;var d=this.scrollCurPos,b=null==b?g-this.rowIndxOffset:b,g=parseInt(a.freezeRows);if(!(b<g)&&(a=this._calcCurPosFromRowIndxPage(b),
null!=a)){a<d&&(e.option("cur_pos",a),e.scroll());var k=this.get$Tbl(b);if(!k||!k.length)return null;var m=k.children("tbody").children("tr[pq-row-indx="+b+"]"),l=b=m.last();1<m.length&&(l=m.first());var f=b[0],m=parseInt(k.css("marginTop"));if(void 0==f)e.option("cur_pos",a),e.scroll();else{var f=f.offsetTop+f.offsetHeight,u=this.iRefresh.getEContHt(),n=this._getSBHeight(),l=l.prev("tr");if(!l.hasClass("pq-row-hidden")&&!l.hasClass("pq-last-frozen-row")&&f>u-m){l=f-(u-n-m);m=k.children().children("tr");
f=k=0;g?(g=m.filter("tr.pq-last-frozen-row").last().next(),0==g.length&&(g=m.filter("tr.pq-row-hidden").next())):g=m.filter("tr.pq-row-hidden").next();do{if(!g.length)break;k+=g[0].offsetHeight;if(g[0]==b[0])break;else if(c&&!1!=g.hasClass("pq-detail-child")||f++,k>=l)break;g=g.next()}while(1);c=d+f;c>a&&(c=a);d=e.option("num_eles");d<c+1&&(d=c+1);e.option({num_eles:d,cur_pos:c});e.scroll()}}}};d.blurEditor=function(e){if(this.$div_focus){var a=this.$div_focus.find(".pq-editor-focus");if(e&&e.blurIfFocus)document.activeElement==
a[0]&&a.blur();else return a.triggerHandler("blur",e)}};d._scrollColumnVirtual=function(e){var a=e.colIndx,b=this.hscroll,a=null==a?this.colIndxs[e.dataIndx]:a;e=this.options.freezeCols;var c=this._calcRightEdgeCol(a).width,g=this.iRefresh.getEContWd();if(c>g){for(var c=this.calcWidthCols(-1,a+1)-g,g=this.colModel,d=g.length,k=0,m=0,l=e;l<d;l++){var f=g[l];f.hidden||(k+=f.outerWidth);if(l==a){m=l-e-this._calcNumHiddenUnFrozens(l);break}else if(k>=c){m=l-e-this._calcNumHiddenUnFrozens(l)+1;break}}b.option("cur_pos",
m);b.scroll();return!0}return a>=e&&a<this.initH?(a=a-e-this._calcNumHiddenUnFrozens(a),b.option("cur_pos",a),b.scroll(),!0):!1};d.scrollColumn=function(e){var a=this.options;return"flex"!==a.width||a.maxWidth?a.virtualX?this._scrollColumnVirtual(e):this.iMouseSelection.scrollColumnNonVirtual(e):!1};d.selection=function(e){if(e){var a=e.method,b,c=e.type;"row"==c?b=this.iRows[a](e):"cell"==c&&(b=this.iCells[a](e));if("add"==a||"remove"==a||"removeAll"==a)this.iSelection.dirty=!0,this.iSelection._trigger();
return b}e=this.iSelection;e.isDirty()&&e.refresh();return e};d.goToPage=function(e){var a=this.options.pageModel;if("local"==a.type||"remote"==a.type){var b=e.rowIndx,c=a.rPP;e=null==e.page?Math.ceil((b+1)/c):e.page;e!=a.curPage&&(a.curPage=e,"local"==a.type?this.refreshView():this.refreshDataAndView())}};d.setSelection=function(e){if(null==e)return this.iSelection.removeAll(),!0;var a=this.pdata;if(!a||!a.length)return!1;e=this.normalize(e);var a=e.rowIndx,b=e.rowIndxPage,c=e.colIndx;e.rowData&&
null==a&&(b=this.getRowIndx(e),e.rowIndx=a=b.rowIndx,e.rowIndxPage=b.rowIndxPage);if(null==a||0>a||0>c||c>=this.colModel.length)return!1;this.goToPage(e);b=a-this.rowIndxOffset;this.scrollRow({rowIndxPage:b});null==c?this.range({r1:a}).select():(this.scrollColumn({colIndx:c}),this.range({r1:a,c1:c}).select());!1!==e.focus&&this.focus({rowIndxPage:b,colIndx:null==c?this.getFirstVisibleCI():c})};d.getColModel=function(){return this.colModel};d.saveEditCell=function(e){var a=this.options,b=a.editModel;
if(!b.indices)return null;var c=l.extend({},b.indices);e=e?e.evt:null;var g=c.rowIndxPage,b=g+this.rowIndxOffset,d=this.colModel[c.colIndx],c=d.dataIndx,k=this.pdata[g],m=a.dataModel,f;if(null==k)return null;if(null!=g){a=this.getEditCellData();if(l.isPlainObject(a)){f={};for(var q in a)f[q]=k[q]}else f=this.readCell(k,d);"<br>"==a&&(a="");null==f&&""===a&&(a=null);q={rowIndx:b,rowIndxPage:g,dataIndx:c,column:d,newVal:a,value:a,oldVal:f,rowData:k,dataModel:m};if(!1===this._trigger("cellBeforeSave",
e,q))return!1;g={};d=!1;l.isPlainObject(a)?(g=a,d=!0):g[c]=a;if(!1===this.updateRow({row:g,rowIndx:b,refresh:d,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",e,q);return!0}};d._addInvalid=function(e){};d._digestData=function(e){if(!1===this._trigger("beforeValidate",null,e))return!1;var a=this.options,b=a.editModel,c=a.dataModel,g=c.data,d=a.colModel,k=a.pageModel,m=a.historyModel,l=e.validate,l=null==l?b.validate:l,f="remote"==k.type,n=e.allowInvalid,n=null==n?b.allowInvalid:
n,w=a.trackModel,b=e.track,b=null==b?null==a.track?w.on:a.track:b,x=e.history,x=null==x?m.on:x,z=this.iHistory,m=this.iUCData,A=e.checkEditable,A=null==A?!0:A,B=e.checkEditableAdd,B=null==B?A:B,w=this.saveCell,E=this.columns,D=this.colIndxs,F=e.source,N=this.rowIndxOffset,L=this.getValueFromDataType,J=e.rowList,I=J.length;g||(g=a.dataModel.data=[]);for(var G=[],M=0;M<I;M++){var H=J[M],K=H.newRow,S=H.rowData,O=H.type,U=H.checkEditable,P=H.rowIndx,V=H.oldRow;null==U&&("update"==O?U=A:"add"==O&&(U=B));
if("update"==O){if(!V)throw"oldRow required while update";if(U&&!0!==a.editable&&!1===this.isEditableRow({rowIndx:P,rowData:S}))continue}else if("delete"==O){G.push(H);continue}if("add"==O)for(var T=0,W=d.length;T<W;T++){var R=d[T],Q=R.dataIndx;K[Q]=K[Q]}for(Q in K)if(R=E[Q],T=D[Q],R)if(U&&null!=R.editable&&!1===this.isEditableCell({rowIndx:P,colIndx:T,dataIndx:Q}))delete K[Q],V&&delete V[Q];else{var X=R.dataType,T=L(K[Q],X),W=V?V[Q]:void 0,W=void 0!==W?L(W,X):void 0;K[Q]=T;if(l&&R.validations)if("edit"==
F&&!1===n){if(R=this.isValid({focusInvalid:!0,dataIndx:Q,rowIndx:P,value:T}),!1==R.valid&&!R.warn)return!1}else R=this.iIsValid.isValidCell({column:R,rowData:"add"==O?K:S,allowInvalid:n,value:T}),!1===R.valid&&(!1!==n||R.warn||delete K[Q]);"update"==O&&T===W&&(delete K[Q],V&&delete V[Q])}if(K)if("update"==O)for(Q in K){G.push(H);break}else G.push(H)}J=e.rowList=G;I=J.length;if(!I)return"edit"==F?null:!1;x&&(z.increment(),z.push({rowList:J}));for(M=0;M<I;M++)if(H=J[M],O=H.type,K=H.newRow,P=H.rowIndx,
a=H.rowIndxPage,S=H.rowData,"update"==O)for(Q in b&&m.update({rowData:S,row:K,refresh:!1}),K)R=E[Q],T=K[Q],w(S,R,T);else if("add"==O)b&&m.add({rowData:K}),null==P&&null==a?g.push(K):(a=P-N,a=f?a:P,g.splice(a,0,K)),f&&k.totalRecords++;else if("delete"==O){a=this.getRowIndx({rowData:S,dataUF:!0});d=a.uf;P=a.rowIndx;if(b)m["delete"]({rowIndx:P,rowData:S});a=P-N;a=f?a:P;d?c.dataUF.splice(P,1):(a=g.splice(a,1))&&a.length&&f&&k.totalRecords--}this._trigger("change",null,e);return!0};d.refreshColumn=function(e){e=
this.normalize(e);var a=this.initV,b=this.finalV,c=this.options.freezeRows,g=e.colIndx,d=e.dataIndx,k=e.column;e.skip=!0;for(var m=0;m<=b;m++)m<a&&m>=c&&(m=a),e.rowIndxPage=m,this.refreshCell(e);this._trigger("refreshColumn",null,{column:k,colIndx:g,dataIndx:d});this.iRefresh.softRefresh()};d.refreshCell=function(e){e=this.normalize(e);if(this.pdata){var a=e.skip,b=e.rowIndx,c=e.rowIndxPage,g=e.colIndx,d=this.iMerge;if(e.rowData){var k=this.getCell({all:!0,rowIndxPage:c,colIndx:g});if(k&&0<k.length){var m=
e;d.ismergedCell(b,g)&&(m=d.getRootCell(b,g,"a"));var b=this.iGenerateView.renderCell(m),l;b&&(k.replaceWith(b),(l=this._focusElement)&&l.rowIndxPage==c&&this.focus(),a||(this._trigger("refreshCell",null,e),this.iRefresh.softRefresh()))}}}};d.refreshRow=function(e){e=this.normalize(e);if(this.pdata){var a=e.rowIndx,b=e.rowIndxPage,c=this.options,g=c.freezeRows,d=e.rowData;if(!d||d.pq_hidden||b>this.finalV||b<this.initV&&b>=g)return null;var k=this.getRow({all:!0,rowIndxPage:b}),m,f=[];this.iGenerateView.refreshRow(b,
f);f=f.join("");if(k&&k.length)k.replaceWith(f);else if(c.virtualY)if(b==this.finalV)this.$tbl.append(f);else if(b==this.initV)for(c=this.$tbl,k=0;k<c.length;k++)l(c[k]).children("tbody").children(g?".pq-last-frozen-row":"tr:first").after(f);else throw"refreshRow > rip not found";else return!1;(m=this._focusElement)&&m.rowIndxPage==b&&this.focus();this._trigger("refreshRow",null,{rowData:d,rowIndx:a,rowIndxPage:b});!1!==e.refresh&&this.iRefresh.softRefresh();return!0}};d.quitEditMode=function(e){if(!this._quitEditMode){var a=
!1,b=!1,c=!1,g=this.options.editModel,d=g.indices,k=void 0;this._quitEditMode=!0;e&&(a=e.old,b=e.silent,c=e.fireOnly,k=e.evt);d&&(b||a||this._trigger("editorEnd",k,d),c||(this._removeEditOutline(e),g.indices=null));this._quitEditMode=null}};d.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};d.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};d.getRowIndxOffset=function(){return this.rowIndxOffset};d.getEditCell=
function(){var e=this.options.editModel;if(e.indices){var e=this.getCell(e.indices),a=this.$div_focus.children(".pq-editor-inner"),b=a.find(".pq-editor-focus");return{$td:e,$cell:a,$editor:b}}return{}};d.editCell=function(e){e=this.normalize(e);var a=this.iMerge,b=e.rowIndx,c=e.colIndx;if(a.ismergedCell(b,c)&&(a=a.getRootCell(b,c,"o"),a.rowIndx!=e.rowIndx||a.colIndx!=e.colIndx))return!1;this.scrollRow(e);this.scrollColumn(e);if((a=this.getCell(e))&&a.length)return this._editCell(e)};d.getFirstEditableColIndx=
function(e){if(null==e.rowIndx)throw"rowIndx NA";if(!this.isEditableRow(e))return-1;for(var a=this.colModel,b=0;b<a.length;b++)if(e.colIndx=b,this.isEditableCell(e)&&!a[b].hidden)return b;return-1};d.editFirstCellInRow=function(e){var a=this.rowIndxOffset,b=e.rowIndx;e=e.rowIndxPage;b=null==b?e+a:b;e=null==e?b-a:e;a=this.getFirstEditableColIndx({rowIndx:b});-1!=a&&this.editCell({rowIndxPage:e,colIndx:a})};d._editCell=function(e){var a=this.normalize(e),b=this;e=a.evt;var g=a.rowIndxPage,d=a.colIndx,
k=b.pdata;if(!k||g>=k.length)return!1;var m=this.options,f=m.editModel,k=k[g],t=a.rowIndx,q=this.colModel[d],n=q.dataIndx,w=b.readCell(k,q),x={rowIndx:t,rowIndxPage:g,cellData:w,rowData:k,dataIndx:n,colIndx:d,column:q},z=q.editor,z="function"==typeof z?z.call(this,x):z;void 0===z&&"function"==typeof m.geditor&&(z=m.geditor.call(this,x));if(!1!==z){z&&z.getData&&(f._getData=z.getData);var A=m.editor,B=z?l.extend({},A,z):A,m=!1;if(f.indices){z=f.indices;if(z.rowIndxPage==g&&z.colIndx==d){this.refreshEditorPos();
var E=this.$div_focus.find(".pq-editor-focus");window.setTimeout(function(){E.focus()},0);return!1}if(!1===this.blurEditor({evt:e}))return!1;this.quitEditMode({evt:e})}f.indices={rowIndxPage:g,rowIndx:t,colIndx:d,column:q,dataIndx:n};this._generateCellRowOutline();z=this.$div_focus.children(".pq-editor-inner");"right"==q.align?z.addClass("pq-align-right"):"center"==q.align?z.addClass("pq-align-center"):z.addClass("pq-align-left");x.$cell=z;var D,F=B.type,a=null==a.select?B.select:a.select,N=B.init,
L=B.valueIndx,J=B.dataMap,I=B.mapIndices,I=I?I:{},G=B.cls||"",G="function"===typeof G?G.call(this,x):G;D="pq-editor-focus "+G;var G=D+" pq-cell-editor ",M=B.attr||"",M="function"===typeof M?M.call(this,x):M,H=B.style||"",H=(H="function"===typeof H?H.call(this,x):H)?"style='"+H+"'":"";x.cls=D;x.attr=M;"function"==typeof F&&(D=F.call(this,x))&&(F=D);A._type=F;"checkbox"==F?(B=B.subtype,z.html("<input "+(w?"checked='checked'":"")+" class='"+G+"' "+M+" "+H+" type=checkbox name='"+n+"' />"),A=z.children("input"),
"triple"==B&&(A.pqval({val:w}),z.click(function(e){l(this).children("input").pqval({incr:!0})}))):"textarea"==F||"select"==F||"textbox"==F?("textarea"==F?D="<textarea class='"+G+"' "+M+" "+H+" name='"+n+"' ></textarea>":"select"==F?(A=B.options||[],"function"===typeof A&&(A=A.call(this,x)),G=[M," class='",G,"' ",H," name='",n,"'"].join(""),D=c.select({options:A,attr:G,prepend:B.prepend,labelIndx:B.labelIndx,valueIndx:L,groupIndx:B.groupIndx,dataMap:J})):D="<input class='"+G+"' "+M+" "+H+" type=text name='"+
n+"' />",l(D).appendTo(z).val("select"==F&&null!=L&&(I[L]||this.columns[L])?I[L]?k[I[L]]:k[L]:w)):F&&"contenteditable"!=F||(z.html("<div contenteditable='true' tabindx='0' "+H+" "+M+" class='"+G+"'></div>"),z.children().html(w),m=!0);"function"==typeof N&&N.call(this,x);var b=this,E=z.children(".pq-editor-focus"),K=f.filterKeys;(w=q.editModel)&&void 0!==w.filterKeys&&(K=w.filterKeys);var S={$cell:z,$editor:E,dataIndx:n,column:q,colIndx:d,rowIndx:t,rowIndxPage:g,rowData:k};f.indices=S;E.data({FK:K}).on("click",
function(e){l(this).focus()}).on("keydown",function(e){b.iKeyNav._keyDownInEdit(e)}).on("keypress",function(e){return b.iKeyNav._keyPressInEdit(e,{FK:K})}).on("keyup",function(e){return b.iKeyNav._keyUpInEdit(e,{FK:K})}).on("blur",function(e,a){var h=b.options.editModel,c=h.onBlur,g="save"==c,d="validate"==c,k=h.cancelBlurCls,m=a?a.force:!1;if(!b._quitEditMode&&!b._blurEditMode&&h.indices){h=l(e.target);if(!m){if(!1===b._trigger("editorBlur",e,S)||!c||k&&h.hasClass(k))return;if(h.hasClass("hasDatepicker")){if(h.datepicker("widget").is(":visible"))return!1}else if(h.hasClass("ui-autocomplete-input")){if(h.autocomplete("widget").is(":visible"))return}else if(h.hasClass("ui-multiselect")){if(l(".ui-multiselect-menu").is(":visible")||
l(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(h.hasClass("pq-select-button")&&(l(".pq-select-menu").is(":visible")||l(document.activeElement).closest(".pq-select-menu").length))return}b._blurEditMode=!0;if(!b.saveEditCell({evt:e,silent:m||g||!d})&&!m&&d)return b._deleteBlurEditMode(),!1;b.quitEditMode({evt:e});b._deleteBlurEditMode()}}).on("focus",function(e){b._trigger("editorFocus",e,S)});b._trigger("editorBegin",e,S);E.focus();window.setTimeout(function(){!1===
l(document.activeElement).hasClass("pq-editor-focus")&&(b.element?b.element.find(".pq-editor-focus"):l()).focus()},0);if(a)if(m)try{var O=E[0],U=document.createRange();U.selectNodeContents(O);var P=window.getSelection();P.removeAllRanges();P.addRange(U)}catch(V){}else E.select()}};d._deleteBlurEditMode=function(e){var a=this;e=e?e:{};a._blurEditMode&&(e.timer?window.setTimeout(function(){delete a._blurEditMode},0):delete a._blurEditMode)};d.getRow=function(e){var a=this.normalize(e);e=a.rowIndxPage;
var a=a.all?this.$tbl:this.get$Tbl(e),b=l();if(a&&a.length){var c=a.children("tbody");null!=e&&(b=c.children("tr[pq-row-indx="+e+"]"),b.length>a.length&&(b=b.filter(".pq-detail-master")))}return b};d.getCell=function(e){var a=e.all,b=this.options,c=this.normalize(e);e=c.rowIndxPage;var g=c.rowIndx,d=c.colIndx,k=this.iMerge;if(k.ismergedCell(g,d)){b=k.getRootCell(g,d,"a");g=k.getRootCell(g,d,"o");if(!(e===g.rowIndxPage&&d===g.colIndx||e===b.rowIndxPage&&d===b.colIndx))return l();e=b.rowIndxPage;d=
g.colIndx}else if(e>=b.freezeRows&&(e<this.initV||e>this.finalV)||d>=b.freezeCols&&(d<this.initH||d>this.finalH)||!c.rowData||!c.column||c.rowData.pq_hidden||c.column.hidden)return l();return(a=a?this.$tbl:this.get$Tbl(e,d))&&a.length?a.children().children("tr[pq-row-indx="+e+"]").children("[pq-col-indx="+d+"]"):l()};d.getCellHeader=function(e){var a=e.colIndx;e=e.dataIndx;a=null==a?this.colIndxs[e]:a;e=this.$tbl_header;var b=this.options.freezeCols;return e?(1<e.length&&(e=a>=b?l(e[1]):l(e[0])),
a=e.find("[pq-col-indx="+a+"].pq-grid-col-leaf")):l()};d.getEditorIndices=function(){var e=this.options.editModel.indices;return e?l.extend({},e):null};d.getEditCellData=function(){var e=this.options,a=e.editModel,b=a.indices;if(!b)return null;var c=b.colIndx,g=b.rowIndxPage,d=b.rowIndx,k=this.colModel[c],m=k.editor,f=e.editor,e=m?l.extend({},f,m):f,q=e.valueIndx,n=e.labelIndx,m=(m=e.mapIndices)?m:{},w=k.dataIndx,x=this.$div_focus.children(".pq-editor-inner"),z,A=a._getData||e.getData;a._getData=
void 0;if("function"==typeof A)z=A.call(this,{$cell:x,rowData:b.rowData,dataIndx:w,rowIndx:d,rowIndxPage:g,column:k,colIndx:c});else if(a=f._type,"checkbox"==a)z=x.children(),z="triple"==e.subtype?z.pqval():z.is(":checked")?!0:!1;else if("contenteditable"==a)z=x.children().html();else if((b=x.find('*[name="'+w+'"]'))&&b.length)if("select"==a&&null!=q)if(m[q]||this.columns[q]){if(z={},z[m[q]?m[q]:q]=b.val(),z[m[n]?m[n]:n]=b.find("option:selected").text(),e=e.dataMap)if(a=b.find("option:selected").data("map"))for(b=
0;b<e.length;b++)c=e[b],z[m[c]?m[c]:c]=a[c]}else z=b.val();else z=b.val();else(b=x.find(".pq-editor-focus"))&&b.length&&(z=b.val());return z};d.getCellIndices=function(e){e=e.$td;if(null==e||0==e.length||e.closest(".pq-grid")[0]!=this.element[0])return{};var a=e.parent("tr").attr("pq-row-indx"),b;null!=a&&(a=parseInt(a),b=a+this.rowIndxOffset);e=e.attr("pq-col-indx");null!=e&&(e=parseInt(e));return this.iMerge.getRootCell(b,e,"o")};d.getRowsByClass=function(e){var a=this.options,b="remote"==a.pageModel.type,
c=this.rowIndxOffset,a=a.dataModel.data,g=[];if(null==a)return g;for(var d=0,k=a.length;d<k;d++){var m=a[d];if(m.pq_rowcls&&(e.rowData=m,this.hasClass(e))){var m={rowData:m},f=b?d+c:d,l=f-c;m.rowIndx=f;m.rowIndxPage=l;g.push(m)}}return g};d.getCellsByClass=function(e){var a=this.options,b="remote"==a.pageModel.type,c=this.rowIndxOffset,a=a.dataModel.data,g=[];if(null==a)return g;for(var d=0,k=a.length;d<k;d++){var m=a[d],f=b?d+c:d,l=m.pq_cellcls;if(l)for(var n in l)l={rowData:m,rowIndx:f,dataIndx:n,
cls:e.cls},this.hasClass(l)&&(l=this.normalize(l),g.push(l))}return g};d.data=function(e){var a=e.dataIndx,b=e.colIndx,a=null!=b?this.colModel[b].dataIndx:a,b=e.data,c=null==b||"string"==typeof b?!0:!1;e=e.rowData||this.getRowData(e);if(!e)return{data:null};if(null==a){a=e.pq_rowdata;if(c){var g;null!=a&&(g=null==b?a:a[b]);return{data:g}}b=l.extend(!0,e.pq_rowdata,b);e.pq_rowdata=b}else{var d=e.pq_celldata;if(c)return null!=d&&(a=d[a],g=null==b||null==a?a:a[b]),{data:g};d||(e.pq_celldata={});b=l.extend(!0,
e.pq_celldata[a],b);e.pq_celldata[a]=b}};d.attr=function(e){var a=e.rowIndx,b=e.dataIndx,c=e.colIndx,b=null!=c?this.colModel[c].dataIndx:b,c=e.attr,g=null==c||"string"==typeof c?!0:!1,d=this.rowIndxOffset,m=e.refresh;e=e.rowData||this.getRowData(e);if(!e)return{attr:null};g||!1===m||null!=a||(a=this.getRowIndx({rowData:e}).rowIndx);if(null==b){b=e.pq_rowattr;if(g){var f;null!=b&&(f=null==c?b:b[c]);return{attr:f}}c=l.extend(!0,e.pq_rowattr,c);e.pq_rowattr=c;!1!==m&&null!=a&&(a=this.getRow({rowIndxPage:a-
d}))&&(b=k(c),a.attr(b))}else{var t=e.pq_cellattr;if(g)return null!=t&&(a=t[b],f=null==c||null==a?a:a[c]),{attr:f};t||(e.pq_cellattr={});c=l.extend(!0,e.pq_cellattr[b],c);e.pq_cellattr[b]=c;!1!==m&&null!=a&&(a=this.getCell({rowIndxPage:a-d,dataIndx:b}))&&(b=k(c),a.attr(b))}};var k=function(e){var a={},b;for(b in e){var c=e[b];if(c)if("title"==b)c=c.replace(/\"/g,"&quot;"),a[b]=c;else if("style"==b&&"object"==typeof c){var g=[],d,k;for(k in c)(d=c[k])&&g.push(k+":"+d);(c=g.join(";")+(g.length?";":
""))&&(a[b]=c)}else"object"==typeof c&&(c=JSON.stringify(c)),a[b]=c}return a};d.removeData=function(e){var a=e.dataIndx,b=e.colIndx,a=null!=b?this.colModel[b].dataIndx:a,b=e.data,b=null==b?[]:b,b="string"==typeof b?b.split(" "):b,c=b.length,g=e.rowData||this.getRowData(e);if(g)if(null==a){if(a=g.pq_rowdata){if(c)for(e=0;e<c;e++){var d=b[e];delete a[d]}c&&!l.isEmptyObject(a)||delete g.pq_rowdata}}else if((g=g.pq_celldata)&&g[a]){var k=g[a];if(c)for(e=0;e<c;e++)d=b[e],delete k[d];c&&!l.isEmptyObject(k)||
delete g[a]}};d.removeAttr=function(e){var a=e.rowIndx,b=e.dataIndx,c=e.colIndx,b=null!=c?this.colModel[c].dataIndx:b,g=e.attr,g=null==g?[]:g,g="string"==typeof g?g.split(" "):g,d=g.length,c=a-this.rowIndxOffset,k=e.refresh,m=e.rowData||this.getRowData(e);if(m)if(!1!==k&&null==a&&(a=this.getRowIndx({rowData:m}).rowIndx),null==b){if(b=m.pq_rowattr){if(d)for(e=0;e<d;e++){var f=g[e];delete b[f]}else for(f in b)g.push(f);d&&!l.isEmptyObject(b)||delete m.pq_rowattr}!1!==k&&null!=a&&g.length&&(g=g.join(" "),
(a=this.getRow({rowIndxPage:c}))&&a.removeAttr(g))}else{if((m=m.pq_cellattr)&&m[b]){var q=m[b];if(d)for(e=0;e<d;e++)f=g[e],delete q[f];else for(f in q)g.push(f);d&&!l.isEmptyObject(q)||delete m[b]}!1!==k&&null!=a&&g.length&&(g=g.join(" "),(a=this.getCell({rowIndxPage:c,dataIndx:b}))&&a.removeAttr(g))}};d.normalize=function(e){var a={},b;for(b in e)a[b]=e[b];var c=a.rowIndx,g=a.rowIndxPage;e=a.dataIndx;b=a.colIndx;if(null!=g||null!=c){var d=this.rowIndxOffset,c=null==c?parseInt(g,10)+d:c,g=null==g?
parseInt(c,10)-d:g;a.rowIndx=c;a.rowIndxPage=g;a.rowData=a.rowData||this.getRowData(a)}if(null!=b||null!=e)c=this.colModel,e=null==e?c[b]?c[b].dataIndx:void 0:e,b=null==b?this.colIndxs[e]:b,a.column=c[b],a.colIndx=b,a.dataIndx=e;return a};d.addClass=function(e){var a=this.normalize(e),b=a.rowIndxPage,c=a.dataIndx,g=pq.arrayUnique;e=a.cls;var d=a.refresh,k=a.rowData;if(k)if(!1!==d&&null==b&&(b=this.getRowIndx({rowData:k}).rowIndxPage),null==c){var c=k.pq_rowcls,m;m=g((c?c+" "+e:e).split(/\s+/)).join(" ");
k.pq_rowcls=m;!1!==d&&null!=b&&(b=this.getRow({rowIndxPage:b}))&&b.addClass(e)}else{a=[];"function"!=typeof c.push?a.push(c):a=c;var f=k.pq_cellcls;f||(f=k.pq_cellcls={});for(var k=0,l=a.length;k<l;k++)c=a[k],m=(m=f[c])?m+" "+e:e,m=g(m.split(/\s+/)).join(" "),f[c]=m,!1!==d&&null!=b&&(c=this.getCell({rowIndxPage:b,dataIndx:c}))&&c.addClass(e)}};d.removeClass=function(a){var b=this.normalize(a),c=b.rowIndx,g=b.rowData,d=b.dataIndx;a=b.cls;b=b.refresh;if(g){var k=g.pq_cellcls,m=g.pq_rowcls;!1!==b&&null==
c&&(c=this.getRowIndx({rowData:g}).rowIndx);if(null==d)m&&(g.pq_rowcls=this._removeClass(m,a),null!=c&&!1!==b&&(c=this.getRow({rowIndx:c}))&&c.removeClass(a));else if(k){m=[];"function"!=typeof d.push?m.push(d):m=d;for(var f=0,l=m.length;f<l;f++){var d=m[f],q=k[d];q&&(g.pq_cellcls[d]=this._removeClass(q,a),null!=c&&!1!==b&&(d=this.getCell({rowIndx:c,dataIndx:d}))&&d.removeClass(a))}}}};d.hasClass=function(a){var b=a.dataIndx,c=a.cls;a=this.getRowData(a);c=new RegExp("\\b"+c+"\\b");return a?null==
b?(b=a.pq_rowcls)&&c.test(b)?!0:!1:(a=a.pq_cellcls)&&a[b]&&c.test(a[b])?!0:!1:null};d._removeClass=function(a,b){if(a&&b){for(var c=a.split(/\s+/),g=b.split(/\s+/),d=[],k=0,m=c.length;k<m;k++){for(var f=c[k],l=!1,q=0,n=g.length;q<n;q++)if(f===g[q]){l=!0;break}l||d.push(f)}return 1<d.length?d.join(" "):1===d.length?d[0]:null}};d.getRowIndx=function(a){var b=a.$tr,c=a.rowData,g=this.rowIndxOffset;if(c){var d=this.options.dataModel,b=this.get_p_data(),k=!1;a=a.dataUF?d.dataUF:null;d=!1;if(b)for(var m=
0,f=b.length;m<f;m++)if(b[m]==c){d=!0;break}if(!d&&a)for(k=!0,m=0,f=a.length;m<f;m++)if(a[m]==c){d=!0;break}return d?{rowIndxPage:k?void 0:m-g,uf:k,rowIndx:m,rowData:c}:{}}if(null==b||0==b.length)return{};c=b.attr("pq-row-indx");if(null==c)return{};c=parseInt(c);return{rowIndxPage:c,rowIndx:c+g}};d.search=function(a){var b=this.options,c=a.row;a=a.first;for(var g=[],d=this.rowIndxOffset,k="remote"==b.pageModel.type,b=b.dataModel.data,m=0,f=b.length;m<f;m++){var l=b[m],q=!0,n;for(n in c)c[n]!==l[n]&&
(q=!1);if(q&&(l=this.normalize({rowIndx:k?m+d:m}),g.push(l),a))break}return g};var m=function(a){this.options=a.options;this.that=a},g=m.prototype;g._incrRowIndx=function(a,b){var c=this.that,g=a;b=1;for(var c=c.pdata,d=0,k=a+1,m=c.length;k<m&&(c[k].pq_hidden||(d++,g=k,d!=b));k++);return g};g._decrRowIndx=function(a,b){var c=a,g=this.that.pdata;b=1;for(var d=0,k=a-1;0<=k&&(g[k].pq_hidden||(d++,c=k,d!=b));k--);return c};g._decrRowIndx2=function(a,b){var c=this.that,g=a+c.rowIndxOffset,d=c.iMerge,c=
c.pdata;if(d.ismergedCell(g,b)){var k=d.getRootCell(g,b,"a"),g=d.getData(g,b,"proxy_cell");b=k.colIndx;b=g?g.colIndx:b}for(g=a-1;0<=g;g--)if(!c[g].pq_hidden){a=g;break}return{rowIndxPage:a,colIndx:b}};g._incrRowIndx2=function(a,b){var c=this.that,g=a+c.rowIndxOffset,d=c.iMerge,k,c=c.pdata;if(k=d.ismergedCell(g,b)){var m=d.getRootCell(g,b,"a"),g=d.getData(g,b,"proxy_cell");b=m.colIndx;a=k.rowspan?a+k.rowspan-1:0;b=g?g.colIndx:b}g=a+1;for(d=c.length;g<d;g++)if(!c[g].pq_hidden){a=g;break}return{rowIndxPage:a,
colIndx:b}};d.addColumn=function(a){for(var b=a.colList||[{colIndx:a.colIndx,column:a.column}],c=!1!==a.history,g=this.options.colModel,d=0;d<b.length;d++){var k=b[d].colIndx,m=b[d].column;void 0==m.dataIndx&&(m.dataIndx=Math.random());null==k&&(k=b.colIndx=g.length);g.splice(k,0,m)}this.iColModel.init();c&&(this.iHistory.increment(),b.type="add",this.iHistory.push({colList:b}));this._trigger("addColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};d.deleteColumn=function(a){for(var b=a.colList||
[{colIndx:a.colIndx}],c=!1!==a.history,g=this.options.colModel,d=b.length-1;0<=d;d--){var k=b[d],m=g.splice(k.colIndx,1)[0];k.column=m}this.iColModel.init();c&&(this.iHistory.increment(),b.type="delete",this.iHistory.push({colList:b}));this._trigger("deleteColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};g._incrIndx=function(a,b,c){var g=this.that,d=g.iMerge,k,m,f,l,q=g.pdata,n=g.rowIndxOffset,w=g[c?"getLastVisibleRIP":"getFirstVisibleRIP"](),x=g.colModel,z=x.length;if(null==b){if(a==
w)return null;a=this[c?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{m=a+n;if(g=d.ismergedCell(m,b))!l&&(k=d.getData(m,b,"proxy_cell"))&&(f=k.rowIndx-n,q[f].pq_hidden||(a=f)),q[a].pq_hidden&&(a=d.getRootCell(m,b).rowIndxPage),!l&&c&&(b+=g&&g.colspan?g.colspan-1:0);b=c?b+1:b-1;if(c&&b>=z||!c&&0>b){if(a==w)return null;a=this[c?"_incrRowIndx":"_decrRowIndx"](a);b=c?0:z-1}l=x[b]}while(l&&l.hidden);return{rowIndxPage:a,colIndx:b}};g._incrEditIndx=function(a,b,c){var g=this.that,d=g.colModel,
k=d.length,m=g.iMerge,f,l=g.rowIndxOffset,q=g[c?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var n=a+l;if(f=m.ismergedCell(n,b)){if(n=m.getData(n,b,"proxy_edit_cell"))n=n.rowIndx,a=n-l;b=c?b+f.colspan:b-1}else b=c?b+1:b-1;if(c&&b>=k||!c&&0>b){if(a==q)return null;do if(a=this[c?"_incrRowIndx":"_decrRowIndx"](a),b=g.isEditableRow({rowIndxPage:a}),a==q&&!1==b)return null;while(!1==b);b=c?0:k-1}n=a+l;if(f=m.ismergedCell(n,b))a=m.getRootCell(n,b,"o"),m.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:n,
colIndx:b}}),n=a.rowIndx,b=a.colIndx;f=d[b];var w=g.isEditableCell({rowIndx:n,colIndx:b,checkVisible:!0}),x=f.editor,x="function"==typeof x?x.call(g,g.normalize({rowIndx:n,colIndx:b})):x;a=n-l}while(f&&(f.hidden||!1==w||!1===x));return{rowIndxPage:a,colIndx:b}};g.getMergeCell=function(a,b){var c=this.that,g=c.options,d=c.iMerge,k,m;d.ismergedCell(a,b)&&(m=d.getRootCell(a,b,"o"),d.setData(m.rowIndx,m.colIndx,{proxy_cell:{rowIndx:a,colIndx:b}}),g.virtualY&&(k=d.getRootCell(a,b,"a")));k||(a=this.getVisibleRowIndx(a),
b=this.getVisibleColIndx(b),k=c.normalize({rowIndx:a,colIndx:b}));return k};g.getVisibleRowIndx=function(a){for(var b=this.that,c=b.pdata.length,g=a-b.rowIndxOffset,d=b.getRowData({rowIndx:a});d.pq_hidden&&g<c-1;)g++,a++,d=b.getRowData({rowIndx:a});return a};g.getVisibleColIndx=function(a){for(var b=this.that.colModel,c=b.length,g=b[a];g.hidden&&a<c-1;)a++,g=b[a];return a};d._onKeyPressDown=function(a){if(0<l(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};g._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var c=this.that,g=a.rowIndxPage,d=a.colIndx;c._blurEditMode=!0;if(!1===c.saveEditCell({evt:b})||!c.pdata)return c.pdata||c.quitEditMode(b),c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;c.quitEditMode(b);if(a.incr)var k=this[a.edit?"_incrEditIndx":"_incrIndx"](g,d,!b.shiftKey),g=k?k.rowIndxPage:
g,d=k?k.colIndx:d;c.scrollRow({rowIndxPage:g});c.scrollColumn({colIndx:d});this.select({rowIndx:g+c.rowIndxOffset,colIndx:d,evt:b});a.edit&&c._editCell({rowIndxPage:g,colIndx:d});c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};g._keyPressInEdit=function(a,b){var c=this.that,g=c.options.editModel.indices,d=(b||{}).FK,k=g.column,m=l.ui.keyCode,f="BACKSPACE LEFT RIGHT UP DOWN DELETE HOME END".split(" ").map(function(a){return m[a]}),k=k.dataType;return 0<=l.inArray(a.keyCode,
f)?!0:!1===c._trigger("editorKeyPress",a,l.extend({},g))||d&&("float"==k||"integer"==k)&&(c="float"==k?"0123456789.-":"0123456789-",(g=String.fromCharCode(a.charCode||a.keyCode))&&-1==c.indexOf(g))?!1:!0};g.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=l.inArray(a,["input","textarea","select"])&&(b="val");return b};g._keyUpInEdit=function(a,b){var c=this.that,g=c.options;b=b?b:{};var d=b.FK,g=g.editModel,k=g.indices;c._trigger("editorKeyUp",a,l.extend({},k));c=k.column.dataType;
if(d&&("float"==c||"integer"==c)){var d=l(a.target),k="integer"==c?g.reInt:g.reFloat,g=this.getValText(d),m=d.data("oldVal"),f=d[g]();if(!1==k.test(f))if(k.test(m))d[g](m);else if(c="float"==c?parseFloat(m):parseInt(m),isNaN(c))d[g](0);else d[g](c)}};g._keyDownInEdit=function(a){var b=this.that,c=b.options,g=c.editModel.indices;if(g){var d=l(a.target),k=l.ui.keyCode,m=c.editModel,f=l.extend({},g),g=f.rowIndxPage,c=f.colIndx,t=f.column.editModel,m=t?l.extend({},m,t):m,t=this.getValText(d);d.data("oldVal",
d[t]());if(!1==b._trigger("editorKeyDown",a,f))return!1;if(a.keyCode==k.TAB||a.keyCode==m.saveKey)return b=a.keyCode==k.TAB?m.onTab:m.onSave,f={rowIndxPage:g,colIndx:c,incr:b?!0:!1,edit:"nextEdit"==b},this._saveAndMove(f,a);if(a.keyCode==k.ESCAPE)return b.quitEditMode({evt:a}),b.focus({rowIndxPage:g,colIndx:c}),a.preventDefault(),!1;if(a.keyCode==k.PAGE_UP||a.keyCode==k.PAGE_DOWN)return a.preventDefault(),!1;if(m.keyUpDown&&!a.altKey){if(a.keyCode==k.DOWN)return f=this._incrRowIndx2(g,c),this._saveAndMove(f,
a);if(a.keyCode==k.UP)return f=this._decrRowIndx2(g,c),this._saveAndMove(f,a)}}};g.select=function(a){var b=this.that,c=this,g=a.rowIndx,d=a.colIndx,k=a.evt;a=this.getMergeCell(g,d);var g=a.rowIndx,d=a.colIndx,m=a.rowIndxPage;a=b.options;var f=b.iSelection,t=a.selectionModel,n=t.type,u="row"==n,w="cell"==n;(a.realFocus?function(a){clearTimeout(c.timeoutID);c.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){b.scrollCell({rowIndx:g,colIndx:d});var a=f.address();if(k.shiftKey&&k.keyCode!==
l.ui.keyCode.TAB&&t.type&&"single"!=t.mode&&a.length){var e=a[a.length-1],c=e.firstR,y=e.firstC,n=e.type,q=!1;"column"==n?(e.c1=y,e.c2=d,e.r1=e.r2=e.type=void 0):"row"==n?(e.r1=c,e.r2=g,e.c1=e.c2=e.type=void 0):(a={r1:c,r2:g,c1:y,c2:d,firstR:c,firstC:y},q=!0);b.range(a,q).select()}else u?b.range({r1:g,firstR:g},!1).select():w&&b.range({r1:g,c1:d,firstR:g,firstC:d}).select();b.focus({rowIndxPage:m,colIndx:d})})};g._bodyKeyPressDown=function(a){var b=this.that,c=b.rowIndxOffset,g,d,k;k=this.options;
var m=b.iMerge,f=b._focusElement,t=k.selectionModel,n=k.editModel,u=a.ctrlKey||a.metaKey,w=l.ui.keyCode,x=a.keyCode;if(n.indices)b.$div_focus.find(".pq-cell-focus").focus();else{if(f){if(k=document.activeElement,"pq-grid-cont"!=k.className&&"TD"!=k.nodeName.toUpperCase()&&"pq-grid-excel"!=k.id)return}else{f=l(a.target);if(!f.hasClass("pq-grid-cell"))return;f=b.getCellIndices({$td:f})}var z=b.normalize(f);d=z.rowIndxPage;g=z.rowIndx;k=z.colIndx;var A=b.pdata,B=z,f=!0;if(null!=g&&null!=k&&null!=z.rowData){m.ismergedCell(g,
k)&&(z=B=m.getRootCell(g,k,"o"),d=z.rowIndxPage,g=z.rowIndx,k=z.colIndx,x==w.PAGE_UP||x==w.PAGE_DOWN||x==w.SPACE||x==w.HOME||x==w.END)&&(m=m.getData(g,k,"proxy_cell"))&&(m=m.rowIndx-c,A[m].pq_hidden||(d=m,g=d+c));if(!1==b._trigger("cellKeyDown",a,B))return!1;if(x==w.LEFT||x==w.RIGHT||x==w.UP||x==w.DOWN||t.onTab&&x==w.TAB)b=null,x==w.LEFT||x==w.TAB&&a.shiftKey?b=this._incrIndx(d,k,!1):x==w.RIGHT||x==w.TAB&&!a.shiftKey?b=this._incrIndx(d,k,!0):x==w.UP?b=this._decrRowIndx2(d,k):x==w.DOWN&&(b=this._incrRowIndx2(d,
k)),b&&(g=b.rowIndxPage+c,this.select({rowIndx:g,colIndx:b.colIndx,evt:a}));else if(x==w.PAGE_DOWN||x==w.SPACE||x==w.PAGE_UP){if(b=this[x==w.PAGE_UP?"pageUp":"pageDown"](d))d=b.rowIndxPage,null!=d&&this.select({rowIndx:d+c,colIndx:k,evt:a})}else x==w.HOME?(u?g=b.getFirstVisibleRIP()+c:k=b.getFirstVisibleCI(),this.select({rowIndx:g,colIndx:k,evt:a})):x==w.END?(u?g=b.getLastVisibleRIP()+c:k=b.getLastVisibleCI(),this.select({rowIndx:g,colIndx:k,evt:a})):x==w.ENTER?(d=B.rowIndxPage,k=B.colIndx,(t=b.getCell({rowIndxPage:d,
colIndx:k}))&&0<t.length&&(g=d+c,c=b.isEditableRow({rowIndx:g}),w=b.isEditableCell({rowIndx:g,colIndx:k}),c&&w?b.editCell({rowIndxPage:d,colIndx:k}):(b=t.find("button"),b.length&&l(b[0]).click()))):u&&"65"==x?(b=b.iSelection,"row"==t.type&&"single"!=t.mode?b.selectAll({type:"row",all:t.all}):"cell"==t.type&&"single"!=t.mode&&b.selectAll({type:"cell",all:t.all})):n.pressToEdit&&(32<=x&&127>=x||189==x)&&!u?46==x?b.clear():(d=B.rowIndxPage,k=B.colIndx,(t=b.getCell({rowIndxPage:d,colIndx:k}))&&0<t.length&&
(g=d+c,c=b.isEditableRow({rowIndx:g}),w=b.isEditableCell({rowIndx:g,colIndx:k}),c&&w&&b.editCell({rowIndxPage:d,colIndx:k,select:!0})),f=!1):f=!1;f&&a.preventDefault()}}};g.incrPageSize=function(){for(var a=this.that,b=a.$tbl,c=b.children("tbody").children(".pq-grid-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,g=c.length-1;0<=g;g--){var d=c[g];if(d.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:l(d)}).rowIndxPage}};g.pageNonVirtual=function(a,b){var c=this.that,g=c.$cont[0].offsetHeight-
c._getSBHeight(),d=c.getRow({rowIndxPage:a}),k=0,m=0,f=l(d[0])[b]("tr.pq-grid-row"),n=f.length;if(0<n){do{d=f[m];k+=d.offsetHeight;if(k>=g)break;m++}while(m<n);m=0<m?m-1:m;do if(d=l(f[m]),a=c.getRowIndx({$tr:d}).rowIndxPage,null!=a)break;else m--;while(0<=m)}return a};g.pageDown=function(a){var b=this.that,c=b.options,g=b.vscroll,d=g.option("cur_pos"),k=g.option("num_eles"),m=g.option("ratio");if(c.virtualY){if(d<k-1){a=this.incrPageSize().rowIndxPage;var f=b._calcCurPosFromRowIndxPage(a);if(null==
f)return;g.option("cur_pos",f);g.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>m&&(c=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*c),b.syncScrollBarVert());return{rowIndxPage:a,curPos:f}};g.pageUp=function(a){var b=this.that,c=b.vscroll;if(b.options.virtualY){if(0<c.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var g=b._calcCurPosFromRowIndxPage(a);if(null==g)return;c.option("cur_pos",g);c.scroll()}}else c=c.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<c&&(c=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(c),b.syncScrollBarVert());return{rowIndxPage:a,curPos:g}};g.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children(".pq-grid-row"),c=a.options.freezeRows,g=a.pdata,d,k=0;if(b.length){var m;c?(m=b.filter("tr.pq-last-frozen-row"),m.length&&(m=m.next())):2<=b.length&&(m=l(b[1]));if(m&&m.length)for(d=k=a.getRowIndx({$tr:m}).rowIndxPage,b=0,a=a.pageSize-3;0<=k&&(g[k].pq_hidden||(b++,d=k,!(b>=a)));k--);}return{rowIndxPage:d}};
d._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,c=0;c<b;c++)this.colModel[c].hidden&&a++;return a};d._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var c=this.options.freezeCols;c<a;c++)this.colModel[c].hidden&&b++;return b};d._getSBHeight=function(){return this.iRefresh.getSBHeight()};d._getSBWidth=function(){return this.iRefresh.getSBWidth()};d.getFirstVisibleRIP=function(a){var b=this.pdata;a=a?this.initV:0;for(var c=b.length;a<c;a++)if(!b[a].pq_hidden)return a};
d.getLastVisibleRIP=function(){for(var a=this.pdata,b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};d.getFirstVisibleCI=function(a){var b=this.colModel,c=b.length;for(a=a?this.initH:0;a<c;a++)if(!b[a].hidden)return a;return null};d.getLastVisibleCI=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};d.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,c=0,g=0;g<b;g++)a[g].hidden||c++;return c};d._calcCurPosFromRowIndxPage=
function(a){var b=this.pdata,c=this.options.freezeRows;if(a<c)return 0;for(var g=0,d=c,k=b.length;c<k;c++){var m=b[c];if(d==a)break;d++;m.pq_hidden||g++}return g>=k?null:g};d._calcCurPosFromColIndx=function(a){var b=this.colModel,c=this.options.freezeCols;if(a<c)return 0;for(var g=0,d=c,k=b.length;c<k;c++){var m=b[c];if(d==a)break;d++;m.hidden||g++}return g>=k?null:g};d.calcWidthCols=function(a,b,c){var g=0,d=this.options.numberCell,k=this.colModel;-1==a&&(d.show&&(g=c?g+1*d.width:g+d.outerWidth),
a=0);if(c)for(;a<b;a++){if((c=k[a])&&!c.hidden){if(!c._width)throw"assert failed";g+=c._width+0}}else for(;a<b;a++)(c=k[a])&&!c.hidden&&(g+=c.outerWidth);return g};d.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=l(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};d._calcRightEdgeCol=function(a){var b=0,c=0,g=this.colModel,d=this.initH,k=this.options,m=k.freezeCols,k=k.numberCell;k.show&&(b+=k.outerWidth,c++);for(k=0;k<=a;k++){k<d&&
k>=m&&(k=d);var f=g[k];f.hidden||(b+=f.outerWidth,c++)}return{width:b,cols:c}};d._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};d.createTable=function(a){a.other=!0;var b=this.iGenerateView;b.generateView(a);b.scrollView()}})(jQuery);
(function(l){function n(a){this.that=a}function f(a,b,c){for(var d=0;b<c;b++)!0!==a[b].hidden&&d++;return d}function d(a,b,c){for(var d,e;c;){d=a[c][b];e=a[c-1][b];if(d!=e)break;c--}return c}var c=l.paramquery,b=c._pqGrid.prototype;b.getHeadCell=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");var c,d,e,h;null!=b&&null!=a&&(b*=1,a*=1,d=this.headerCells[a][b])&&(h=d.colModel,e=d.leftPos);h&&h.length&&(c=!0);return{col:d,ci:b,o_ci:e,ri:a,isParent:c}};b.flex=function(a){this.iResizeColumns.flex(a)};
c.cHeader=n;b=n.prototype;b.createHeader=function(){var a=this.that,b=this,c=a.options,d=c.bootstrap,e=(d.on?d.thead:"")+" pq-grid-header-table ",h=c.ui,y=d.on?"":h.header,f=c.hwrap,d=a.pqpanes,v=parseInt(c.freezeCols),p=c.numberCell,h=a.colModel,s=c.sortModel,r=a.depth,n=c.virtualX,q=a.iGenerateView.colDef,u=a.initH,w=a.finalH,x=a.headerCells,z=a.$header_o;z.empty();if(null!=w)if(!1===c.showHeader)z.css("display","none");else{z.css("display","");c=["<table class='"+(f?e+"pq-wrap ":e+"pq-no-wrap ")+
"' >"];if(1<=r){c.push("<tr class='pq-row-hidden'>");p.show&&c.push("<td style='width:"+p.width+"px;' ></td>");for(var f=0,A=q.length;f<A;f++){var B=q[f],e=B.colIndx;c.push("<td style='width:"+B.column.outerWidth+"px;' pq-col-indx="+e+"></td>")}c.push("</tr>")}for(q=0;q<r;q++){c.push("<tr class='pq-grid-title-row'>");0==q&&p.show&&c.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",r,"'><div class='pq-td-div'>",p.title?p.title:"&nbsp;","</div></th>"].join(""));for(e=0;e<=w;e++){if(e<
u&&e>=v&&n&&(e=u,e>w))throw"initH>finalH";b.createHeaderCell(q,e,x,c,"pq-grid-col ",v,u,r,s)}c.push("</tr>")}a.ovCreateHeader(c,"pq-grid-col ");c.push("</table>");v=c.join("");z[0].innerHTML=d.vH?["<span class='pq-grid-header pq-grid-header-left ",y,"'><div class='pq-grid-header-inner'>",v,"</div></span><span class='pq-grid-header ",y,"'><div class='pq-grid-header-inner'>",v,"</div></span>"].join(""):["<span class='pq-grid-header ",y,"'><div class='pq-grid-header-inner'>",v,"</div></span>"].join("");
y=a.$header=z.children(".pq-grid-header");z=y.children(".pq-grid-header-inner");a.$tbl_header=z.children("table");a.$header_left=l(y[0]);a.$header_left_inner=l(z[0]);d.vH&&(a.$header_right=l(y[1]),a.$header_right_inner=l(z[1]));y.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(u,w,h);a._trigger("refreshHeader",null,null)}};b._onHeaderClick=function(a){var b=this.that,c;c=b.iDragColumns;if(!c||"stop"==c.status){c=l(a.target);if(c.is("input,label"))return!0;c=c.closest(".pq-grid-col");
if(c.length&&(c=b.getHeadCell(c),(b=c.col)&&!c.isParent))return this._onHeaderCellClick(b,c.ci,a)}};b.createHeaderCell=function(a,b,d,m,e,h,y,C,l){var p=this.that,s=p.options.sheet,r=d[a][b],n=p.colModel,q=r.colSpan;if(!(r.hidden||0===q||0<a&&r==d[a-1][b])){if(0<b&&r==d[a][b-1]){if(b>y)return;a:{d=d[a];for(var u=0;u<d.length;u++)if(d[u]==r){d=u;break a}d=void 0}if(d<h)return;q-=f(n,d,b)}else h&&b<h&&b+q>h&&(q-=f(n,h,y),n=f(n,b,h),q=Math.max(q,n));n=r.halign||r.align;d=r.cls;e=[e];var u=r.title,w=
r.type,u="function"==typeof u?u.call(p,{column:r,colIndx:b,dataIndx:r.dataIndx}):u,u=s?c.toLetter(b):u,u=null!=u?u:"checkbox"==w&&r.cb.header?"<input type='checkbox'/>":r.dataIndx;r.pqtitle=u;n&&e.push("pq-align-"+n);b==h-1&&1==C&&e.push("pq-last-frozen-col");b<=h-1?e.push("pq-left-col"):b>=y&&e.push("pq-right-col");d&&e.push(d);null!=r.colModel&&0!=r.colModel.length||e.push("pq-grid-col-leaf");h=l.space?"pq-space":"";m.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",e.join(" "),"' rowspan=",
r.rowSpan," colspan=",q,"><div class='pq-td-div'>",u,"<span class='pq-col-sort-icon ",h,"'></span>",l.number?"<span class='pq-col-sort-count "+h+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b,c){var d=this.that,e=d.options,h=e.sortModel,y=a.dataIndx;!1!==d._trigger("headerCellClick",c,{column:a,colIndx:b,dataIndx:y})&&(e.selectionModel.column&&-1==c.target.className.indexOf("pq-td-div")?(e={c1:b,firstC:b},a=d.iSelection.address(),c.shiftKey&&((c=a.length)&&"column"==a[c-
1].type&&(c=a[c-1],c.c1=c.firstC,c.c2=b,c.r1=c.r2=c.type=void 0),e=a),d.range(e,!1).select(),d.focus({rowIndxPage:d.getFirstVisibleRIP(!0),colIndx:b})):h.on&&!1!=a.sortable&&d.sort({sorter:[{dataIndx:y}],addon:!0,tempMultiple:h.multiKey&&c[h.multiKey],evt:c}))};b._refreshResizeColumn=function(a,b,c){a=this.that;c=a.options;b=c.filterModel.ficon?!0:!1;var d=c.numberCell;c=parseInt(c.freezeCols);var e=[],h=[],y=a.pqpanes.vH,f=0,l=0;d.show&&(f=d.outerWidth,d.resizable&&e.push("<div pq-col-indx='-1' style='left:",
f-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var d=a.iGenerateView.colDef,p=0,s=d.length;p<s;p++){var l=d[p],r=l.colIndx,l=l.column,n=l.ficon,q=n||null==n&&b,n=e,f=f+l.outerWidth;if(!1!==l.resizable||q)y&&r>=c&&(n=h),l=f-5,n.push("<div pq-col-indx='",r,"' style='left:",l,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}h.length&&a.$header_right_inner.append(h.join(""));a.$header_left_inner.append(e.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,
c=b.bootstrap,b=b.ui,d=a.$header;if(d){var e=a.iSort.getSorter(),h=e.length,y=!1;a.options.sortModel.number&&1<h&&(y=!0);for(var f=0;f<h;f++){var l=e[f],p=a.getColIndx({dataIndx:l.dataIndx}),s=l.dir,l=c.on?c.header_active:b.header_active+" pq-col-sort-"+("up"==s?"asc":"desc"),s=c.on?" glyphicon glyphicon-arrow-"+s:"ui-icon ui-icon-triangle-1-"+("up"==s?"n":"s"),p=d.find(".pq-grid-col-leaf[pq-col-indx="+p+"]");p.addClass(l);p.find(".pq-col-sort-icon").addClass(s);y&&p.find(".pq-col-sort-count").html(f+
1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var c=l(a.target);b.setDraggables(a);a.pq_composed=!0;a=l.Event("mousedown",a);c.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var c=a.options.flex;if(c.on&&c.one)a.one("ready",function(){b.flex()})};c.cResizeColumns=b;b=b.prototype=new c.cClass;b.doubleClick=function(a){var b=this.that.options,c=b.flex;a=l(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||c.on&&
this.flex(c.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b._initFlexTable=function(a,b){if(a.length){var c=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden"),d,e=c.children("td").css("width","");if(b){var h=0,y=[],f,v=[];c.next().children("td").each(function(a,b){f=1*b.getAttribute("colspan");if(1<f&&(h+=f-1,y[h]=b.offsetWidth,d=e[h],!d||!d.offsetWidth))for(var c=h-(f-1);c<h;c++)v[c]=!0;h++})}}return[e||l(),v||[],y]};b.flex=
function(a){a=a||{};var b=this.that,c=b.element,d=b.options.numberCell,e=a.colIndx,h,y=a.dataIndx;a=null==a.refresh?!0:a.refresh;var f=!1,v=b.$tbl,p=b.$tbl_header,s=v&&v.length?l(v[0]).clone():l(),r=b.tables&&b.tables.length?b.tables[0].$tbl:null,r=r?l(r[0]).clone():l(),n=p&&p.length?l(p[0]).clone():l();s.find(".pq-merge-cell").each(function(a,b){b.innerHTML=l(b).find(".pq-merge-inner")[0].innerHTML;b.style.whiteSpace="noWrap"});if(null!=y)for(e=[],p=0,v=y.length;p<v;p++){var q=b.colIndxs[y[p]];null!=
q&&e.push(q)}null!=e&&(e.sort(function(a,b){return a-b}),h=e.length);n.find("tr.pq-grid-header-search-row").remove();y=l("<div class='pq-grid'>").append(n).append(r).append(s);y.addClass(c.attr("class"));c.parent().append(y);for(var p=this._initFlexTable(s,!0),c=p[0],s=p[1],q=p[2],u=0,r=this._initFlexTable(r)[0],n=this._initFlexTable(n)[0],d=d.show?0:-1,w=b.iGenerateView.colDef,p=0,v=w.length;p<v;p++){var x=w[p],z=x.colIndx,x=x.column;d++;if(e)if(e.length)if(e[0]===z)e.splice(0,1);else continue;else break;
var A=c[d],B=n[d],E=r[d],z=s[d],A=A?A.offsetWidth:0,E=E?E.offsetWidth:0,B=B?B.offsetWidth:0;z?A=0:u&&(A=q[d]-u,u=0);B=Math.max(A,E,B)-0+1;z&&(u+=B);x._width!==B&&(f=!0,x.width=B,1===h&&(x._resized=!0))}y.remove();f&&a&&b.refresh({source:"flex",colModel:!0})};b.setDraggables=function(a){var b=this,c,d,e;l(a.target).draggable({axis:"x",helper:function(a,c){var e=l(a.target),d=parseInt(e.attr("pq-col-indx"));b._setDragLimits(d);b._getDragHelper(a,c);return e},start:function(a,d){c=d.position.left;e=
parseInt(b.$cl[0].style.left)},drag:function(a,y){d=y.position.left;b.$cl[0].style.left=e+(d-c)+"px"},stop:function(a,e){return b.resizeStop(a,e,c)}})};b._getDragHelper=function(a){var b=this.that,c=parseInt(b.options.freezeCols);a=l(a.target);var d=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var e=d.outerHeight();this.$cl=l("<div class='pq-grid-drag-bar'></div>").appendTo(d);this.$clleft=l("<div class='pq-grid-drag-bar'></div>").appendTo(d);this.$cl.height(e);this.$clleft.height(e);d=l("[pq-col-indx="+
a+"]",b.$header)[0];e=d.offsetLeft;b.pqpanes.vH?a>=c&&(e-=b.$header[1].scrollLeft):(e+=b.$header[0].offsetLeft,e-=b.$header[0].scrollLeft);this.$clleft.css({left:e});e+=d.offsetWidth;this.$cl.css({left:e})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,c=b.colModel[a],d=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(d=b.$header_right);b=d.find("th[pq-col-indx='"+a+"']").offset().left+c._minWidth;c=b+c._maxWidth-c._minWidth;d.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option",
"containment",[b,0,c,0])}};b.resizeStop=function(a,b,c){var d=this.that,e=d.colModel,h=d.options.numberCell;this.$clleft.remove();this.$cl.remove();c=b.position.left-c;b=l(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var e=null,y=parseInt(h.width);h.width=y+c}else e=e[b],y=parseInt(e.width),e.width=y+c,e._resized=!0;d.refresh();d._trigger("columnResize",a,{colIndx:b,column:e,dataIndx:e?e.dataIndx:null,oldWidth:y,newWidth:e?e.width:h.width})};b=function(a){this.that=a;this.$drag_helper=null;
var b=a.options.dragColumns,c=b.topIcon,d=b.bottomIcon;this.status="stop";this.$arrowTop=l("<div class='pq-arrow-down ui-icon "+c+"'></div>").appendTo(a.element);this.$arrowBottom=l("<div class='pq-arrow-up ui-icon "+d+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};c.cDragColumns=b;b=b.prototype;b.onColMouseDown=function(a,b){return function(c){var d,e,h;d=l(this);c.pq_composed||l(c.target).is("input,select,textarea")||
(d=b.getHeadCell(d),h=(e=d.col)?e.parent:null,!e||e.nodrag||e._nodrag||h&&1==h.colSpan||!a.setDraggable(c,e,d)||(c.pq_composed=!0,d=l.Event("mousedown",c),l(c.target).trigger(d)))}};b.showFeedback=function(a,b){var c=this.that,d=a[0],e=c.$grid_center[0].offsetTop,h=d.offsetLeft-d.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:d.offsetWidth)-8,c=e+c.$header[0].offsetHeight;this.$arrowTop.css({left:h,top:e+d.offsetTop-16,display:""});this.$arrowBottom.css({left:h,top:c,display:""})};b.showArrows=
function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};b.updateDragHelper=function(a){var b=this.that.options.dragColumns,c=b.acceptIcon,b=b.rejectIcon,d=this.$drag_helper;d&&(a?(d.children("span.pq-drag-icon").addClass(c).removeClass(b),d.removeClass("ui-state-error")):(d.children("span.pq-drag-icon").removeClass(c).addClass(b),d.addClass("ui-state-error")))};b.setDraggable=function(a,b,c){a=l(a.currentTarget);var d=this,
e=d.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:e.element,revert:"invalid",helper:d.dragHelper(d,e,b),start:d.onStart(d,e,b,c),drag:d.onDrag(d,e),stop:function(){e.element&&(d.status="stop",e.$header.find(".pq-grid-col-resize-handle").show(),d.hideArrows())}}),!0};b.onStart=function(a,b,c,d){return function(e){if(!1===b._trigger("columnDrag",e.originalEvent,{column:c}))return!1;a.setDroppables(d)}};b.onDrag=function(a,b){return function(c,
d){a.status="drag";var e=l(".pq-drop-hover",b.$header);if(0<e.length){a.showArrows();a.updateDragHelper(!0);var h=e.width();c.clientX-e.offset().left+l(document).scrollLeft()<h/2?(a.leftDrop=!0,a.showFeedback(e,!0)):(a.leftDrop=!1,a.showFeedback(e,!1))}else a.hideArrows(),l(".pq-drop-hover",b.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};b.dragHelper=function(a,b,c){var d=b.options.dragColumns.rejectIcon;return function(){a.status="helper";b.$header.find(".pq-grid-col-resize-handle").hide();
var e=l("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+d+" glyphicon glyphicon-remove'></span>"+c.pqtitle+"</div>");a.$drag_helper=e;return e[0]}};b._columnIndexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return c;return-1};b.setDroppables=function(a){var b=this.that,c=a.col,d=a.ri;a=a.o_ci;var e=a+c.o_colspan,h,y,f,v,p;y=b.$header_left;var n,r={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",
tolerance:"pointer",drop:this.onDrop()},t=y.find(".pq-left-col");y=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):y.find(".pq-right-col");t=t.add(y);for(n=t.length;n--;)v=l(t[n]),p=v.hasClass("ui-droppable"),h=b.getHeadCell(v),f=h.col,y=h.ri,h=h.ci,f==c||f.nodrop||f._nodrop||d<y&&h>=a&&h<e?p&&v.droppable("destroy"):p||v.droppable(r)};b.onDrop=function(){var a=this,b=this.that;return function(c,d){if(!a.dropPending){var e=1*d.draggable.attr("pq-col-indx"),h=1*d.draggable.attr("pq-row-indx"),
y=l(this),f=1*y.attr("pq-col-indx"),y=1*y.attr("pq-row-indx"),v=a.moveColumn(e,f,a.leftDrop,h,y);a.dropPending=!0;window.setTimeout(function(){b.iColModel.init();!1!==b._trigger("columnOrder",null,{dataIndx:v.dataIndx,column:v,oldcolIndx:e,colIndx:b.getColIndx({column:v})})&&b.refresh();a.dropPending=!1},0)}}};b.moveColumn=function(a,b,c,m,e){var h=this.that,y=h.options.colModel,f=h.headerCells,h=h.depth-1;m=null==m?d(f,a,h):m;e=null==e?d(f,b,h):e;var h=f[e][b],l=m?f[m-1][a].colModel:y;b=e?f[e-1][b].colModel:
y;a=this._columnIndexOf(l,f[m][a]);c=c?1:0;a=l.splice(a,1)[0];c=this._columnIndexOf(b,h)+1-c;b.splice(c,0,a);return a}})(jQuery);
(function(l){function n(d,c){this.that=d;var b=this,a=d.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;d.on("cellClick",function(a,c){return b.toggle(a,c)}).on("cellKeyDown",function(a,c){if(a.keyCode==l.ui.keyCode.ENTER)return b.toggle(a,c)}).on("refresh",function(a,c){return b.aftertable()}).on("beforeTableView",function(a,c){return b.beforeTableView(a,c)}).on("tableWidthChange",function(a,c){return b.tableWidthChange(a,c)});c._render=function(b){var c=a.detailModel,d=b.cellData;
b=b.rowData;if(!b.pq_gsummary&&!b.pq_gtitle)return c=d&&d.show?c.expandIcon:c.collapseIcon,"<div class='ui-icon "+c+"'></div>"}}l.paramquery.cHierarchy=n;var f=n.prototype=new l.paramquery.cClass;f.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var d=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),c=0,b=d.length;c<b;c++)for(var a=l(d[c]).find(".pq-grid"),g=0,k=a.length;g<k;g++){var m=l(a[g]);m.is(":visible")&&m.pqGrid("onWindowResize")}this.refreshComplete=
!0}};f.aftertable=function(d){var c=this.that,b=c.options.detailModel.init,a=c.pdata;if(this.refreshComplete){this.refreshComplete=!1;d=d?d:c.$tbl.children("tbody").children("tr.pq-detail-child");for(var g=0,k=d.length;g<k;g++){var m=l(d[g]),e=m.attr("pq-row-indx"),h=a[e],e=!1,f=h.pq_detail.child;f||"function"!=typeof b||(e=!0,f=b.call(c.element[0],{rowData:h}),h.pq_detail.child=f,h.pq_detail.height=25);m=m.children("td.pq-detail-child");m.append(f);m=m.find(".pq-grid");f=0;for(h=m.length;f<h;f++){var C=
l(m[f]);e?C.hasClass("pq-pending-refresh")&&C.is(":visible")&&(C.removeClass("pq-pending-refresh"),C.pqGrid("refresh")):C.is(":visible")&&C.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};f.beforeTableView=function(d,c){this.detachView||(this.detachInitView(),this.detachView=!0)};f.detachInitView=function(d){var c=this.that.$tbl;if(c&&c.length)for(d=d?d:c.children("tbody").children("tr.pq-detail-child"),c=0;c<d.length;c++)l(d[c]).children("td.pq-detail-child").children().detach()};
f.toggle=function(d,c){var b=this.that,a=c.column,g=c.rowData,k=c.rowIndx,m=this.type;g.pq_gtitle||g.pq_gsummary||!a||a.type!==m||(a={rowIndx:k,focus:!0},null==g.pq_detail?b.rowExpand(a):!1===g.pq_detail.show?b.rowExpand(a):this.rowCollapse(a))};f.rowExpand=function(d){this.normalize(d);var c=this.that,b=d.rowData,a=d.rowIndx,g=d.rowIndxPage,k=c.options.detailModel;if(null!=b){if(!1===c._trigger("beforeRowExpand",null,d))return!1;null==b.pq_detail?b.pq_detail={show:!0}:!1===b.pq_detail.show&&(b.pq_detail.show=
!0);k.cache||this.rowInvalidate(d);c.refreshRow({rowIndx:a});k=[];c.iGenerateView._generateDetailRow(b,g,k);b=c.getRow({rowIndxPage:g});b.after(k.join(""));this.aftertable(b.next());d.focus&&c.getCell({rowIndx:a,dataIndx:"pq_detail"}).attr("tabindex","0").focus();d.scrollRow&&this.scrollRow({rowIndx:a})}};f.rowInvalidate=function(d){d=this.that.getRowData(d);var c=d.pq_detail;if(c=c?c.child:null)c.remove(),d.pq_detail.child=null,d.pq_detail.height=0};f.normalize=function(d){var c=this.that,b=d.rowIndx,
a=d.rowIndxPage,g=c.rowIndxOffset;d.rowIndx=null==b?a+g:b;d.rowIndxPage=null==a?b-g:a;d.rowData=c.getRowData(d)};f.rowCollapse=function(d){this.normalize(d);var c=this.that,b=c.options,a=d.rowData,g=d.rowIndx,k=d.rowIndxPage,m=b.detailModel;null!=a&&null!=a.pq_detail&&!0===a.pq_detail.show&&(m.cache||this.rowInvalidate(d),a.pq_detail.show=!1,b.virtualY?c.refresh():(b=c.getRow({rowIndxPage:k}).next("tr.pq-detail-child"),b.length&&(this.detachInitView(b),b.remove(),c.refreshRow({rowIndx:g})),d.focus&&
c.getCell({rowIndx:g,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),d.scrollRow&&(g=d.rowIndx,this.scrollRow({rowIndx:g})))}})(jQuery);
(function(l){var n=function(f){var d=this;d.that=f;f.on("dataReadyDone",function(){d.calcVisibleV()}).on("CMInit",function(){d.calcVisibleH()}).on("refresh",function(){d.summaryTable()})};l.paramquery.cRefresh=n;n=n.prototype;n._computeOuterWidths=function(){for(var f=this.that,d=f.options.numberCell,f=f.colModel,c=f.length,b=0;b<c;b++){var a=f[b];a.outerWidth=a._width+0}d.show&&(d.outerWidth=d.width)};n.autoFit=function(){var f=this.that,d=f.colModel,c=d.length,f=f.calcWidthCols(-1,c,!0),b=this.contWd-
this.getSBWidth();if(f!==b){for(var f=f-b,a,b=[],g=0;g<c;g++){var k=d[g],m=k._percent,e=k._resized;k.hidden||m||e||(0>f?(m=k._maxWidth-k._width)&&b.push({availWd:-1*m,colIndx:g}):(m=k._width-k._minWidth)&&b.push({availWd:m,colIndx:g}));e&&(a=k,delete k._resized)}b.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});g=0;for(c=b.length;g<c;g++){var k=b[g],m=k.availWd,k=k.colIndx,e=Math.round(f/(c-g)),k=d[k],h;h=k._width;Math.abs(m)>Math.abs(e)?(h-=e,f-=e):(h-=m,f-=m);k.width=
k._width=h}0!=f&&a&&(h=a._width-f,h>a._maxWidth?h=a._maxWidth:h<a._minWidth&&(h=a._minWidth),a.width=a._width=h)}};n.autoLastColumn=function(){var f=this.that,d=f.colModel,c=d.length,b=f.options.freezeCols,a=this.contWd-this.getSBWidth(),g=f.calcWidthCols(-1,b,!0),a=a-g,g=!1,f=f.getLastVisibleCI();if(null!=f&&(f=d[f],!f._percent)){for(var k=f._width,m,e=f._minWidth,h=f._maxWidth,c=c-1;c>=b;c--){var y=d[c];if(!y.hidden&&(y=y._width+0,a-=y,0>a)){g=!0;m=k+a>=e?k+a:k+y+a;break}}g||(m=k+a);m>h?m=h:m<e&&
(m=e);f.width=f._width=m}};n.numericVal=function(f,d){var c;c=-1<(f+"").indexOf("%")?parseInt(f)*d/100:parseInt(f);return Math.round(c)};n.refreshColumnWidths=function(f){f=f||{};var d=this.that,c=d.options,b=c.numberCell,a="flex"===c.width,g=d.colModel,k=c.scrollModel,m=k.lastColumn,k=k.autoFit,e=this.contWd,h=g.length,y=this.getSBWidth(),l=c._minColWidth,v=c._maxColWidth,p=0;b.show&&(b.width<b.minWidth&&(b.width=b.minWidth),p=b.outerWidth=b.width);b=a?null:e-y-p;l=Math.floor(this.numericVal(l,b));
v=Math.ceil(this.numericVal(v,b));e=0;if(!a&&5>b||isNaN(b)){if(c.debug)throw"availWidth N/A";}else{delete d.percentColumn;for(y=0;y<h;y++)if(p=g[y],!p.hidden){var n=p.width,r=-1<(n+"").indexOf("%")?!0:null,t=p.minWidth,q=p.maxWidth,t=t?this.numericVal(t,b):l,q=q?this.numericVal(q,b):v;q<t&&(q=t);if(void 0!=n){var u=0;!a&&r?(d.percentColumn=!0,p.resizable=!1,p._percent=!0,n=this.numericVal(n,b)-0,u=Math.floor(n),e+=n-u,1<=e&&(u+=1,e-=1)):n&&(u=parseInt(n));u<t?u=t:!a&&u>q&&(u=q);p._width=u}else p._width=
t;r||(p.width=p._width);p._minWidth=t;p._maxWidth=a?1E3:q}!1===a&&!1!==f.refreshWidth&&(k&&this.autoFit(),"auto"===m&&c.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};n.estRowsInViewPort=function(){var f=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=f};n._refreshFrozenLine=function(){var f=this.that,d=f.options,c=d.numberCell,b=f.$cont_o,a=d.freezeBorders,g=d.freezeCols,d=d.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
a&&(g&&(a=f.calcWidthCols(-1,g),isNaN(a)||0===a||0<a&&c.show&&a===c.width||(this.$freezeLine=l(["<div class='pqg-vert-frozen-line'  style = 'left:",a-1,"px;' ></div>"].join("")).appendTo(b))),d&&(f=f.$tbl))&&(f=f.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=l("<div class='pqg-horiz-frozen-line' style='top:"+(f.offsetTop+f.offsetHeight-1-1)+"px;' ></div>").appendTo(b))};n.setScrollVNumEles=function(f){var d=this.that;f=d.vscroll;var c=d.options;if(!c.maxHeight&&"flex"===
c.height)return f.option("num_eles",0),0;var c=d.iHierarchy?!0:!1,b=parseInt(f.option("num_eles")),b=parseInt(f.option("cur_pos")),a=this.getEContHt(),g=d.pdata?d.totalVisibleRows:0,k,m=0;d.$tbl&&0<d.$tbl.length&&(k=d.$tbl[d.$tbl.length-1],m=k.scrollHeight,k=l(k));if(0<m){k=k.children().children("tr");for(var e=0,d=0,b=1;b<k.length;b++)if(m=k[b],e+=m.offsetHeight,e>=a){c&&l(m).hasClass("pq-detail-child")&&(d=1<d?d-1:1);break}else c?!1===l(m).hasClass("pq-detail-child")&&d++:d++;b=g-d+1}else b+=1;
b>g&&(b=g);e>a&&c&&b++;f.option("num_eles",b);return b};n._setScrollVLength=function(f){f=this.that;var d=f.options;if("flex"!==d.height||d.maxHeight){var d=this.getSBHeight(),c=this.contHt-d+this.headerHt-2;f.vscroll.widget().css("bottom",d);f.vscroll.option("length",c)}};n.setHeaderHeight=function(){var f=this.that,d=f.$header,c,b,a;if(d&&d.length){if(1<d.length){if(c=d[0].scrollHeight,b=d[1].scrollHeight,a=Math.max(c,b),c!==b){var g=l(d[0]).find(".pq-grid-header-search-row"),k=l(d[1]).find(".pq-grid-header-search-row");
g.length&&(g.css("height",""),k.css("height",""),c=d[0].scrollHeight,b=d[1].scrollHeight,a=Math.max(c,b),c<a?g.height(k[0].scrollHeight):k.height(g[0].scrollHeight))}}else a=c=d[0].scrollHeight;f.$header_o.height(a-3);this.headerHt=a-1}else f.$header_o.height(0),this.headerHt=0};n.initContHeight=function(){var f=this.that,d=f.options;if("flex"!=d.height||d.maxHeight)this.contHt=this.height-(d.showHeader?this.rowHt:0)-(d.showTop?f.$top[0].offsetHeight:0)-(d.showBottom?f.$bottom[0].offsetHeight:0)};
n.initContWidth=function(){this.contWd=this.width};n.setContHeight=function(f){f=this.that;var d=f.$top,c=this.height-f.$header_o[0].offsetHeight,b;if(f.options.showTop){b=d[0].offsetHeight;var a=parseInt;d=d[0];window.getComputedStyle?d=getComputedStyle(d).marginTop:(d=d.currentStyle.marginTop,d="auto"==d?0:d);b+=a(d)}else b=0;c=c-b-f.$bottom[0].offsetHeight+1;c=0<=c?c:"";f.$cont.height(c);this.contHt=c};n.setContAndGridHeightForFlex=function(){var f=this.that,d=f.hscroll.widget();if(this.vscroll)d.css("position",
"");else{d.css("position","relative");var d=f.$cont,c=f.options.cls,b=d.children("."+c.cont_inner_b);d.height("");b.length||(b=d.children("."+c.cont_inner));b.height("");f.element.height("");f.$grid_center.height("")}};n.setContAndGridWidthForFlex=function(){var f=this.that,d=f.options.maxWidth,c=this.maxWidthPixel,b=f.calcWidthCols(-1,f.colModel.length),f=f.element,a=this.getSBWidth(),b=b+a;d&&b>=c&&(b=c);this.contWd=b;f.width(b+"px")};n.getTotalVisibleRows=function(f,d,c){var b=this.that,a=this.vrows,
g=this.estRowsInViewPort(),k=0,m=c?c.length:0,e=d,h=0,y=0,l=null,v=b.iHierarchy?!0:!1,b=b.options.detailModel.offset,p=0,n=this.rowHt,r=v?this.contHt:void 0;if(null==c||0==m)return{initV:null,finalV:null,tvRows:k,lastFrozenRow:null};for(var t=0,q=m>d?d:m;t<q;t++){var u=c[t],w=u.pq_hidden;w||(l=t,k++,v&&((u=u.pq_detail)&&u.show?(u=u.height||0,u>b&&(u=b),p+=u+n):p+=n))}if(m<d)return{initV:l,finalV:l,tvRows:k,lastFrozenRow:l};g-=k;e=h=a[f];y=0;t=e;for(q=m;t<q;t++){u=c[t];if(w=u.pq_hidden)h++;else if(y===
g)break;else h++,y++;if(v&&!w&&((u=u.pq_detail)&&u.show?(u=u.height||0,u>b&&(u=b),p+=u+n):p+=n,p>r))break}k+=a.length;e=e>=m?m-1:e;h=h>=m?m-1:h;return{initV:e,finalV:h<e?e:h,tvRows:k,lastFrozenRow:l}};n.setInitH=function(f,d){var c=this.that;c.initH=f;c.finalH=d};n.setInitV=function(f,d){var c=this.that,b;(null==f||null==d)&&(b=this.vrows)&&b.length&&(f=d=b[b.length-1]);c.initV=f;c.finalV=d};n.calcVisibleV=function(){var f=this.that,d=f.options.freezeRows,f=f.pdata||[],c,b=f.length,a=[],g=0;for(c=
0;c<d;c++)f[c].pq_hidden||(a[g++]=c);this.vfrows=a;g=0;a=[];for(c=d;c<b;c++)f[c].pq_hidden||(a[g++]=c);this.vrows=a};n.calcVisibleH=function(){for(var f=this.that,d=[],c=0,b=f.colModel,f=f.options.freezeCols,a=b.length;f<a;f++)b[f].hidden||(d[c++]=f);this.vcols=d};n.calcInitFinal=function(){var f=this.that,d=f.options,c=d.virtualY,b=d.freezeRows,a="flex"===d.height,g=f.pdata;if(null==g||0===g.length)b=this.getTotalVisibleRows(k,b,g),f.totalVisibleRows=b.tvRows,c=b.initV,d=b.finalV,f.lastFrozenRow=
b.lastFrozenRow;else if(c){var k=parseInt(f.vscroll.option("cur_pos"));if(isNaN(k)||0>k)throw"cur_pos NA";f.scrollCurPos=k;b=this.getTotalVisibleRows(k,b,g);f.totalVisibleRows=b.tvRows;c=b.initV;f.lastFrozenRow=b.lastFrozenRow;d=a&&!d.maxHeight?g.length-1:b.finalV}else b=this.getTotalVisibleRows(0,b,g),f.lastFrozenRow=b.lastFrozenRow,f.totalVisibleRows=b.tvRows,c=0,d=g.length-1;this.setInitV(c,d)};n.calcInitFinalH=function(){var f=this.that,d=f.options,c,b=f.colModel,a=b.length;if(d.virtualX){c=parseInt(f.hscroll.option("cur_pos"));
var g=parseInt(d.freezeCols),k="flex"===d.width,m=this.vcols;m||(this.calcVisibleH(),m=this.vcols);c>=m.length&&(c=m.length-1);c=m[c];c>a-1&&(c=a-1);if(0>c||null==c)c=0;if(k&&!d.maxWidth)d=a-1;else{f=f.calcWidthCols(-1,g);k=this.getEContWd();for(m=c;m<a;m++){var e=b[m];if(!e.hidden){e=e.outerWidth;if(!e&&d.debug)throw"outerwidth N/A";f+=e;if(f>k)break}}d=m;d>a-1&&(d=a-1);d<g-1&&(d=g-1)}}else c=0,d=a-1;this.setInitH(c,d)};n._calcOffset=function(f){return(f=/(-|\+)([0-9]+)/.exec(f))&&3===f.length?parseInt(f[1]+
f[2]):0};n.setMax=function(f){var d=this.that,c=d.element;(d=d.options[f])?(d==parseInt(d)&&(d+="px"),c.css(f,d)):c.css(f,"")};n.refreshGridWidthAndHeight=function(){var f=this.that,d=f.options,c,b,a=-1<(d.width+"").indexOf("%")?!0:!1,g=-1<(d.height+"").indexOf("%")?!0:!1,k=-1<(d.maxHeight+"").indexOf("%")?!0:!1,m="flex"==d.height,e=k&&m,h=-1<(d.maxWidth+"").indexOf("%")?!0:!1,y="flex"==d.width,C=h&&y,f=f.element;if(a||g||e||C){var v=f.parent();if(!v.length)return;var p;v[0]==document.body||"fixed"==
f.css("position")?(p=l(window).width(),v=window.innerHeight?window.innerHeight:l(window).height()):(p=v.width(),v=v.height());var n=this._calcOffset,r=a?n(d.width):0,n=g?n(d.height):0;C?c=parseInt(d.maxWidth)*p/100:a&&(c=parseInt(d.width)*p/100+r);e?b=parseInt(d.maxHeight)*v/100:g&&(b=parseInt(d.height)*v/100+n)}c||(y&&d.maxWidth?h||(c=d.maxWidth):a||(c=d.width));d.maxWidth&&(this.maxWidthPixel=c);b||(m&&d.maxHeight?k||(b=d.maxHeight):g||(b=d.height));parseFloat(c)==c?(c=c<d.minWidth?d.minWidth:c,
f.css("width",c)):"auto"===c&&f.width(c);parseFloat(b)==b&&(b=b<d.minHeight?d.minHeight:b,f.css("height",b));this.width=Math.round(f.width());this.height=Math.round(f.height())};n.decidePanes=function(){var f=this.that,d=f.pqpanes={v:!1,h:!1,vH:!1},c=f.options,f=c.virtualX,b=c.virtualY,a="flex"==c.height&&!c.maxHeight,g="flex"==c.width&&!c.maxWidth,k=c.numberCell,m=c.freezeRows,c=c.freezeCols;!m||a||!c&&!k.show||g?m&&!a?b||(d.h=!0):!c&&!k.show||g||f||(d.v=!0,d.vH=!0):(b||(d.h=!0),f||(d.v=!0,d.vH=
!0))};n._storeColumnWidths=function(f){for(var d=this.that,c=d.options,b=d.colModel,a=c.virtualX,c=c.freezeCols,g=d.initH,d=f?b.length-1:d.finalH,k=[],m=0;m<=d;m++)!f&&a&&m<g&&m>=c&&(m=g),k[m]={outerWidth:b[m].outerWidth};return k};n._isColumnWidthChanged=function(f){for(var d=this.that,c=d.colModel,d=d.iGenerateView.colDef,b=0,a=d.length;b<a;b++){var g=d[b].colIndx;if(c[g].outerWidth!==f[g].outerWidth)return!0}return!1};n.softRefresh=function(){var f=this.that,d=f.options;this.refreshScrollbars();
f.iGenerateView.setPanes();f._saveDims();f.iMouseSelection.syncScrollBarVert();"flex"==d.height&&this.setContAndGridHeightForFlex();"flex"==d.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine()};n.refreshScrollbars=function(f){f=f||{};var d=this.that,c=d.options,b=d.iGenerateView,a,g="flex"===c.height;a="flex"===c.width;if((g||this.contHt)&&(a||this.contWd)&&null!==d.totalVisibleRows){d=this.setScrollVNumEles(f);d=1<d?!0:!1;if((!g||c.maxHeight)&&d!==this.vscroll)if(this.vscroll=d,c.scrollModel.autoFit||
c.virtualX||a){if(c=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(c)||a)this.ignoreTResize=!0,this._refreshTableWidths(c,{table:!0,header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),b.setPanes(),d=this.setScrollVNumEles(!0),this.vscroll=1<d?!0:!1}else b.setPanes();d=this.setScrollHNumEles();a=1<d?!0:!1;this.hscroll!=a&&(this.hscroll=a,b.setPanes());this._setScrollHLength();this._setScrollVLength(f);this._setScrollHVLength()}};n._setScrollHVLength=
function(){var f=this.that;this.vscroll&&this.hscroll||f.$hvscroll.css("visibility","hidden")};n._setScrollHLength=function(){var f=this.that,d=f.hscroll.widget(),c=f.$hvscroll;if(f.options.scrollModel.horizontal){d.css("visibility","");c.css("visibility","");var c=this.contWd,b=this.getSBWidth();d.css("right",0===b?0:"");f.hscroll.option("length",c-b)}else d.css("visibility","hidden"),c.css("visibility","hidden")};n.estVscroll=function(){var f=this.that,d=!0;null==f.totalVisibleRows||null==this.contHt?
d=!1:f.totalVisibleRows*this.rowHt<this.contHt&&(d=!1);this.vscroll=d};n.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:0};n.estHscroll=function(){var f=this.that;if(null==this.contWd)throw"failed";var d=!1;1<this.calcColsOutsideCont(f.colModel)+1&&(d=!0);this.hscroll=d};n.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};n.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};n.getEContWd=
function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};n.calcColsOutsideCont=function(f){var d=this.that.options,c=d.numberCell,d=d.freezeCols,b=this.contWd-this.getSBWidth(),a=0;c.show&&(a+=c.outerWidth);for(c=0;c<f.length;c++){var g=f[c];g.hidden||(a+=g.outerWidth)}var k=0,m=0,g=Math.round(a);g>b&&m++;for(c=d;c<f.length;c++)if(g=f[c],!g.hidden)if(k+=g.outerWidth,g=a-k,g>b)m++;else break;return m};n.setScrollHNumEles=function(){var f=this.that,d=f.options,c=f.colModel,
b=d.scrollModel,a=1*f.hscroll.option("cur_pos"),g=0;if("flex"!==d.width||d.maxWidth)g="fullScroll"===b.lastColumn?c.length-d.freezeCols-f._calcNumHiddenUnFrozens():this.calcColsOutsideCont(c)+1;a&&g<=a&&(g=a+1);f.hscroll.option("num_eles",g);return g};n.init=function(){var f=this.that,d=f.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;f.initH=f.initV=f.finalH=f.finalV=null;f.totalVisibleRows=f.lastFrozenRow=null;this.rowHt=d.rowHeight;this.headerHt=0;this.height=null};n.refresh=function(f){f=
f||{};var d=this.that,c=f.header,b=f.table,a=f.pager,g,k=d.iGenerateView;g=d.element;if(g[0].offsetWidth){f.toolbar&&d.refreshToolbar();d.iMouseSelection.resetMargins();this.init();g=d.options;this.decidePanes();g.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===c||!1===b)var m=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();k.createColDefs();
!1!==c?d._createHeader():this._isColumnWidthChanged(m)&&this._refreshTableWidths(m,{header:!0});d._refreshHeaderSortIcons();!1!==a&&d._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==b?k.generateView({source:f.source}):(this._refreshTableWidths(m,{table:!0}),k.setPanes());d._saveDims();k.scrollView();this.refreshScrollbars();"flex"==g.height&&this.setContAndGridHeightForFlex();"flex"==g.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();d._createCollapse();g.dataModel.postDataOnce=
void 0}else g.addClass("pq-pending-refresh")};n.summaryTable=function(){var f=this.$summary,d=this.that,c=d.options.summaryData;c?(f||(f=this.$summary=l("<div class='pq-grid-summary'></div>").prependTo(d.$bottom)),f={data:c,$cont:f},d.createTable(f)):f&&f[0].innerHTML&&f.empty()};n.refreshVscroll=function(f){f=this.that;var d=f.iGenerateView,c=f.options;if(c.virtualY&&!c.scrollModel.smooth){var b=f.initV,a=f.finalV;this.calcInitFinal();var g=b-f.initV,k=a-f.finalV;c.fullrefreshOnScroll||c.detailModel.init||
f._mergeCells||1!=Math.abs(g)||1!=Math.abs(k)?b==f.initV&&a==f.finalV||d.generateView():-1==g?(d.removeTopRow(1),d.appendRow(f.finalV-a)):1==g&&(d.prependRow(),d.removeBottomRow(a-f.finalV));f._saveDims();d.scrollView();1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};n._refreshTableWidths=function(f,d){var c=this.that,b=c.$tbl_header,a=d.header&&b,g=c.$tbl,k=d.table&&g,b=a?b.children().children(".pq-row-hidden"):null,m=a?c.$header.find(".pq-grid-col-resize-handle"):null,g=k&&g?g.children().children(".pq-row-hidden"):
null,e,h=!1,y=0;k&&c.tables.length&&(k=c.tables[0].$tbl.children().children(".pq-row-hidden"),g=g?g.add(k):k);for(var k=c.iGenerateView.colDef,l=0,v=k.length;l<v;l++){var p=k[l],n=p.colIndx,r=f[n].outerWidth,p=p.column.outerWidth;p!==r&&(a&&(e=b.find("td[pq-col-indx="+n+"]"),e.width(p)),g&&(e=g.find("td[pq-col-indx="+n+"]"),e.length&&(h=!0,e.width(p))));y+=p-r;a&&0!==y&&(n=m.filter("[pq-col-indx="+n+"]"),r=parseInt(n.css("left")),n.css("left",r+y))}h&&c._trigger("tableWidthChange");c._saveDims()}})(jQuery);
(function(l){function n(a,b,c){for(var d=0,g=a.length;d<g;d++){for(var k=a[d],m={},f=0,l=b.length;f<l;f++){var n=b[f];m[n]=k[n]}c.push(m)}}function f(a){var b=this;b.that=a;b.findformulas();a.on("columnChange",function(){b.findformulas()}).on("dataAvailable",function(){b._onDA()}).on(!0,"change",function(a,c){b._onchange(c)})}var d=l.paramquery,c=d.cClass,b={options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},
dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",mode:"AND",header:!1}},_create:function(){var a=this,
b=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new d.cHistory(a);a.iGroup=new d.cGroup(a);d.cMerge&&(a.iMerge=new d.cMerge(a));a.iFilterData=new d.cFilterData(a);a.iSelection=new g.Selection(a);a.iHeaderSearch=new k(a);a.iUCData=new d.cUCData(a);a.iMouseSelection=new d.cMouseSelection(a);a._super();new f(a);a.iDragColumns=new d.cDragColumns(a);a.refreshToolbar();"remote"===b.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",function(){a.one("refreshDone",function(){a._trigger("ready");
setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.__init();a.refreshDataAndView({header:!0})}},a;b.__init=function(){a||(a=l("<div style='position:fixed;bottom:0;right:20px;padding:0 2px;margin:0;opacity:0.5;z-index:10000;border:1px solid lightgray;border-radius:5px;'><a style='font-size:10px;text-decoration:none;' href='http://paramquery.com/pro'>ParamQuery Pro Eval</a></div>").appendTo(document.body))};l.widget("paramquery.pqGrid",d._pqGrid,b);l.widget.extend=function(){var a=Array.prototype.shift,
b=l.isPlainObject,c=l.isArray,d=l.widget.extend,g=a.apply(arguments),k;"boolean"==typeof g&&(k=g,g=a.apply(arguments));var m=arguments,f=0,n=m.length,q,u,w;for(null==k&&(k=1<n?!0:!1);f<n;f++)for(u in q=m[f],q)w=q[u],void 0!==w&&(a=0<f?!1:!0,b(w)?(g[u]=g[u]||{},d(a,g[u],w)):c(w)?g[u]=k&&a?w.slice():w:g[u]=w);return g};var g=window.pq=window.pq||{};g.grid=function(a,b){var c=l(a).pqGrid(b);return c.data("paramqueryPqGrid")||c.data("paramquery-pqGrid")};d.pqGrid.regional={};b=d.pqGrid.prototype;d.pqGrid.defaults=
b.options;b.focus=function(a){a=a||{};var b=a.$td,c,d=a.rowIndxPage,g=a.colIndx;a=document.activeElement;if(b){if(null==d||null==g)g=this.getCellIndices({$td:b}),d=g.rowIndxPage,g=g.colIndx}else{if(null==d||null==g){if(a&&a!=document.body&&"pq-grid-excel"!=a.id&&"pq-grid-cont"!=a.className||!(b=this._focusElement))return;d=b.rowIndxPage,g=b.colIndx}var b=this.iMerge,k=d+this.rowIndxOffset;b.ismergedCell(k,g)&&(b=b.getRootCell(k,g,"o"),d=b.rowIndxPage,g=b.colIndx);b=this.getCell({rowIndxPage:d,colIndx:g})}if(this.options.realFocus)this._focusElement=
{$ele:b,rowIndxPage:d,colIndx:g},(c=b[0])&&"TD"==c.nodeName.toUpperCase()?!1===l(a).hasClass("pq-editor-focus")&&(c.setAttribute("tabindex",0),c.focus()):(d=this.options.dataModel.data)&&d.length||this.$cont.focus();else{if(c=this._focusElement)this.removeClass({rowIndxPage:c.rowIndxPage,colIndx:c.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");b&&(this.addClass({rowIndxPage:d,colIndx:g,cls:"pq-focus"}),this._focusElement={$ele:b,rowIndxPage:d,colIndx:g});
d=this.$cont;document.activeElement!=d[0]&&d[0].focus()}};b.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};b.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};b.range=function(a,b){return new g.Range(this,a,"range",b)};b.rowExpand=function(a){this.iHierarchy.rowExpand(a)};b.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};
b.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};b.saveState=function(a){a=a||{};var b=this.element,c=l.extend,d=this.options,g=c(!0,{},{sorter:d.sortModel.sorter}),k=d.pageModel,k={rPP:k.rPP,curPage:k.curPage},m=this.colModel,f=[],n,q,u=0,w=m.length;q=d.groupModel;c=c(!0,{},{dataIndx:q.dataIndx,dir:q.dir,collapsed:q.collapsed,merge:q.merge,grandSummary:q.grandSummary});for(b=b[0].id;u<w;u++){n=m[u];q={width:n.width,dataIndx:n.dataIndx,hidden:n.hidden};if(n=n.filter)q.filter={value:n.value,
value2:n.value2,on:n.on};f[u]=q}d={colModel:f,height:d.height,datestamp:Date.now(),width:d.width,groupModel:c,pageModel:k,sortModel:g,freezeRows:d.freezeRows,freezeCols:d.freezeCols};!1!==a.stringify&&(d=JSON.stringify(d),!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(b?b:""),d));return d};b.loadState=function(a){a=a||{};var b;b=l.widget.extend;var c=l.extend,d=this.element[0].id;if(d=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(d||""))))"string"==
typeof d&&(d=JSON.parse(d));else return!1;for(var g=d.colModel,k,m,f=[],n=[],q=[],u=[],w=[],x=this.options,z=1<this.depth,A=z?this.colModel:x.colModel,B=0,E=g.length;B<E;B++)k=g[B],m=k.dataIndx,n[m]=!0,q[m]=B,f[m]=k.width,u[m]=k.filter,w[m]=k.hidden;z||A.sort(function(a,b){return q[a.dataIndx]-q[b.dataIndx]});B=0;for(E=A.length;B<E;B++)g=A[B],m=g.dataIndx,n[m]&&(g.width=f[m]||g.width,g.filter=c(g.filter,u[m]),g.hidden=w[m]);this.iColModel.init();b(x.sortModel,d.sortModel);b(x.pageModel,d.pageModel);
this.groupOption(d.groupModel,!1);b={freezeRows:d.freezeRows,freezeCols:d.freezeCols};isNaN(1*x.height)||isNaN(1*d.height)||(b.height=d.height);isNaN(1*x.width)||isNaN(1*d.width)||(b.width=d.width);this.option(b);!1!==a.refresh&&this.refreshDataAndView();return!0};var k=function(a){function b(c,d,g){a.filter({data:[{dataIndx:c,value:d,value2:g}]})}this.that=a;var c=this;this.dataHS={};a.on("headerKeyDown",function(a,b){var e=l(a.originalEvent.target);return e.hasClass("pq-grid-hd-search-field")?c.onKeyDown(a,
b,e):!0});a.on("createHeader",function(a,b){return c._onCreateHeader()});this.changeListener={change:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.keyupListener={keyup:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.clickListener={click:function(a,c){b(c.dataIndx,c.value)}}},c=k.prototype=new c;c.get$Ele=function(a,b){var c=this.that,d=c.options.freezeCols,g=l(c.$tbl_header[0]),k=".pq-grid-hd-search-field[name='"+b+"']",c=l(c.$tbl_header[2==c.$tbl_header.length?1:0]);return a>=d?c.find(k):
g.find(k)};c.onKeyDown=function(a,b,c){b=this.that;if(a.keyCode===l.ui.keyCode.TAB){var d=c.attr("name"),g=b.getColIndx({dataIndx:d}),k=b.colModel,m,f=a.shiftKey,n=k[g];if("between"==n.filter.condition&&(b.scrollColumn({colIndx:g}),d=this.get$Ele(g,d),d[0]==c[0]?f||(m=d[1]):f&&(m=d[0]),m))return m.focus(),a.preventDefault(),!1;do{f?g--:g++;if(0>g||g>=k.length)break;n=k[g];c=n.filter;if(!n.hidden&&c){b.scrollColumn({colIndx:g});d=n.dataIndx;m=this.get$Ele(g,d);"between"==c.condition&&(m=f?l(m[1]):
l(m[0]));if(m)return m.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};c._bindFocus=function(){function a(e){e=l(e.target).closest(".pq-grid-hd-search-field").attr("name");if(b.scrollColumn({dataIndx:e})){var d=b.getColIndx({dataIndx:e});c.get$Ele(d,e).focus()}}for(var b=this.that,c=this,d=b.$header.find(".pq-grid-header-search-row"),g=0;g<d.length;g++)l(d[g]).on("focusin",a)};c._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();var c=a.colModel,
b=b.freezeCols,d=a.$tbl_header,g=l(d[0]),k=l(d[1]),m="input,select";if(1<d.length){g.find(m).css("visibility","hidden");for(var f=0;f<b;f++){var n=c[f],m="*[name='"+n.dataIndx+"']";g.find(m).css("visibility","visible");k.find(m).css("visibility","hidden")}}c=a.iGenerateView.colDef;f=0;for(m=c.length;f<m;f++){var q=c[f],u=q.colIndx,n=q.column,w=n.filter;if(w){var q=n.dataIndx,x=g;u>=b&&1<d.length&&(x=k);u=x.find("*[name='"+q+"']");if(0!=u.length){var x=w.type,z=w.value,A=w.value2;"checkbox"==x&&"triple"==
w.subtype?u.pqval({val:z}):"select"==x&&null!=z&&u.val(z);(x=w.init)&&x.call(u,{dataIndx:q,column:n});if(n=w.listeners)for(w=0;w<n.length;w++){x=n[w];"string"==typeof x&&(x=this[x+"Listener"]);for(var B in x)(function(b,c,d){b.bind(B,function(g){var h=a.getColumn({dataIndx:d}),k=h.filter;"checkbox"==k.type?z="triple"==k.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==k.condition?(z=l(b[0]).val(),A=l(b[1]).val()):z=b.val();return c.call(this,g,{column:h,dataIndx:d,value:z,value2:A})})})(u,
x[B],q)}}}}}};var m=function(a,b){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};c.createDOM=function(a,b){var c=this.that,g=c.options,k=g.bootstrap.on?" ":" ui-corner-all",g=g.numberCell;a.push("<tr class='pq-grid-header-search-row'>");g.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var g=c.iGenerateView.colDef,f=0,l=g.length;f<l;f++){var n=
g[f].column,t=b,q=n.halign;q||(q=n.align);"right"==q?t+=" pq-align-right":"center"==q&&(t+=" pq-align-center");(q=n.cls)&&(t=t+" "+q);if(q=n.filter){var u=n.dataIndx,w=q.type,x=q.value,z=q.condition,A=q.cls,A="pq-grid-hd-search-field "+(A?A:""),B=q.style,B=B?B:"",E=q.attr,E=E?E:"",D="";if("between"==z)var F=q.value2,F=null!=F?F:"";"textbox"===w?(x=x?x:"",A=A+" pq-search-txt"+k,D="between"==z?m(this._input(u,x,A+" pq-from",B,E),this._input(u,F,A+" pq-to",B,E)):this._input(u,x,A,B,E)):"textarea"===
w?(x=x?x:"",A=A+" pq-search-txt"+k,D="between"==z?m(this._textarea(u,x,A+" pq-from",B,E),this._textarea(u,F,A+" pq-to",B,E)):this._textarea(u,x,A,B,E)):"select"===w?q.cache?D=q.cache:(w=q.options,"function"===typeof w&&(w=w.call(c,{column:n,value:x,dataIndx:u,cls:A,style:B,attr:E})),A+=k,n=["name='",u,"' class='",A,"' style='",B,"' ",E].join(""),D=d.select({options:w,attr:n,prepend:q.prepend,valueIndx:q.valueIndx,labelIndx:q.labelIndx,groupIndx:q.groupIndx}),q.cache=D):"checkbox"==w?D=["<input ",
null==x||!1==x?"":"checked=checked"," name='",u,"' type=checkbox class='"+A+"' style='"+B+"' "+E+"/>"].join(""):"string"==typeof w?D=w:"function"==typeof w&&(D=w.call(c,{width:n.outerWidth,value:x,value2:F,column:n,dataIndx:u,cls:A,attr:E,style:B}));a.push(["<td class='",t,"'><div class='pq-td-div' >",D,"</div></td>"].join(""))}else a.push(["<td class='",t,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};c._input=function(a,b,c,d,g){return['<input value="',b,"\" name='",a,
"' type=text style='"+d+"' class='"+c+"' "+g+" />"].join("")};c._textarea=function(a,b,c,d,g){return["<textarea name='",a,"' style='"+d+"' class='"+c+"' "+g+" >",b,"</textarea>"].join("")};b.refreshToolbar=function(){var a=this.options,b=a.toolbar,c;this._toolbar&&(c=this._toolbar,c.destroy());if(b){var d=b.cls,k=b.style,m=b.attr,b=b.items,d=l("<div class='"+(d?d:"")+"' style='"+(k?k:"")+"' "+(m?m:"")+" ></div>");c?c.widget().replaceWith(d):this.$top.append(d);c=g.toolbar(d,{items:b,gridInstance:this,
bootstrap:a.bootstrap});a.showToolbar||d.css("display","none");this._toolbar=c}};b.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};b.ovCreateHeader=function(a,b){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,b)};b.filter=function(a){var b=this,c=this.options,d=void 0===a.apply?!0:a.apply,g=void 0===a.sort?!0:a.sort,k=c.dataModel,c=c.filterModel;if(void 0!=a){var m="replace"==a.oper?!0:!1;a=a.data;for(var f=this.colModel,f=d?f:l.extend(!0,[],f),n=0,q=f.length,u=
a.length,w=0;w<q;w++){for(var x=f[w],z=!1,A=0;A<u&&n!=u;A++){var B=a[A];if(B.dataIndx==x.dataIndx){z=!0;n++;var A=x.filter,E=B.condition,D=B.value;A?A.on=!0:A=x.filter={on:!0};E&&(A.condition=E);E=A.condition;A.value=D;if("between"==E)A.value2=B.value2;else if("range"==E){B=[];if(D)if("string"==typeof D){var E=A.options,F=D.indexOf('"'),N=D.lastIndexOf('"'),D=D.substr(F,N+1),D=JSON.parse("["+D+"]");if(E)for(F=0,N=E.length;F<N;F++){var L=E[F];-1!=l.inArray(L,D)&&B.push(L)}else B=D.split(",s*")}else"function"==
typeof D.push&&(B=D);A.value=B}break}}m&&!z&&x.filter&&(x.filter.on=!1)}}var J={header:!1,apply:d,sort:g,CM:f};if("remote"==k.location&&"local"!=c.type)this.remoteRequest({apply:d,CM:f,callback:function(){return b._onDataAvailable(J)}});else return J.source="filter",J.trigger=!1,b._onDataAvailable(J)};b._initTypeColumns=function(){for(var a=this.colModel,b=0,c=a.length;b<c;b++){var g=a[b],k=g.type;"checkBoxSelection"===k||"checkbox"==k?(g.type="checkbox",new d.cCheckBoxColumn(this,g)):"detail"===
k&&(g.dataIndx="pq_detail",this.iHierarchy=new d.cHierarchy(this,g))}};b.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};b._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};b.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);};b.bringCellToView=function(a){this._bringCellToView(a)};b._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};b.pageData=function(){return this.pdata};
b.getData=function(a){a=a||{};var b=a.dataIndx,c=b?b.length:0,d=a.data;a=this.options.dataModel;var g=a.data,k=a.dataUF;a=[];if(c)d?n(d,b,a):(g&&n(g,b,a),k&&n(k,b,a));else return g.concat(k?k:[]);d=[];for(g=0;g<c;g++){var k=b[g],m=this.getColumn({dataIndx:k});d.push({dataIndx:k,dir:"up",dataType:m.dataType,sortType:m.sortType})}a=this.iSort._sortLocalData(d,a);b=[];c=void 0;d=0;for(g=a.length;d<g;d++)k=a[d],m=JSON.stringify(k),m!==c&&(b.push(k),c=m);return b};b.get_p_data=function(){var a=this.options,
b="remote"==a.pageModel.type,c=a.dataModel.data,d=this.pdata,g=this.rowIndxOffset,a=a.groupModel,k=g&&b?Array(g):[];return a.on&&a.dataIndx.length?g?(b||(k=c.slice(0,g)),k.concat(d)):d:g&&b?k.concat(d):c};b._onDataAvailable=function(a){a=a||{};var b=this.options,c=null==a.apply?!0:a.apply,d=a.source,g=a.sort,k=[],k=b.filterModel,m=b.dataModel,b=b.sortModel,f=m.location;!1!==c&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:d});k=k&&k.on&&("local"==f&&"remote"!=k.type||"remote"==f&&"local"==
k.type)?this.iFilterData.filterLocalData(a).data:m.data;"local"==b.type&&!1!==g&&(c?this.sort({refresh:!1}):k=this.iSort.sortLocalData(k));if(!1===c)return k;m.data=k;this.refreshView(a)};b.reset=function(a){a=a||{};var b=a.sort,c,d=0,g;c=this.options;g=l.extend;var k,m=a.filter,f=a.group;if(b||m||f){b&&(k=!0===b?{sorter:[]}:b,g(c.sortModel,k));if(m)for(c=this.getColModel(),g=c.length;d<g;d++)if(k=c[d].filter)k.value=null,k.value2=null,k.cache=null;f&&(d=!0===f?{dataIndx:[]}:f,this.groupOption(d,
!1));!1!==a.refresh&&(m?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):b?this.sort():this.refreshView())}};b._trigger=d._trigger;b.on=d.on;b.one=d.one;b.off=d.off;b.pager=function(){return this.pagerW};b.vscrollbar=function(){return this.vscroll};b.hscrollbar=function(){return this.hscroll};b.toolbar=function(){return this._toolbar.element};d.cCompute=f;c=f.prototype;c.callRow=function(a,b,c){if(a)for(;c--;){var d=b[c],g=d.column;a[g.dataIndx]=d.formula.call(this.that,{rowData:a,column:g})}};
c._onDA=function(){var a=this.formulas.length;if(a)for(var b=this.that.options.dataModel.data,c=b.length,d=this.formulas;c--;)this.callRow(b[c],d,a)};c._onchange=function(a){var b=this.formulas.length;if(b){a=a.rowList;for(var c=this.formulas,d=a.length;d--;)this.callRow(a[d].rowData,c,b)}};c.findformulas=function(){for(var a=this.that.colModel,b,c,d=[],g=a.length;g--;)b=a[g],(c=b.formula)&&d.push({formula:c,column:b});this.formulas=d};c=d.cColModel=c=function(a){this.that=a;this.init()};c=c.prototype;
c.extend=function(a,b){for(var c,d,g=l.extend,k=a.length;k--;){var m=a[k];for(c in b)void 0===m[c]&&(d=b[c],m[c]=d&&"object"==typeof d?g(!0,{},d):d)}};c.init=function(){var a=this.that,b=a.options,c=b.columnTemplate,d;d=b.colModel;d||(this._autoGenColumns(),d=b.colModel);b=this.nestedCols(d);a.depth=b.depth;b=a.colModel=b.colModel;d=b.length;c&&this.extend(b,c);this.getHeadersCells();this.alignColumns(b,d);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};c.alignColumns=function(a,
b){for(var c=0;c<b;c++){var d=a[c];if(!d.align){var g=d.dataType;!g||"integer"!=g&&"float"!=g||(d.align="right")}}};c.nestedCols=function(a,b,c,d){var g=a.length,k=[];null==b&&(b=1);for(var m=b,f=0,l=0,n=0,u=0;u<g;u++){var w=a[u];w.parent=d?d:void 0;!0===c&&(w.hidden=c);var x=w.colModel;x&&x.length?(x=this.nestedCols(x,b+1,w.hidden,w),k=k.concat(x.colModel),0<x.colSpan?(x.depth>m&&(m=x.depth),w.colSpan=x.colSpan,f+=x.colSpan):w.colSpan=0,n+=x.o_colspan,w.o_colspan=x.o_colspan,w.childCount=x.childCount,
l+=x.childCount):(w.hidden?w.colSpan=0:(w.colSpan=1,f++),n++,w.o_colspan=1,w.childCount=0,l++,k.push(w))}return{depth:m,colModel:k,colSpan:f,width:0,childCount:l,o_colspan:n}};c.getHeadersCells=function(){for(var a=this.that,b=a.options.colModel,c=a.colModel.length,d=a.depth,g=[],k=0;k<d;k++){g[k]=[];for(var m=0,f=0,l=0;l<c;l++){var n;if(0==k)n=b[m];else{var u=g[k-1][l];if((n=u.colModel)&&0!=n.length){for(var u=l-u.leftPos,w=0,x=0,z=0;z<n.length;z++)if(w+=0<n[z].childCount?n[z].childCount:1,u<w){x=
z;break}n=n[x]}else n=u}u=n.childCount?n.childCount:1;l==f?(n.leftPos=l,g[k][l]=n,f+=u,b[m+1]&&m++):g[k][l]=g[k][l-1]}}return a.headerCells=g};c.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};c.assignRowSpan=function(){for(var a=this.that,b=a.colModel.length,c=a.headerCells,a=a.depth,d=0;d<b;d++)for(var g=0;g<a;g++){var k=c[g][d];if(!(0<d&&k==c[g][d-1]||0<g&&k==c[g-1][d])){for(var m=1,f=g+1;f<a;f++)k==c[f][d]&&m++;k.rowSpan=m}}return c};
c._autoGenColumns=function(){var a=this.that.options,b=a.columnTemplate||{},c=b.dataType,d=b.title,k=b.width,b=a.dataModel.data,m=g.validation,f=[];b&&b.length&&l.each(b[0],function(a,b){var e="string";m.isInteger(b)?e=-1<b+-1?"float":"integer":m.isDate(b)?e="date":m.isFloat(b)&&(e="float");f.push({dataType:c?c:e,dataIndx:a,title:d?d:a,width:k?k:100})});a.colModel=f};c._refreshDataIndices=function(){for(var a=this.that,b="JSON"==this.getDataType()?!0:!1,c={},d={},g={},k=a.colModel,m=k.length,f=0;f<
m;f++){var l=k[f],n=l.dataIndx;null==n&&(n="detail"==l.type?"pq_detail":b?"dataIndx_"+f:f,"pq_detail"==n&&(l.dataType="object"),l.dataIndx=n);c[n]=l;d[n]=f;l.validations&&(g[n]=g)}a.columns=c;a.colIndxs=d;a.validations=g}})(jQuery);
(function(l){var n=l.paramquery,f=n._pqGrid.prototype;f.exportExcel=function(c){c=c||{};c.format="xlsx";return this.exportData(c)};f.exportCsv=function(c){c=c||{};c.format="csv";return this.exportData(c)};f.exportData=function(c){return(new d(this,c)).Export(c)};var d=n.cExport=function(c,b){this.that=c;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:";>wlk udqrhnm<!0-/! dmbnchmf<!TSE,7! rs`mc`knmd<!xdr!>=;vnqjannj wlkmr<!gsso9..rbgdl`r-nodmwlkenql`sr-nqf.roqd`crgddslk.1//5.l`hm! wlkmr9q<!gsso9..rbgdl`r-nodmwlkenql`sr-nqf.neehbdCnbtldms.1//5.qdk`shnmrghor!=;rgddsr=;rgdds m`ld<!O`q`lPtdqx Oqn Du`k! rgddsHc<!0! q9hc<!qHc0!.=;.rgddsr=;.vnqjannj=".replace(/[^\s]/g,function(a){return String.fromCharCode(a.charCodeAt(0)+1)}),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
f=d.prototype;f.getTitle=function(c,b){var a=c.title;a?"function"==typeof a&&(a=a.call(this.that,{colIndx:b,column:c,dataIndx:c.dataIndx,Export:!0})):a="";return a};f.getRenderVal=function(c,b,a){var d=c.column,k=d.exportRender;return(b&&!1!==k||k)&&(d.render||d._render||d.format)?a.renderCell(c):c.rowData[c.dataIndx]};f.getXlsMergeCells=function(c,b,a,d){c=c.concat(a.getMergeCells(b,this.curPage,d));b=[];a=n.toLetter;d=c.length;b.push('<mergeCells count="'+d+'">');for(var k=0;k<d;k++){var m=c[k],
m=a(m.c1)+(m.r1+1)+":"+a(m.c2)+(m.r2+1);b.push('<mergeCell ref="',m,'"/>')}b.push("</mergeCells>");return d?b.join(""):""};f.getXlsCols=function(c,b){var a=[],d,k,m,e,h=0,f=function(a,b,c,d,e){a.push('<col min="',b,'" max="',c,'" hidden="',d,'" customWidth="1" width="',Math.ceil(e/7),'"/>')};a.push("<cols>");for(var l=0;l<b;l++){var n=c[l],p=n.hidden?"1":"0",s=n._width;!1!==n.copy&&(h++,s||(s=parseInt(n.width))||(s=100),m===s&&e===p?k=h:(null!=m&&(f(a,d,k,e,m),d=null),k=h,null==d&&(d=h)),m=s,e=p)}f(a,
d,k,e,m);a.push("</cols>");return a.join("")};f.getXlsHeader=function(c,b,a){for(var d=[],k=0;k<b;k++){var m=c[k];d.push("<row>");for(var e=0,h=m.length;e<h;e++){var f=m[e];if(!1!==f.copy){var l=f.o_colspan,n=f.rowSpan,p=this.getTitle(f,e);0<k&&f==c[k-1][e]?p="":0<e&&f==c[k][e-1]?p="":(1<l||1<n)&&a.push({r1:k,c1:e,r2:k+n-1,c2:e+l-1});d.push('<c t="inlineStr"><is><t><![CDATA['+p+"]]\x3e</t></is></c>")}}d.push("</row>")}return d.join("")};f.getXlsBody=function(c,b,a,d,k,m,e,h,f){var l=[],n,p,s,r,t,
q,u={integer:"Number","float":"Number",bool:"bool"};for(n=0;n<d;n++){t=a[n];p=t.pq_hidden?'hidden="1"':"";q=k?n+m:n;s=q-m;t={rowIndx:q,rowIndxPage:s,rowData:t,Export:!0};l.push("<row "+p+">");for(p=0;p<b;p++)r=c[p],!1!==r.copy&&(s=void 0,e.ismergedCell(q,p)&&(e.isRootCell(q,p,"o")||(s=null)),void 0===s&&(t.colIndx=p,t.column=r,t.dataIndx=r.dataIndx,s=this.getRenderVal(t,h,f)),r=null==s?null:u[r.dataType],"string"==typeof s&&(r="String"),r=r||"String",s=null==s?"":s,"String"==r?l.push('<c t="inlineStr"><is><t><![CDATA['+
s+"]]\x3e</t></is></c>"):"Number"==r?l.push("<c><v>"+s+"</v></c>"):"bool"==r?(s=s?"1":"0",l.push('<c t="b"><v>'+s+"</v></c>")):l.push("<c><v>"+s+"</v></c>"));l.push("</row>")}return l.join("\n")};f.getXlsContent=function(c,b,a,d,k,m,e,h,f,l,n,p){var s='<sheetViews><sheetView workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',r=this.getXlsCols(c,b),t=[],q=p?d:0,s=s.replace("<%=a%>",q),s=s.replace("<%=b%>",q+1);a=p?this.getXlsHeader(a,
d,t):"";c=this.getXlsBody(c,b,k,m,e,h,f,l,n);return[s,r,"<sheetData>",a,c,"</sheetData>",this.getXlsMergeCells(t,p?d:0,f,m)].join("")};f.getHtmlHeader=function(c,b){for(var a=[],d,k,m,e,h=0;h<b;h++){var f=c[h],l=null;a.push("<tr>");for(var n=0,p=f.length;n<p;n++)d=f[n],k=d.colSpan,!d.hidden&&k&&!1!==d.copy&&(m=d.rowSpan,0<h&&d==c[h-1][n]||l&&0<n&&d==l||(e=this.getTitle(d,n),l=d,d=(d=d.halign||d.align)?"align="+d:"",a.push("<th colspan=",k," rowspan=",m," ",d,">",e,"</th>")));a.push("</tr>")}return a.join("")};
f.getHtmlBody=function(c,b,a,d,k,m,e,h,f){var l=[],n,p,s,r,t,q,u;for(n=0;n<d;n++)if(p=a[n],!p.pq_hidden){u=k?n+m:n;q=u-m;q={rowIndx:u,rowIndxPage:q,rowData:p,Export:!0};l.push("<tr>");for(p=0;p<b;p++)if(s=c[p],!s.hidden&&!1!==s.copy){t="";if(e.ismergedCell(u,p)){if(t=e.isRootCell(u,p))r=e.getRootCell(u,p,"o"),r.Export=!0,r=this.getRenderVal(r,h,f);else continue;t="rowspan="+t.rowspan+" colspan="+t.colspan+" "}else q.colIndx=p,q.column=s,q.dataIndx=s.dataIndx,r=this.getRenderVal(q,h,f);s=s.align;t+=
s?"align="+s:"";r=null==r?"":r;l.push("<td ",t,">",r,"</td>")}l.push("</tr>")}return l.join("")};f.getHtmlContent=function(c,b,a,d,k,m,e,h,f,l,n,p,s){var r=c.cssRules||"",t=this.that.element.find(".pq-grid-table"),q=t.css("font-family"),t=t.css("font-size"),u=[];u.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",c.title?c.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+q+";font-size:"+t+";border-collapse:collapse;}","td,th{padding: 5px;border:1px solid #ccc;}",
r,"</style>","<table>");u.push(s?this.getHtmlHeader(d,k,b):"");u.push(this.getHtmlBody(b,a,m,e,h,f,l,n,p));u.push("</table></body></html>");return u.join("")};f.getCsvHeader=function(c,b,a,d){for(var k=[],m=[],e,h,f=0;f<b;f++){for(var l=c[f],n=null,p=0,s=l.length;p<s;p++)e=a[p],e.hidden||!1===e.copy||(e=l[p],0<f&&e==c[f-1][p]?k.push(""):n&&0<p&&e==n?k.push(""):(h=(h=this.getTitle(e,p))?h.replace(/\"/g,'""'):"",n=e,k.push('"'+h+'"')));m.push(k.join(d));k=[]}return m};f.getCSVContent=function(c,b,a,
d,k,m,e,h,f,l,n,p,s){var r,t;c=c.separator||",";var q,u=[];s=s?this.getCsvHeader(d,k,b,c):[];for(d=0;d<e;d++)if(t=m[d],!t.pq_hidden){k=h?d+f:d;q=k-f;q={rowIndx:k,rowIndxPage:q,rowData:t,Export:!0};for(t=0;t<a;t++)r=b[t],r.hidden||!1===r.copy||(l.ismergedCell(k,t)?l.isRootCell(k,t)?(r=l.getRootCell(k,t,"o"),r.Export=!0,r=this.getRenderVal(r,n,p)):r="":(q.colIndx=t,q.column=r,q.dataIndx=r.dataIndx,r=this.getRenderVal(q,n,p)),r=(null==r?"":r)+"",r=r.replace(/\"/g,'""'),u.push('"'+r+'"'));s.push(u.join(c));
u=[]}return s.join("\n")};f.getJsonContent=function(c,b){function a(a,b){return 0===(a+"").indexOf("pq_")?void 0:b}return c.nostringify?b:JSON.stringify(b,c.nopqdata?a:null,c.nopretty?null:2)};f.postRequest=function(c){var b=c.format,a,d=c.url,k=c.filename||"pqGrid";c.zip&&"xlsx"!=b?(b=new JSZip,b.file(k+"."+c.format,c.data),c=b.generate({type:"base64",compression:"DEFLATE"}),a=!0,b="zip"):(a=c.decodeBase?!0:!1,c=c.data);d&&l.ajax({url:d,type:"POST",cache:!1,data:{pq_ext:b,pq_data:c,pq_decode:a,pq_filename:k},
success:function(a){d+=(0<d.indexOf("?")?"&":"?")+"pq_filename="+a;l(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+d+'"></iframe>')}});return c};f.Export=function(c){var b=this.that,a=b.options,d,k,m,e=this.templates,h=a.groupModel;k="remote"==a.pageModel.type;d=b.rowIndxOffset;var f=b.iGenerateView,l=b.iMerge,n=b.colModel,p=n.length,s=b.headerCells,r=s.length,h=(this.curPage=h.on&&h.dataIndx.length||k)?b.pdata:a.dataModel.data,h=a.summaryData?h.concat(a.summaryData):
h,t=h.length,a=c.url,q=c.render,u=!c.noheader,w=c.format;b._trigger("beforeExport",null,c);"xlsx"==w?(d=this.getXlsContent(n,p,s,r,h,t,k,d,l,q,f,u),k=new JSZip,k.file("[Content_Types].xml",e.content_types),k.file("workbook.xml",e.workbook),k.file("worksheet.xml",e.worksheet.replace("<%=content%>",d)),d=k.folder("_rels"),d.file(".rels",e.rels),d.file("workbook.xml.rels",e.workbook_rels),a?(c.data=k.generate({type:"base64",compression:"DEFLATE"}),c.decodeBase=!0):m=k.generate({type:"blob",compression:"DEFLATE"})):
c.data="json"==w?this.getJsonContent(c,h):"csv"==w?this.getCSVContent(c,n,p,s,r,h,t,k,d,l,q,f,u):this.getHtmlContent(c,n,p,s,r,h,t,k,d,l,q,f,u);m=m?m:this.postRequest(c);b._trigger("exportData",null,c);return m}})(jQuery);
(function(l){var n=l.paramquery,f={options:{items:[],gridInstance:null}};l.widget("paramquery.pqToolbar",f);f=n.pqToolbar.prototype;f.refresh=function(){this.element.empty();this._create()};f._create=function(){var d=this.options,c=d.gridInstance,b={button:"click",select:"change",checkbox:"change",textbox:"change"},a,g,k=d.bootstrap,m=k.on,e=c.colModel,d=d.items,h=this.element;h.addClass("pq-toolbar");for(var f=0,C=d.length;f<C;f++){var v=d[f],p=v.type,s=v.value,r=v.icon,t=v.options||{},q=v.label,
u=(g=v.listener)?[g]:v.listeners,u=u||[function(){}];g=(g=v.cls)?g:"";g=(g=m&&"button"==p?k.btn+" "+g:g)?"class='"+g+"'":"";var w=v.style,w=w?"style='"+w+"'":"",x=v.attr,z=x?x:"",x=q&&"button"!=p?[g,z]:[g,z,w],x=x.join(" "),A;v.options=t;"textbox"==p?A=l([q?"<label "+w+">"+q:"","<input type='text' "+x+">",q?"</label>":""].join("")):"textarea"==p?A=l([q?"<label "+w+">"+q:"","<textarea "+x+"></textarea>",q?"</label>":""].join("")):"checkbox"==p?A=l([q?"<label "+w+">":"","<input type='checkbox' ",s?
"checked='checked' ":"",x,">",q?q+"</label>":""].join("")):"separator"==p?A=l("<span class='pq-separator' "+[z,w].join(" ")+"></span>"):"button"==p?(A="",m&&(A=r?"<span class='glyphicon "+r+"'></span>":""),A=l("<button type='button' "+x+">"+A+q+"</button>"),l.extend(t,{label:q?q:!1,icons:{primary:m?"":r}}),A.button(t)):"select"==p?("function"===typeof t&&(t=t.call(c,{colModel:e})),t=t||[],A=n.select({options:t,attr:x,prepend:v.prepend,groupIndx:v.groupIndx,valueIndx:v.valueIndx,labelIndx:v.labelIndx}),
A=l([q?"<label "+w+">"+q:"",A,q?"</label>":""].join(""))):"string"==typeof p?A=l(p):"function"==typeof p&&(A=p.call(c,{colModel:e,cls:g}),A=l(A));A.appendTo(h);"checkbox"!==p&&void 0!==s&&(q?l(A[0].children[0]).val(s):A.val(s));s=0;for(q=u.length;s<q;s++)for(a in g=u[s],r={},"function"==typeof g?r[b[p]]=g:r=g,r)A.on(a,this._onEvent(c,r[a],v))}};f._onEvent=function(d,c,b){return function(a){b.value="checkbox"==b.type?l(a.target).prop("checked"):l(a.target).val();c.call(d,a)}};f._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
f._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};f._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};f._setOption=function(d,c){"disabled"==d&&(!0==c?this._disable():this._enable())};pq.toolbar=function(d,c){var b=l(d).pqToolbar(c);return b.data("paramqueryPqToolbar")||b.data("paramquery-pqToolbar")}})(jQuery);
(function(l){var n=l.paramquery,f=n.pqGrid.prototype.options,d={on:!1,dirtyClass:"pq-cell-dirty"};f.trackModel=f.trackModel||d;f=(n.cUCData=function(c){this.that=c;this.udata=[];this.ddata=[];this.adata=[];this.options=c.options;var b=this;c.on("dataAvailable",function(a,c){"filter"!=c.source&&(b.udata=[],b.ddata=[],b.adata=[])})}).prototype=new n.cClass;f.add=function(c){var b=this.that,a=this.adata,d=this.ddata;c=c.rowData;for(var k=this.options.trackModel.dirtyClass,m=b.getRecId({rowData:c}),e=
0,h=a.length;e<h;e++){var f=a[e];if(null!=m&&f.recId==m)throw"primary key violation";if(f.rowData==c)throw"same data can't be added twice.";}e=0;for(h=d.length;e<h;e++)if(c==d[e].rowData){d.splice(e,1);return}var d=[],l;for(l in c)d.push(l);b.removeClass({rowData:c,dataIndx:d,cls:k});c={recId:m,rowData:c};a.push(c)};f.update=function(c){var b=this.that,a=this.options.trackModel.dirtyClass,d=c.rowData||b.getRowData(c),k=b.getRecId({rowData:d}),m=c.dataIndx,e=c.refresh,h=b.columns,f=b.getValueFromDataType;
c=c.row;var n=this.udata,v=n.slice(0),p=!1;if(null!=k){for(var s=0,r=n.length;s<r;s++){var t=n[s],q=t.oldRow;if(t.rowData==d){p=!0;for(m in c)n=h[m].dataType,r=c[m],r=f(r,n),t=q[m],t=f(t,n),q.hasOwnProperty(m)&&t===r?(n={rowData:d,dataIndx:m,refresh:e,cls:a},b.removeClass(n),delete q[m]):(n={rowData:d,dataIndx:m,refresh:e,cls:a},b.addClass(n),q.hasOwnProperty(m)||(q[m]=d[m]));l.isEmptyObject(q)&&v.splice(s,1);break}}if(!p){q={};for(m in c)q[m]=d[m],n={rowData:d,dataIndx:m,refresh:e,cls:a},b.addClass(n);
n={rowData:d,recId:k,oldRow:q};v.push(n)}this.udata=v}};f["delete"]=function(c){var b=this.that,a=c.rowIndx,d=c.rowIndxPage,k=b.rowIndxOffset,a=null==a?d+k:a,d="remote"==b.options.pageModel.type?null==d?a-k:d:a,k=this.adata,m=this.ddata;c=b.getRowData(c);for(var b=0,e=k.length;b<e;b++)if(k[b].rowData==c){k.splice(b,1);return}m.push({indx:d,rowData:c,rowIndx:a})};f.isDirty=function(c){var b=this.udata,a=this.adata,d=this.ddata,k=!1;if(c=this.that.getRowData(c))for(a=0;a<b.length;a++){if(c==b[a].rowData){k=
!0;break}}else if(b.length||a.length||d.length)k=!0;return k};f.getChangesValue=function(c){c=c||{};var b=this.that;c=c.all;for(var a=this.udata,d=this.adata,k=this.ddata,m=[],e=[],h=[],f=[],n=[],v=[],p=0,s=k.length;p<s;p++){var r=k[p],t=r.rowData,q={};n.push(t);for(var u in t)0!=u.indexOf("pq_")&&(q[u]=t[u]);v.push(q)}p=0;for(s=a.length;p<s;p++)if(r=a[p],k=r.oldRow,t=r.rowData,-1==l.inArray(t,n)&&-1==l.inArray(t,m)){q={};if(!1!==c)for(u in t)0!=u.indexOf("pq_")&&(q[u]=t[u]);else{for(u in k)q[u]=
t[u];q[b.options.dataModel.recIndx]=r.recId}m.push(t);e.push(q);h.push(k)}p=0;for(s=d.length;p<s;p++){r=d[p];t=r.rowData;q={};for(u in t)0!=u.indexOf("pq_")&&(q[u]=t[u]);f.push(q)}return{updateList:e,addList:f,deleteList:v,oldList:h}};f.getChanges=function(){for(var c=this.udata,b=this.adata,a=this.ddata,d=l.inArray,k=[],m=[],e=[],h=[],f=0,n=a.length;f<n;f++){var v=a[f],v=v.rowData;h.push(v)}f=0;for(n=c.length;f<n;f++)v=c[f],a=v.oldRow,v=v.rowData,-1==d(v,h)&&-1==d(v,k)&&(k.push(v),m.push(a));f=0;
for(n=b.length;f<n;f++)v=b[f],v=v.rowData,e.push(v);return{updateList:k,addList:e,deleteList:h,oldList:m}};f.getChangesRaw=function(){var c=this.adata,b=this.ddata,a={updateList:[],addList:[],deleteList:[]};a.updateList=this.udata;a.addList=c;a.deleteList=b;return a};f.commitAdd=function(c,b){for(var a=this.that,d=a.colModel,k=d.length,m=this.adata,e=l.inArray,h=m.length,f=a.getValueFromDataType,a=[],n=c.length,v=[],p=0;p<n;p++)for(var s=c[p],r=0;r<h;r++){var t=m[r].rowData,q=!0;if(-1==e(t,v)){for(var u=
0;u<k;u++){var w=d[u],x=w.dataType,z=w.dataIndx;if(!w.hidden&&z!=b&&(w=t[z],w=f(w,x),z=s[z],z=f(z,x),w!==z)){q=!1;break}}if(q){r={};q={};r[b]=s[b];q[b]=t[b];a.push({type:"update",rowData:t,oldRow:q,newRow:r});v.push(t);break}}}d=[];for(r=0;r<h;r++)t=m[r].rowData,-1==e(t,v)&&d.push(m[r]);this.adata=d;return a};f.commitUpdate=function(c,b){for(var a=this.that,d=this.options.trackModel.dirtyClass,k=this.udata,m=k.length,e=c.length,h=[],f=0;f<m;f++){var n=k[f],v=n.rowData,n=n.oldRow;if(-1==l.inArray(v,
h))for(var p=0;p<e;p++)if(v[b]==c[p][b]){h.push(v);for(var s in n)a.removeClass({rowData:v,dataIndx:s,cls:d})}}a=[];for(f=0;f<m;f++)v=k[f].rowData,-1==l.inArray(v,h)&&a.push(k[f]);this.udata=a;return[]};f.commitDelete=function(c,b){for(var a=this.ddata,d=a.length,k=this.udata,m,e,h;d--;){m=a[d].rowData;e=m[b];h=c.length;if(!h)break;for(;h--;)if(e==c[h][b]){c.splice(h,1);a.splice(d,1);for(e=k.length;e--;)k[e].rowData==m&&k.splice(e,1);break}}};f.commitUpdateAll=function(){for(var c=this.that,b=this.options.trackModel.dirtyClass,
a=this.udata,d=0,k=a.length;d<k;d++){var m=a[d],e=m.oldRow,m=m.rowData,h;for(h in e)c.removeClass({rowData:m,dataIndx:h,cls:b})}this.udata=[]};f.commitAddAll=function(){this.adata=[]};f.commitDeleteAll=function(){for(var c=this.ddata,b=this.udata,a=b.length,d,k=c.length,m=0;0<a&&m<k;m++){for(d=c[m].rowData;a--;)b[a].rowData==d&&b.splice(a,1);a=b.length}c.length=0};f.commit=function(c){var b=this.that,a=c?c.history:null,a=null==a?!1:a,d=[],d=[],k=[],m=b.options.dataModel.recIndx;if(null==c)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var e=c.type;c=c.rows;"add"==e?c?d=this.commitAdd(c,m):this.commitAddAll():"update"==e?c?k=this.commitUpdate(c,m):this.commitUpdateAll():"delete"==e&&(c?this.commitDelete(c,m):this.commitDeleteAll())}d=d.concat(k);d.length&&(b._digestData({source:"commit",checkEditable:!1,track:!1,history:a,rowList:d}),b.refreshView())};f.rollbackAdd=function(c,b){for(var a=this.adata,d=[],k=0,m=a.length;k<m;k++)d.push({type:"delete",rowData:a[k].rowData});this.adata=
[];return d};f.rollbackDelete=function(c,b){for(var a=this.ddata,d=[],k=a.length-1;0<=k;k--){var m=a[k];d.push({type:"add",rowIndx:m.rowIndx,newRow:m.rowData})}this.ddata=[];return d};f.rollbackUpdate=function(c,b){for(var a=this.that,d=this.options.trackModel.dirtyClass,k=this.udata,m=[],e=0,h=k.length;e<h;e++){var f=k[e],l=f.rowData,n={},p=f.oldRow;if(null!=f.recId){var f=[],s;for(s in p)n[s]=l[s],f.push(s);a.removeClass({rowData:l,dataIndx:f,cls:d,refresh:!1});m.push({type:"update",rowData:l,newRow:p,
oldRow:n})}}this.udata=[];return m};f.rollback=function(c){var b=this.that,a=b.options.pageModel,d=c&&null!=c.refresh?c.refresh:!0;c=c&&null!=c.type?c.type:null;var k=[],k=[],m=[],e=[],h=b.options.dataModel.data;if(null==c||"update"==c)m=this.rollbackUpdate(a,h);if(null==c||"delete"==c)k=this.rollbackDelete(a,h);if(null==c||"add"==c)e=this.rollbackAdd(a,h);k=k.concat(e,m);b._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:k});d&&b.refreshView()};n=n.pqGrid.prototype;
n.getChanges=function(c){this.blurEditor({force:!0});if(c){var b=c.format;if(b){if("byVal"==b)return this.iUCData.getChangesValue(c);if("raw"==b)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};n.rollback=function(c){this.blurEditor({force:!0});this.iUCData.rollback(c)};n.isDirty=function(c){return this.iUCData.isDirty(c)};n.commit=function(c){this.iUCData.commit(c)};n.updateRow=function(c){for(var b=c.rowList||[{rowIndx:c.rowIndx,newRow:c.newRow||c.row,rowData:c.rowData,rowIndxPage:c.rowIndxPage}],
a=[],d=0,k=b.length;d<k;d++){var m=this.normalize(b[d]),e=m.newRow,h=m.rowData,f={};if(h){for(var l in e)f[l]=h[l];m.oldRow=f;m.type="update";a.push(m)}}if(!a.length||!1===this._digestData({source:c.source||"update",history:c.history,checkEditable:c.checkEditable,track:c.track,allowInvalid:c.allowInvalid,rowList:a}))return!1;!1!==c.refresh&&(1<a.length?this.refresh():this.refreshRow({rowIndx:a[0].rowIndx}))};n.getRecId=function(c){c.dataIndx=this.options.dataModel.recIndx;c=this.getCellData(c);return null==
c?null:c};n.getCellData=function(c){var b=c.rowData||this.getRowData(c);c=c.dataIndx;return b?b[c]:null};n.getRowData=function(c){if(!c)return null;var b=c.rowData;if(null!=b)return b;b=c.recId;if(null==b){var b=c.rowIndx,b=null!=b?b:c.rowIndxPage+this.rowIndxOffset,a=this.get_p_data()[b];return a}a=this.options.dataModel;c=a.recIndx;for(var d=a.data,k=0,m=d.length;k<m;k++)if(a=d[k],a[c]==b)return a;return null};n.deleteRow=function(c){for(var b=c.rowList||[{rowIndx:c.rowIndx,rowIndxPage:c.rowIndxPage}],
a=[],d=0,k=b.length;d<k;d++){var m=this.normalize(b[d]);m.oldRow=m.rowData;m.type="delete";a.push(m)}if(!a.length)return!1;this._digestData({source:c.source||"delete",history:c.history,track:c.track,rowList:a});!1!==c.refresh&&this.refreshView()};n.addRow=function(c){var b=c.rowList||[{rowIndx:c.rowIndx,rowIndxPage:c.rowIndxPage,newRow:c.newRow||c.rowData}],a=[],d=this.options.dataModel,k=d.data;null==k&&(d.data=[],k=d.data);for(var d=0,m=b.length;d<m;d++){var e=this.normalize(b[d]);e.type="add";
a.push(e)}if(!a.length||!1===this._digestData({source:c.source||"add",history:c.history,track:c.track,checkEditable:c.checkEditable,rowList:a}))return!1;!1!==c.refresh&&this.refreshView();c=a[0].rowIndx;return null==c?k.length-1:c}})(jQuery);
(function(l){var n=function(c){this.focusSelection=null};n.prototype.inViewRow=function(c){var b=this.that,a=b.finalV;return c<b.options.freezeRows?!0:c>=b.initV&&c<=a};var f=function(c){this.that=c;this.options=c=c.options;this.selection=[];this.hclass=" pq-state-select "+(c.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cRows=f;var d=function(c){var b=c.options;this.that=c;this.selection=[];this.hclass="pq-state-select "+(b.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cCells=d;d=d.prototype=
new n;n=f.prototype=new n;n.isSelected=function(c){return(c=c.rowData||this.that.getRowData(c))?!0===c.pq_rowselect:null};n.selectRange=function(c){var b=c.range,a=b.r1,b=b.r2;c=c.evt;var d=[];if(a>b)var k=a,a=b,b=k;for(;a<=b;a++)d.push({rowIndx:a});this.add({rows:d,evt:c})};d.removeAll=function(c){var b=this.that;c=b.get_p_data();var a=this.hclass;if(c&&c.length)for(b.$tbl&&b.$tbl.children().children().children().removeClass(a),b=0,a=c.length;b<a;b++){var d=c[b];d&&delete d.pq_cellselect}};n.removeAll=
function(c){c=c||{};var b=this.that,a=c.all,d=this.hclass,k=b.get_p_data();if(k&&k.length)for(c.refresh&&b.$tbl&&b.$tbl.children().children().removeClass(d),k=a?k:b.pdata,c=0,b=k.length;c<b;c++)(a=k[c])&&delete a.pq_rowselect};d.isSelected=function(c){var b=this.that,a=c.rowData||b.getRowData(c),d=c.dataIndx;c=c.colIndx;if(null==c&&null==d||null==a)return null;d=null==d?b.colModel[c].dataIndx:d;return!0==(a.pq_cellselect&&a.pq_cellselect[d])};n.getSelection=function(){for(var c=this.that,b=c.selection().address(),
a=[],d=0,k=b.length;d<k;d++){var m=b[d];if("row"==m.type)for(var e=m.r2,m=m.r1;m<=e;m++){var h=c.getRowData({rowIndx:m});a.push({rowIndx:m,rowData:h})}}return a};d.getSelection=function(){for(var c=this.that,b=c.selection(),a=c.colModel,b=b.address(),d=[],k=0,m=b.length;k<m;k++){var e=b[k],h=e.type;if("block"==h||"cell"==h||"column"==h)for(var h=e.r2,f=e.c1,l=e.c2,e=e.r1;e<=h;e++)for(var n=c.getRowData({rowIndx:e}),p=f;p<=l;p++)d.push({rowIndx:e,rowData:n,colIndx:p,dataIndx:a[p].dataIndx})}return d};
d.inViewCell=function(c,b){var a=this.that,d=a.options.freezeCols;return this.inViewRow(c)?b<d||b>=a.initH&&b<=a.finalH:!1};d._add=function(c){var b=this.that;c=b.normalize(c);var a=c.rowIndxPage,d=c.rowData,k,m=c.colIndx,e=c.dataIndx,h=this.isSelected({rowData:d,dataIndx:e});if(null==h)return!1;var f=b.iMerge.ismergedCell(c.rowIndx,m)||this.inViewCell(a,m);!1===h&&(f&&(b=b.getCell({rowIndxPage:a,colIndx:m}))&&b.addClass(this.hclass),k=(d.pq_cellselect=d.pq_cellselect||{})[e]=!0);if(k)return c};n._add=
function(c){var b=this.that,a=b.normalize(c),d=a.rowIndxPage;c=a.rowData;var k=this.isSelected({rowData:c});a.rowIndxPage=d;if(null==k)return!1;a=this.inViewRow(d);!1===k&&(!c.pq_hidden&&a&&(b=b.getRow({rowIndxPage:d}),b.length&&b.addClass(this.hclass)),c.pq_rowselect=!0)};d.add=function(c){this._add(c)};n.add=function(c){var b=c.rows;if(b&&"function"==typeof b.push){c=0;for(var a=b.length;c<a;c++){var d=b[c];d.trigger=!1;this._add(d)}}else this._add(c)};n._remove=function(c){var b=this.that,a=b.normalize(c);
c=a.rowIndx;var d=a.rowIndxPage,k=a.rowData,a=a.$tr;if(this.isSelected({rowData:k}))return this.inViewRow(d)&&(a=b.getRow({rowIndxPage:d}))&&(a.removeClass(this.hclass),a.removeAttr("tabindex")),k.pq_rowselect=!1,{rowIndx:c,rowData:k}};n.remove=function(c){var b=c.rows;if(b&&"function"==typeof b.push){c=0;for(var a=b.length;c<a;c++){var d=b[c];d.trigger=!1;this._remove(d)}}else this._remove(c)};d.selectBlock=function(c){var b=this.that,a=this.hclass,d=c.range,k=d.r1,m=d.c1,e=d.r2,d=d.c2,h=b.initH,
f=b.finalH,n=b.options.freezeCols,v=[],p=b.colModel,s=[];c=c.remove?!0:!1;for(var r=m;r<=d;r++)v[r]=p[r].dataIndx;for(;k<=e;k++)if(p=b.normalize({rowIndx:k}),r=p.rowData,p=p.rowIndxPage,r){var t=r.pq_cellselect=r.pq_cellselect||{};if(this.inViewRow(p))for(r=m;r<=d;r++){var q=v[r];if(c&&t[q]||!c&&!t[q]){if(r<n||r>=h&&r<=f){var u=b.getCell({rowIndxPage:p,colIndx:r});u.length&&s.push(u[0])}t[q]=c?void 0:!0}}else for(r=m;r<=d;r++)q=v[r],t[q]=c?void 0:!0}if(s.length)l(s)[c?"removeClass":"addClass"](a)}})(jQuery);
(function(l){var n=!0;l(function(){var d=l("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);d[0].indeterminate=!0;d.on("change",function(){n=!1});d.click();d.remove()});var f=(l.paramquery.cCheckBoxColumn=function(d,c){var b=this;this.that=d;this.options=d.options;this.column=c;c.cb=l.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},c.cb);c._render=function(a){var b=a.rowData;if(!b.pq_gtitle&&!b.pq_gsummary)return"<input type='checkbox' "+
(c.cb.check===a.cellData?"checked":"")+" />"};this.dataIndx=c.dataIndx;var a=d.element,g=d.eventNamespace;d.on("dataAvailable",function(){d.one("dataReady",function(){return b._onDataReady()})}).on("dataReady",function(){b.setValCBox()});a.on("change"+g,function(a){var c=a.target;if("checkbox"==c.type&&l(c).closest(".pq-grid")[0]==this)return b.onCheckBoxChange(a)});d.on("cellKeyDown",function(a,c){return b.onCellKeyDown(a,c)});d.on("refreshHeader",function(a,c){return b.refreshHeader(a,c)})}).prototype=
new l.paramquery.cClass;f.hasHeaderChkBox=function(){return this.column.cb.header};f.setValCBox=function(){if(this.hasHeaderChkBox()){var d=this.that,c=this.options,b=this.dataIndx,a=this.column.cb,g=a.all,k=d.rowIndxOffset,k="remote"!=c.pageModel.type&&g?0:k,c=g?c.dataModel.data:d.pdata,g=null,m=0,e=0;if(c){for(var h=0,f=0,l=c.length;f<l;f++){var n=c[f],p=f+k;d.isEditableRow({rowIndx:p})&&d.isEditableCell({rowIndx:p,dataIndx:b})&&(h++,n[b]===a.check?m++:e++)}m==h&&h?g=!0:e==h&&(g=!1);this.$inp&&
this.$inp.pqval({val:g})}}};f.onHeaderChange=function(d){for(var c=l(d.target),b=this.that,a=this.column,g=a.dataIndx,k=b.options,m=a.cb,e=m.all,h=e?k.dataModel.data:b.pdata,f=b.rowIndxOffset,f="remote"!=k.pageModel.type&&e?0:f,k=[],a={column:a,dataIndx:g,source:"header"},c=c[0].checked,e=0,n=h.length;e<n;e++){var v=e+f,p=h[e],s={},r={};s[g]=c?m.check:m.uncheck;r[g]=p[g];k.push({rowIndx:v,rowData:p,newRow:s,oldRow:r,type:"update"})}g={rowList:k,source:"checkbox"};g.history=g.track=m.select?!1:null;
a.check=c;a.rows=k;if(!1===b._trigger("beforeCheck",d,a)||!1===b._digestData(g))return b.refreshHeader(),!1;b.refresh({header:!1});k=a.rows=g.rowList;b._trigger("check",d,a);m.select&&b.selection({type:"row",method:c?"add":"remove",rows:k})};f.refreshHeader=function(d,c){var b=this;if(this.hasHeaderChkBox()){var a=this.that;if(a.pdata&&(a=a.getCellHeader({dataIndx:this.dataIndx}))){var g=this.$inp=a.find("input");this.setValCBox();if(n)g.on("click",function(a){null==g.data("pq_value")&&(g[0].checked=
!0,g.data("pq_value",!0),b.onHeaderChange(a))});g.on("change",function(a){b.onHeaderChange(a)})}}};f._onDataReady=function(){var d=this.that,c=this.options,b=c.dataModel.data,c="remote"==c.pageModel.type?d.rowIndxOffset:0,a=this.column,g=a.cb,k=a.dataIndx;if(null!=k&&b){for(var m=[],e=0,h=b.length;e<h;e++){var f=b[e];f[k]===g.check&&m.push({rowIndx:e+c,rowData:f})}if(!1!==d._trigger("check",null,{rows:m,column:a,dataIndx:k,source:"dataAvailable"})&&g.select){for(e=0;e<h;e++)f=b[e],f[k]===g.check&&
(f.pq_rowselect=!0);d.selection().refresh()}}this.setValCBox()};f.rowSelect=function(d,c){var b=this.that,a=c.rows,g=c.rowData,k=this.dataIndx;if(a)for(var m=0,e=a.length;m<e;m++){var g=a[m],h=g.rowIndx,g=g.rowData;g[k]=!0;b.refreshCell({rowIndx:h,dataIndx:k})}else g&&(g[k]=!0,h=c.rowIndx,b.refreshCell({rowIndx:h,dataIndx:k}));this.setValCBox()};f.rowUnSelect=function(d,c){var b=this.that,a=c.rows,g=c.rowData,k=this.dataIndx;if(a)for(var m=0,e=a.length;m<e;m++){var g=a[m],h=g.rowIndx,g=g.rowData;
g[k]=!1;b.refreshCell({rowIndx:h,dataIndx:k})}else g&&(g[k]=!1,h=c.rowIndx,b.refreshCell({rowIndx:h,dataIndx:k}));this.setValCBox()};f.onCheckBoxChange=function(d){var c=this.that,b=this.column.cb,a=l(d.target),g=a.closest(".pq-grid-cell");if(g.length){var g=c.getCellIndices({$td:g}),g=c.normalize(g),k=g.rowData,m=g.rowIndx,e=g.dataIndx;if(e==this.dataIndx){var a=a[0].checked,h={},f={};h[e]=a?b.check:b.uncheck;f[e]=k[e];k=[{rowData:k,rowIndx:m,oldRow:f,newRow:h,type:"update"}];g.check=a;g.rows=k;
if(!1===c._trigger("beforeCheck",d,g))return c.refreshCell({rowIndx:m,dataIndx:e}),!1;k={source:"checkbox",rowList:k};k.history=k.track=b.select?!1:null;if(!1===c._digestData(k))return c.refreshCell({rowIndx:m,dataIndx:e}),!1;c.refreshRow({rowIndx:m});k=g.rows=k.rowList;c._trigger("check",d,g);b.select&&c.selection({type:"row",method:a?"add":"remove",rows:k});this.setValCBox()}}};f.onCellKeyDown=function(d,c){if(c.dataIndx==this.dataIndx&&(13==d.keyCode||32==d.keyCode))return l(d.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var l=0,n=["moz","webkit"],f=0;!window.requestAnimationFrame&&f<n.length;f++)window.requestAnimationFrame=window[n[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[f]+"CancelAnimationFrame"]||window[n[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d){var c=(new Date).getTime(),c=Math.max(0,16-(c-l));return window.setTimeout(function(){l=(new Date).getTime();d()},c)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(d){clearTimeout(d)})})();
(function(l){function n(d){this.that=d;var c=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=d.options.rowHeight;this.colwd=60;d.on("contMouseDown",function(b,a){return c._onContMouseDown(b,a)}).on("mouseDrag",function(b,a){return c._onMouseDrag(b,a)}).on("mouseStop",function(b,a){return c._onMouseStop(b,a)}).on("mousePQUp",function(b,
a){return c._onMousePQUp(b,a)}).on("rowMouseDown",function(b,a){return c._onRowMouseDown(b,a)}).on("cellMouseDown",function(b,a){return c._onCellMouseDown(b,a)}).on("refresh",function(b,a){setTimeout(function(){d.element&&d.focus()},0)}).on("cellMouseEnter",function(b,a){return c._onCellMouseEnter(b,a)}).on("rowMouseEnter",function(b,a){return c._onRowMouseEnter(b,a)})}l.paramquery.cMouseSelection=n;var f=n.prototype=new l.paramquery.cClass;f.inViewPort=function(d){var c=this.that.iRefresh,b=c.getEContHt(),
c=c.getEContWd()+1;d=d[0];var a=this.scrollLeft;if(b>=d.offsetTop+d.offsetHeight+this.marginTop)if("TD"==d.nodeName.toUpperCase()){if(c>=d.offsetLeft+d.offsetWidth+a)return!0}else return!0};f._onCellMouseDown=function(d,c){var b=this.that,a=c.rowIndx,g=b.iSelection,k=c.colIndx,m=b.options.selectionModel,e=m.mode;if("cell"!=m.type)b.focus(c);else if(null!=k)return g=g.address()[0],d.shiftKey&&"single"!=e&&g?(e=g.firstR,g=g.firstC,b.range({r1:e,c1:g,r2:a,c2:k,firstR:e,firstC:g}).select()):(this.mousedown=
{r1:a,c1:k},b.range({r1:a,c1:k,firstR:a,firstC:k}).select()),b.focus(c),!0};f._onCellMouseEnter=function(d,c){var b=this.that,a=b.options.selectionModel,g=a.type,a=a.mode;if(this.mousedown&&"single"!=a){if("cell"==g){var g=this.mousedown,a=g.r1,k=g.c1,m=c.rowIndx,e=c.colIndx;if(a==m&&k==e||g.r2==m&&g.c2==e)return;this.mousedown.r2=m;this.mousedown.c2=e;b.scrollCell({rowIndx:m,colIndx:e});b.range({r1:a,c1:k,r2:m,c2:e,firstR:a,firstC:k}).select()}b.focus(c)}};f._onRowMouseEnter=function(d,c){var b=
this.that,a=b.options.selectionModel,g=a.mode;"row"==a.type&&this.mousedown&&"single"!=g&&(a=this.mousedown.r1,g=c.rowIndx,a==g?b.range({r1:a,firstR:a},!1).select():this.mousedown.r2!=g&&(this.mousedown.r2=g,b.scrollRow({rowIndx:g}),b.range({r1:a,r2:g,firstR:a},!1).select()))};f._onRowMouseDown=function(d,c){var b=this.that,a=c.rowIndx,g=b.iSelection,k;k=b.options.selectionModel;var m=l(d.originalEvent.target).hasClass("pq-grid-number-cell"),e=k.mode;if(("row"==k.type||k.row&&m)&&null!=a)return k=
b.iSelection.address(),d.shiftKey&&"single"!=e?((g=k.length)&&"row"==k[g-1].type&&(g=k[g-1],g.r1=g.firstR,g.r2=a,g.c1=g.c2=g.type=void 0),b.range(k).select()):(d.ctrlKey||d.metaKey)&&"single"!=e?(k=b.iRows.isSelected({rowIndx:a}),g[k?"removeRow":"add"]({r1:a,firstR:a})):(this.mousedown={r1:a,y1:d.pageY,x1:d.pageX},b.range({r1:a,firstR:a},!1).select()),m&&setTimeout(function(){b.focus({rowIndxPage:c.rowIndxPage,colIndx:b.getFirstVisibleCI(!0)})},0),!0};f._onContMouseDown=function(d,c){this.that.options.swipeModel.on&&
(this._stopSwipe(!0),this.swipedown={x:d.pageX,y:d.pageY});return!0};f._onMousePQUp=function(d,c){this.mousedown=null};f._stopSwipe=function(d){d&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};f._onMouseStop=function(d,c){var b=this,a=this.that;if(this.swipedownPrev){var g=a.options.swipeModel,a=this.swipedownPrev,k=a.ts,m=(new Date).getTime()-k,e=d.pageX,h=d.pageY,f=e-a.x,l=h-a.y;if(Math.sqrt(f*f+l*l)/m>g.ratio){var n=
0,p=g.repeat;b._stopSwipe();var s=function(){n+=g.speed;p--;b._onMouseDrag({pageX:e+n*f/m,pageY:h+n*l/m});0<p?b.intID=window.requestAnimationFrame(s):b._stopSwipe(!0)};s()}else b.swipedown=null,b.swipedownPrev=null}};f._onMouseDrag=function(d,c){var b=this.that.options;if(this.swipedown){var a=this.swipedown,g=a.x,k=a.y,m=d.pageX,e=d.pageY;this.swipedownPrev={x:g,y:k,ts:(new Date).getTime()};var h=b.scrollModel.smooth;if(!b.virtualY||h)this.scrollVertSmooth(k,e),this.syncScrollBarVert();if(!b.virtualX||
h)this.scrollHorSmooth(g,m),this.syncScrollBarHor();a.x=m;a.y=e}return!0};f.updateTableY=function(d){if(0==d)return!1;var c=this.that,b=this.getTableForVertScroll(),c=c.iRefresh.getEContHt();if(!b||!b.length)return!1;var a=b.data("offsetHeight")-1,g=this.scrollTop-d;this.setScrollTop(0>g?0:0>d&&0<c-a+g?a-c:g,b,c);return!0};f.setScrollTop=function(d,c,b){0<=d&&(this.scrollTop=d=Math.round(d),c.parent("div").scrollTop(d))};f.getScrollLeft=function(d){return this.scrollLeft};f.getScrollTop=function(d){return this.scrollTop};
f.setScrollLeft=function(d,c,b,a){0<=d&&(this.scrollLeft=d=Math.round(d),b=b?b.parent():l(),b=b.add(c?c.parent("div"):l()),b.scrollLeft(d))};f.scrollVertSmooth=function(d,c){d!=c&&this.updateTableY(c-d)};f.scrollHorSmooth=function(d,c){if(d!=c){var b=this.that,a=b.options,g=c-d,k=this.getTableForHorScroll(),m=this.getTableHeaderForHorScroll(),b=b.iRefresh.getEContWd();if(k||m){var e=k?k:m,a=a.virtualX?this.getScrollWidth(e):e.data("scrollWidth"),g=this.scrollLeft-g;this.setScrollLeft(0>g?0:0>a-b-
g?a-b:g,k,m,b)}}};f.syncViewWithScrollBarVert=function(d){if(null!=d){var c=this.that,b=this.getTableForVertScroll();if(b&&b.length){c.options.editModel.indices&&c.blurEditor({force:!0});var a=b.data("offsetHeight"),c=c.iRefresh.getEContHt();if((d*=a-c)||0===d)0>d&&(d=0),this.setScrollTop(d,b,c)}}};f.syncViewWithScrollBarHor=function(d){if(null!=d){var c=this.that,b=this.getTableForHorScroll(),a=this.getTableHeaderForHorScroll();if(b||a){var g=c.options;g.editModel.indices&&c.blurEditor({force:!0});
var k=b?b:a,g=g.virtualX?this.getScrollWidth(k):k.data("scrollWidth"),c=c.iRefresh.getEContWd();d*=g-c;g&&c&&(0>d&&(d=0),this.setScrollLeft(d,b,a,c))}}};f.resetMargins=function(){this.scrollTop=this.scrollLeft=0};f.syncHeaderViewWithScrollBarHor=function(d){if(null!=d){var c=this.that,b=this.getTableHeaderForHorScroll();if(b){var a=c.options,g=a.freezeCols;a.editModel.indices&&c.blurEditor({force:!0});var a=b.data("scrollWidth"),k=c.iRefresh.getEContWd();d=c.calcWidthCols(g,d+g);a&&k&&(0>d&&(d=0),
b.css("marginLeft",-d))}}};f.syncScrollBarVert=function(){var d=this.that,c=this.getTableForVertScroll();if(c&&c.length){var c=c.data("offsetHeight"),b=d.iRefresh.getEContHt(),c=this.scrollTop/(c-b);0<=c&&1>=c&&d.vscroll.widget().hasClass("pq-sb-vert")&&d.vscroll.option("ratio",c)}};f.syncScrollBarHor=function(){var d=this.that,c=d.options,b=this.getTableForHorScroll(),a=this.getTableHeaderForHorScroll();if(b||a)b=b?b:a,c=c.virtualX?this.getScrollWidth(b):b.data("scrollWidth"),b=d.iRefresh.getEContWd(),
c=this.scrollLeft/(c-b),0<=c&&1>=c&&d.hscroll.widget().hasClass("pq-sb-horiz")&&d.hscroll.option("ratio",c)};f.getTableForVertScroll=function(){var d=this.that,c=d.pqpanes;if((d=d.$tbl)&&d.length)return c.h&&c.v?d=l([d[2],d[3]]):c.v?d=l([d[0],d[1]]):c.h&&(d=l(d[1])),d};f.getTableForHorScroll=function(){var d=this.that,c=d.pqpanes,b=[],a=d.$tbl;if(a&&a.length)return c.h&&c.v?b.push(a[1],a[3]):c.v?b.push(a[1]):c.h?b.push(a[0],a[1]):b.push(a[0]),d.tables.length&&(d=d.tables[0].$tbl,c.v?b.push(d[1]):
b.push(d[0])),l(b)};f.getTableHeaderForHorScroll=function(){var d=this.that,c=d.pqpanes;if((d=d.$tbl_header)&&d.length)return d=c.vH?l(d[1]):l(d[0]),d.parent()};f.scrollRowNonVirtual=function(d){var c=this.that,b=c.options,a=d.rowIndxPage,g=d.rowIndx;d=c.iRefresh.getEContHt();a=null==a?g-c.rowIndxOffset:a;b=parseInt(b.freezeRows);if(!(a<b)){var b=c.get$Tbl(a),k=c.getRow({rowIndxPage:a})[0];k&&(c=b[0].offsetTop+1,a=k.offsetHeight,g=this.getScrollTop(),k=k.offsetTop-1,0>c+k-g?(c=c+k+-1,this.setScrollTop(0>
c?0:c,b,d),this.syncScrollBarVert()):k+a-g>d&&(this.setScrollTop(a+k-d,b,d),this.syncScrollBarVert()))}};f.scrollColumnNonVirtual=function(d){var c=this.that,b=d.colIndx,b=null==b?c.getColIndx({dataIndx:d.dataIndx}):b,a=c.options.freezeCols;if(!(b<a)){d=c._calcRightEdgeCol(b).width;var b=c._calcRightEdgeCol(b-1).width,a=c._calcRightEdgeCol(a-1).width,g=this.getTableForHorScroll(),k=this.getTableHeaderForHorScroll(),c=c.iRefresh.getEContWd(),m=this.scrollLeft;d-m>c?(this.setScrollLeft(d-c,g,k,c),this.syncScrollBarHor()):
b-a<m&&(this.setScrollLeft(b-a,g,k,c),this.syncScrollBarHor())}}})(jQuery);
(function(l){var n=null,f=!1,d="",c=l.paramquery.pqGrid.prototype,b=c.options,a={on:!0,header:!0,zIndex:1E4},g={on:!0},k={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};b.pasteModel=b.pasteModel||k;b.copyModel=b.copyModel||a;b.cutModel=b.cutModel||g;c._setGlobalStr=function(a){d=a};c.canPaste=function(){return d?!0:!1};c.copy=function(){n=new m(this);n.copy();n=null};c.paste=function(a){n=new m(this);n.paste(a);n=null};c.cut=function(){n=new m(this);n.copy({cut:!0,source:"cut"});
n=null};c.clear=function(){this.iSelection.clear()};var m=function(a,b){this.that=a},c=m.prototype;c.createClipBoard=function(){var a=l("#pq-grid-excel-div"),a=this.that.options.copyModel,b=l("#pq-grid-excel");0==b.length&&(a=l("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=l("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.on("focusin",function(a){a.stopPropagation()});b.select()};c.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=l(window).scrollTop(),c=l(window).scrollLeft();a.focus();var a=l(window).scrollTop(),d=l(window).scrollLeft();b==a&&c==d||window.scrollTo(c,b)};c.clearClipBoard=function(){l("#pq-grid-excel").val("")};c.copy=function(a){return this.that.iSelection.copy(a)};c.paste=function(a){a=a||{};var b=this.that,c=a.dest,e=a.clip,g=e?e.length?e.val():"":d,g=g.replace(/\n$/,
""),e=g.split("\n"),k=e.length,m,f=b.colModel,n=b.readCell,u=b.options.pasteModel,w="row",x=!1,z=f.length;if(u.on&&0!=g.length&&0!=k){g={rows:e};if(!1===b._trigger("beforePaste",null,g))return!1;var A=u.type,B,E,D,w=(c?b.range(c):b.selection())._areas;(D=w.length?w[0]:null)&&b.getRowData({rowIndx:D.r1})?(w="row"==D.type?"row":"cell",B=D.r1,E=D.r2,c=D.c1,D=D.c2):(w="cell",D=c=E=B=0);var F,N;"replace"==A?(F=B,N=E-B+1<k?"extend":"repeat"):"append"==A?(F=E+1,N="extend"):"prepend"==A&&(F=B,N="extend");
var L,k="extend"==N?k:E-B+1,J;B=0;a=a.rowList||[];for(var I=E=0;I<k;I++){var G=e[B],M=I+F,H="replace"==A?b.getRowData({rowIndx:M}):null,K=H?{}:null,S={};void 0===G&&"repeat"===N&&(B=0,G=e[B]);B++;var O=G.split("\t");if(!m)if("cell"==w){m=O.length;L=D-c+1<O.length?"extend":"repeat";m="extend"==L?m:D-c+1;if(isNaN(m))throw"lenH NaN. assert failed.";m+c>z&&(m=z-c)}else m=z,c=0;var U=0,P=0,G=0;J=m;for(var V=O.length,P=0;P<J;P++){U>=V&&(U=0);var T=f[P+c],W=O[U],R=T.dataIndx;!1===T.copy?(G++,"extend"==L&&
J+c<z&&J++):(U++,S[R]=W,K&&(K[R]=n(H,T)))}!1==l.isEmptyObject(S)&&(O="update",null==H&&(x=!0,O="add"),a.push({newRow:S,rowIndx:M,rowData:H,oldRow:K,type:O}),E++)}b._digestData({rowList:a,source:"paste",allowInvalid:u.allowInvalid,validate:u.validate});b[x?"refreshView":"refresh"]();u.select&&("cell"==w?b.range({r1:F,c1:c,r2:F+E-1,c2:"extend"==L?c+m-1+G:D}).select():b.range({r1:F,r2:F+E-1}).select());b._trigger("paste",null,g)}};l(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||
a.metaKey){var b=l(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.hasClass("pq-grid-cont")){var c=b.closest(".pq-grid");if(n||b.length&&c.length){if(!n){try{var d=c.pqGrid("getInstance").grid;if(d.option("selectionModel.native"))return!0}catch(g){return!0}n=new m(d,b);n.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?n.copy({clip:l("#pq-grid-excel")}):"88"==a.keyCode?n.copy({cut:!0,clip:l("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(f=!0,
n.clearClipBoard(),window.setTimeout(function(){n&&(n.paste({clip:l("#pq-grid-excel")}),n.destroyClipBoard(),n=null);f=!1},0)):(b=l("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&n.that._onKeyPressDown(a))}}}else if(b=a.keyCode,c=l.ui.keyCode,b==c.UP||b==c.DOWN||b==c.LEFT||b==c.RIGHT||b==c.PAGE_UP||b==c.PAGE_DOWN){if(e)return!1;b=l(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))e=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;f||!n||a.ctrlKey||a.metaKey||-1==
l.inArray(b,[17,91,93,224])||(n.destroyClipBoard(),n=null);e&&(a=l(a.target),a.hasClass("pq-grid-row")||a.hasClass("pq-grid-cell")||(e=!1))});var e=!1})(jQuery);
(function(l){var n=l.paramquery.pqGrid.prototype.options,f={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};n.historyModel=n.historyModel||f;n=(l.paramquery.cHistory=function(d){var c=this;this.that=d;this.options=d.options;this.records=[];this.id=this.counter=0;d.on("keyDown",function(b,a){return c._onKeyDown(b,a)}).on("dataAvailable",function(b,a){"filter"!=a.source&&c.reset()})}).prototype=new l.paramquery.cClass;n._onKeyDown=function(d,c){var b=d.ctrlKey||d.metaKey;if(b&&"90"==d.keyCode)return this.undo(),
!1;if(b&&"89"==d.keyCode)return this.redo(),!1};n.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};n.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};n.increment=function(){var d=this.records,c=d.length;
this.id=c?d[c-1].id+1:0};n.push=function(d){var c=this.canRedo(),b=this.records,a=this.counter;b.length>a&&b.splice(a,b.length-a);b[a]=l.extend({id:this.id},d);this.counter++;d=this.that;var g,k;1==this.counter&&(g=!0);c&&this.counter==b.length&&(k=!1);d._trigger("history",null,{type:"add",canUndo:g,canRedo:k,num_undo:this.counter,num_redo:0})};n.canUndo=function(){return 0<this.counter?!0:!1};n.canRedo=function(){return this.counter<this.records.length?!0:!1};n.processCol=function(d,c){var b=this.that;
if(d.length){var a="add"==d.type;b[(c?a:!a)?"addColumn":"deleteColumn"]({colList:d,history:!1})}};n.undo=function(){var d=this.canRedo(),c=this.that,b=!1,a=this.options.historyModel,g=this.records;if(0<this.counter)this.counter--;else return!1;for(var k=g[this.counter],g=(g=k.rowList)?g:[],k=(k=k.colList)?k:[],m=[],e=0,h=g.length;e<h;e++){var f=g[e],l=f.newRow,n=f.rowData,p=f.type,s=f.oldRow,f=f.rowIndx;"update"==p?(f=c.getRowIndx({rowData:n}).rowIndx,m.push({type:p,rowIndx:f,rowData:n,oldRow:l,newRow:s})):
"add"==p?(b=!0,m.push({type:"delete",rowData:l})):"delete"==p&&(b=!0,m.push({type:"add",rowIndx:f,newRow:n}))}k.length?this.processCol(k):(c._digestData({history:!1,source:"undo",checkEditable:a.checkEditable,checkEditableAdd:a.checkEditableAdd,allowInvalid:a.allowInvalid,rowList:m}),c[b?"refreshView":"refresh"]({source:"undo"}));var r,t;!1===d&&(r=!0);0==this.counter&&(t=!1);c._trigger("history",null,{canUndo:t,canRedo:r,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};n.redo=function(){var d=this.canUndo(),c=this.that,b=this.options.historyModel,a=this.counter,g=this.records;if(a==g.length)return!1;for(var k=!1,m=g[a],a=(a=m.rowList)?a:[],m=(m=m.colList)?m:[],e=[],h=0,f=a.length;h<f;h++){var l=a[h],n=l.newRow,p=l.rowData,s=l.type,r=l.oldRow,l=l.rowIndx;"update"==s?(l=c.getRowIndx({rowData:p}).rowIndx,e.push({type:s,rowIndx:l,rowData:p,oldRow:r,newRow:n})):"add"==s?(k=!0,e.push({type:"add",rowIndx:l,newRow:n})):"delete"==s&&(k=!0,e.push({type:"delete",
rowData:p}))}m.length?this.processCol(m,!0):(c._digestData({history:!1,source:"redo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:e}),c[k?"refreshView":"refresh"]({source:"redo"}));this.counter<g.length&&this.counter++;var t,q;!1==d&&(t=!0);this.counter==this.records.length&&(q=!1);c._trigger("history",null,{canUndo:t,canRedo:q,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};l.paramquery.pqGrid.prototype.history=
function(d){return this.iHistory[d.method](d)}})(jQuery);
(function(l){var n=l.paramquery;n.filter=function(){var c={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:c,getAllConditions:function(){var b=[],a;for(a in c)b.push(a);return b}(),getConditions:function(b){var a=
[],d;for(d in c)c[d][b]&&a.push(d);return a},getTRConditions:function(){var b=[],a;for(a in c)c[a].TR&&b.push(a);return b}(),getWTRConditions:function(){var b=[],a;for(a in c)c[a].TR||b.push(a);return b}()}}();n.filter.rules={};n.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var f=function(c){this.that=c;c.on("load",function(){var b=c.options.dataModel.dataUF;b&&(b.length=0)})};n.cFilterData=f;var d=f.prototype;f.conditions={equal:function(c,b){if(c==b)return!0},contain:function(c,b){if(-1!=c.indexOf(b))return!0},notcontain:function(c,b){if(-1==c.indexOf(b))return!0},empty:function(c){if(0==c.length)return!0},notempty:function(c){if(0<c.length)return!0},begin:function(c,b){if(0==(c+"").indexOf(b))return!0},
notbegin:function(c,b){if(0!=c.indexOf(b))return!0},end:function(c,b){var a=c.lastIndexOf(b);if(-1!=a&&a+b.length==c.length)return!0},notend:function(c,b){var a=c.lastIndexOf(b);if(-1==a||a+b.length!=c.length)return!0},regexp:function(c,b){if(b.test(c))return b.lastIndex=0,!0},notequal:function(c,b){if(c!=b)return!0},great:function(c,b){if(c>b)return!0},gte:function(c,b){if(c>=b)return!0},between:function(c,b,a){if(c>=b&&c<=a)return!0},range:function(c,b){if(-1!=l.inArray(c,b))return!0},less:function(c,
b){if(c<b)return!0},lte:function(c,b){if(c<=b)return!0}};f.convert=function(c,b){c=null==c?"":c;"string"==b?c=l.trim(c).toUpperCase():"date"==b?c=Date.parse(c):"integer"==b?c=parseInt(c):"float"==b?c=parseFloat(c):"bool"==b&&(c=String(c).toLowerCase());return c};d.isMatchCellSingle=function(c,b){var a=c.dataType,d=c.value,k=c.value2,m=c.cbFn,e=b[c.dataIndx],e="regexp"==c.condition?null==e?"":e:f.convert(e,a);return m(e,d,k)?!0:!1};d.isMatchRow=function(c,b,a){if(0==b.length)return!0;for(var d=0;d<
b.length;d++){var k=this.isMatchCell(b[d],c);if("OR"==a&&k)return!0;if("AND"==a&&!k)return!1}if("AND"==a)return!0;if("OR"==a)return!1};d.getQueryStringFilter=function(){var c=this.that,b=c.options,a=b.stringify,b=b.filterModel,d=b.mode,c=this.getFilterData({CM:c.colModel,location:"remote"}),k="";b&&b.on&&c&&(c.length?(b={mode:d,data:c},k=!1===a?b:JSON.stringify(b)):k="");return k};d.filterLocalData=function(c){c=c||{};var b=this.that,a=c.apply,a=null==a?!0:a;c=this.getFilterData({CM:a?b.colModel:
c.CM});var d=b.options,k=d.dataModel,m=b.iSort,e=k.data,h=[],f=[],l=k.dataUF,n=d.filterModel,p=n.multiple,d=n?n.mode:null;e||(e=k.data=[]);l||(l=k.dataUF=[]);!1===a&&(e=e.slice());if(l.length){for(var s=0,r=l.length;s<r;s++)e.push(l[s]);0==m.readSorter().length&&m.sortLocalData(e);l=k.dataUF=[]}else if(c.length)m.saveOrder();else return{data:e,dataUF:l};this.isMatchCell=p?this.isMatchCellMultiple:this.isMatchCellSingle;if(n.on&&d&&c&&c.length){if(e.length)for(s=0,r=e.length;s<r;s++)m=e[s],this.isMatchRow(m,
c,d)?h.push(m):f.push(m);e=h;l=f;a&&(k.data=e,k.dataUF=l)}a&&(b._queueATriggers.filter={ui:{type:"local",filter:c}});return{data:e,dataUF:l}};d.getFilterData=function(c){var b=c.CM;if(!b)throw"CM N/A";var a=b.length,d=c.location,k=n.filter.getAllConditions,m=n.filter.getTRConditions;c=[];for(var e=n.cFilterData,h=function(a,b,c){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=c&&""!==c?!0:!1:-1!=l.inArray(a,k)?null!=b&&""!==b||-1==l.inArray(a,m)?!0:!1:!0},f=function(a,b){return"remote"==
d?(null==a?"":a).toString():e.convert(a,b)},C=0;C<a;C++){var v=b[C],p=v.filter;if(p&&p.on){var s=v.dataIndx,v=(v=v.dataType)&&"stringi"!=v&&"function"!=typeof v?v:"string",r=p.value,t=p.value2,q=p.condition;if(h(q,r,t)){if("between"==q)""===r||null==r?(q="lte",r=f(t,v)):""===t||null==t?(q="gte",r=f(r,v)):(r=f(r,v),t=f(t,v));else if("regexp"==q)if("remote"==d)r=r.toString();else{if("string"==typeof r)try{var u=p.modifiers,u=u?u:"gi",r=new RegExp(r,u)}catch(w){r=/.*/}}else if("range"==q)if(null==r)continue;
else if("string"==typeof r)r=f(r,v),r=r.split(/\s*,\s*/);else{if(r&&"function"==typeof r.push){if(0==r.length)continue;for(var r=r.slice(),p=0,x=r.length;p<x;p++)r[p]=f(r[p],v)}}else r=f(r,v);c.push({dataIndx:s,value:r,value2:t,condition:q,dataType:v,cbFn:"remote"==d?"":"function"==typeof q?q:e.conditions[q]})}}}return c}})(jQuery);
(function(l){l=l.paramquery;var n=l.cSort=function(d){this.that=d;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1};l.pqGrid.prototype.sort=function(d){d=d||{};var c=this,b=this.options,a=b.dataModel,g=a.data,k=b.sortModel.type;if(g&&g.length||"local"!=k){var m=b.editModel,b=this.iSort,e=b.getSorter(),h,f=d.evt,l=null==d.single?b.readSingle():d.single;h=b.readCancel();d.sorter?d.addon?(d.single=l,d.cancel=h,h=b.addon(d)):h=d.sorter:h=b.readSorter();if(h.length||e.length)m.indices&&c.blurEditor({force:!0}),
m={dataIndx:h.length?h[0].dataIndx:null,oldSorter:e,sorter:h,source:d.source,single:l},!1===c._trigger("beforeSort",f,m)?b.cancelSort():(b.resumeSort(),"local"==k&&b.saveOrder(),b.setSorter(h),b.setSingle(l),b.writeSorter(h),b.writeSingle(l),"local"==k?(a.data=b.sortLocalData(g),this._queueATriggers.sort={evt:f,ui:m},!1!==d.refresh&&this.refreshView()):"remote"==k&&(this._queueATriggers.sort={evt:f,ui:m},d.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){c._onDataAvailable()}})))}};
l=n.prototype;l.cancelSort=function(){this.cancel=!0};l.resumeSort=function(){this.cancel=!1};l.readSorter=function(){var d=this.that,c=d.columns,b,a=[];if((d=d.options.sortModel.sorter)&&(b=d.length)){for(;b--;)null==c[d[b].dataIndx]&&d.splice(b,1);a=a.concat(d)}return a=pq.arrayUnique(a,"dataIndx")};l.setSingle=function(d){this.single=d};l.getSingle=function(){return this.single};l.readSingle=function(){return this.that.options.sortModel.single};l.writeSingle=function(d){this.that.options.sortModel.single=
d};l.setCancel=function(d){this.cancel=d};l.getCancel=function(){return this.cancel};l.readCancel=function(){return this.that.options.sortModel.cancel};l.writeCancel=function(d){this.that.options.sortModel.cancel=d};l.writeSorter=function(d){this.that.options.sortModel.sorter=d};l.addon=function(d){d=d||{};var c=d.sorter,b=c[0].dataIndx,a=c[0].dir,g=d.single,k=d.cancel,c=this.readSorter();if(null==g)throw"sort single N/A";null!=b&&(g&&!d.tempMultiple?(c=c.length?[c[0]]:[],c[0]&&c[0].dataIndx==b?(b=
c[0].dir,b="up"===b?"down":k&&"down"===b?"":"up",""===b?c.length--:c[0].dir=b):c[0]={dataIndx:b,dir:a?a:"up"}):(d=this.inSorters(c,b),-1<d?(b=c[d].dir,"up"==b?c[d].dir="down":k&&"down"==b?c.splice(d,1):1==c.length?c[d].dir="up":c.splice(d,1)):c.push({dataIndx:b,dir:"up"})));return c};l.saveOrder=function(d){var c=this.that.options.dataModel;d=c.data;if(!(!d||!d.length||c.dataUF&&c.dataUF.length||this.getSorter().length&&null!=d[0].pq_order))for(var c=0,b=d.length;c<b;c++)d[c].pq_order=c};l.getQueryStringSort=
function(){if(this.cancel)return"";var d=this.sorters,c=this.that.options.stringify;return d.length?!1===c?d:JSON.stringify(d):""};l.getSorter=function(){return this.sorters};l.setSorter=function(d){this.sorters=d.slice(0)};l.inSorters=function(d,c){for(var b=0;b<d.length;b++)if(d[b].dataIndx==c)return b;return-1};l.sortLocalData=function(d){var c=this.sorters;c.length||(c=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(c,d)};l.compileSorter=function(d,c){var b=this.that,
a=b.columns,g=b.options,b=[],k=[],m=[],e=this.tmpPrefix,h=g.sortModel,l=h.useCache,h=h.ignoreCase,n=d.length;c=c?c:g.dataModel.data;for(g=0;g<n;g++){var v=d[g],p=v.dataIndx,s=a[p]||{},r="up"==(v.dir=v.dir||"up")?1:-1,t=s.sortType,t=pq.getFn(t),v=s.dataType||v.dataType||"string",v="string"==v&&h?"stringi":v,q=(s=l&&"date"==v)?e+p:p;k[g]=q;m[g]=r;b[g]=t?function(a,b){return function(c,d,e,g){return b(c,d,e,g,a)}}(t,f.sort_sortType):"integer"==v?f.sort_number:"float"==v?f.sort_number:"function"==typeof v?
function(a,b){return function(c,d,e,g){return b(c,d,e,g,a)}}(v,f.sort_dataType):"date"==v?f["sort_date"+(s?"_fast":"")]:"bool"==v?f.sort_bool:"stringi"==v?f.sort_locale:f.sort_string;s&&this.useCache(c,v,p,q)}return this._composite(b,k,m,n)};l._composite=function(d,c,b,a){return function(g,k){for(var m=0,e=0;e<a&&(m=d[e](g,k,c[e],b[e]),0==m);e++);return m}};l._sortLocalData=function(d,c){if(!c)return[];if(!c.length||!d||!d.length)return c;var b=this.that,a=b.options.sortModel,g=this.compileSorter(d),
k={sort_composite:g};!1!==b._trigger("customSort",null,k)?c.sort(g):c=k.data;a.useCache&&setTimeout(this.removeCache(d,c),0);return c};l.useCache=function(d,c,b,a){c=f["get_"+c];for(var g=d.length;g--;){var k=d[g];k[a]=c(k[b])}};l.removeCache=function(d,c){var b=this.tmpPrefix;return function(){for(var a=d.length;a--;){var g=b+d[a].dataIndx,k=c.length;if(k&&c[0].hasOwnProperty(g))for(;k--;)delete c[k][g]}}};var f={get_date:function(d){var c;return d?isNaN(c=Date.parse(d))?0:c:0},sort_number:function(d,
c,b,a){d=d[b];c=c[b];return((d?1*d:0)-(c?1*c:0))*a},sort_date:function(d,c,b,a){d=d[b];c=c[b];d=d?Date.parse(d):0;c=c?Date.parse(c):0;return(d-c)*a},sort_date_fast:function(d,c,b,a){return(d[b]-c[b])*a},sort_dataType:function(d,c,b,a,g){return g(d[b],c[b])*a},sort_sortType:function(d,c,b,a,g){return g(d,c,b)*a},sort_string:function(d,c,b,a){d=d[b]||"";c=c[b]||"";b=0;d>c?b=1:d<c&&(b=-1);return b*a},sort_locale:function(d,c,b,a){return(d[b]||"").localeCompare(c[b]||"")*a},sort_bool:function(d,c,b,a){d=
d[b];c=c[b];b=0;if(d&&!c||!1===d&&null===c)b=1;else if(c&&!d||!1===c&&null===d)b=-1;return b*a}};pq.sortObj=f})(jQuery);
(function(l){function n(b){this.that=b;this.mc=null;var a=this,c=b.options;this.DM=c.dataModel;b.on("dataReady columnOrder groupShowHide",function(b,d){c.mergeCells&&"pager"!==d.source&&a.init()})}function f(b,a,c){var d=0,m=b.length;for(c=c>m?m:c;a<c;a++)!0!==b[a].hidden&&d++;return d}function d(b,a,c){var d=0,m=b.length;for(c=c>m?m:c;a<c;a++)!0!==b[a].pq_hidden&&d++;return d}l.paramquery.cMerge=n;var c=n.prototype=new l.paramquery.cClass;c.init=function(){for(var b=this.that,a=b.colModel,c=b.options.mergeCells||
[],k=b.get_p_data(),m=[],e=[],h=0,l=c.length;h<l;h++){var n=c[h],v=n.r1,p=v,s=k[v],r=n.c1,t=r,q=a[r],u=n.rc,w=n.cc;if(q&&s){if(q.hidden)a:{for(t=r;t<r+w;t++){q=a[t];if(!q){t=-1;break a}if(!q.hidden)break a}t=void 0}q=f(a,r,r+w);if(s.pq_hidden)a:{for(p=v;p<v+u;p++){s=k[p];if(!s){p=-1;break a}if(!s.pq_hidden)break a}p=void 0}s=d(k,v,v+u);if(!(1>s||1>q))for(m.push({r1:v,c1:r,rc:u,cc:w,e_rc:s,e_cc:q}),e[p]=e[p]||[],e[p][t]={show:!0,rowspan:s,colspan:q,o_rowspan:u,o_colspan:w,style:n.style,cls:n.cls,attr:n.attr,
r1:v,c1:r,v_r1:p,v_c1:t},n={show:!1,r1:v,c1:r,v_r1:p,v_c1:t},s=v;s<v+u;s++)for(e[s]=e[s]||[],q=r;q<r+w;q++)if(s!=p||q!=t)e[s][q]=n}}b._mergeCells=0<e.length;this.mc=e;this.mc2=m};c.isHidden=function(b,a){var c,d=this.mc;return d&&d[b]&&(c=d[b][a])&&!c.show?!0:!1};c.setData=function(b,a,c){var d,m=this.mc;m[b]&&(d=m[b][a])&&(d.data=c)};c.getData=function(b,a,c){var d,m=this.mc;if(m[b]&&(d=m[b][a]))return(b=d.data)?b[c]:null};c.removeData=function(b,a,c){var d,m=this.mc;m&&m[b]&&(d=m[b][a])&&(b=d.data)&&
(b[c]=null)};c.ismergedCell=function(b,a){var c=this.mc,d;return c&&c[b]&&(d=c[b][a])?(c=c[d.v_r1][d.v_c1],b==c.r1&&a==c.c1?{rowspan:c.o_rowspan,colspan:c.o_colspan}:!0):!1};c.isRootCell=function(b,a,c){var d=this.mc,m;if(d&&d[b]&&(m=d[b][a])){if("o"==c)return b==m.r1&&a==m.c1;var e=m.v_r1;m=m.v_c1;if("a"==c)return c=d[e][m],c.a_r1==b&&c.a_c1==a;if(e==b&&m==a)return c=d[e][m],{rowspan:c.rowspan,colspan:c.colspan}}};c.getRootCell=function(b,a,c){var d=this.that,m=this.mc,e;if(m&&m[b]&&(e=m[b][a])){"a"==
c?(b=e.v_r1,a=e.v_c1,c=m[b][a],c.a_r1&&(b=c.a_r1,a=c.a_c1)):"o"==c?(b=e.r1,a=e.c1):(b=e.v_r1,a=e.v_c1);c=d.colModel[a];var m=d.rowIndxOffset,h=b-m;0>h&&(h=0,b=m);return{rowIndxPage:h,colIndx:a,column:c,dataIndx:c.dataIndx,rowData:d.getRowData({rowIndx:b}),rowIndx:b,rowspan:e.rowspan,colspan:e.colspan}}return d.normalize({rowIndx:b,colIndx:a})};c.inflateRange=function(b,a,c,d){var m=this.that,e=!1,h=m.options,h=h.groupModel.on?m.rowIndxOffset+m.pdata.length-1:h.dataModel.data.length-1,m=m.colModel.length-
1,f=this.mc2;if(!f)return[b,a,c,d];var l=0,n=f.length;a:for(;l<n;l++){var p=f[l],s=p.r1,r=p.c1,t=s+p.rc-1,p=r+p.cc-1,t=t>h?h:t,p=p>m?m:p,q=s<=c&&t>c,u=r<a&&p>=a,w=r<=d&&p>d;if((s<b&&t>=b||q)&&p>=a&&r<=d||(u||w)&&t>=b&&s<=c){e=!0;b=s<b?s:b;a=r<a?r:a;c=t>c?t:c;d=p>d?p:d;break a}}return e?this.inflateRange(b,a,c,d):[b,a,c,d]};l.paramquery.pqGrid.prototype.calcVisibleRows=d;c.renderCell=function(b){var a=this.that,c=b.rowIndx,k=b.rowIndxPage,m=b.colIndx,e,h=this.mc,l;if(h[c]&&(l=h[c][m])){var n=l.v_r1,
v=l.v_c1;e=l.r1;var p=l.c1,s=a.options,r=a.colModel,t=a.rowIndxOffset,q=s.freezeCols,u=(s=s.freezeRows)?s+t:0,w=a.initH,x=a.initV;if(l.show||m==v&&k==x&&n>=u||m==v&&c==x&&n>=u||c==n&&m==w&&v>=q||c==x&&m==w&&v>=q&&n>=u){l=e-t;k=a.pdata;a=a.get_p_data();e={rowData:a[e],rowIndx:e,colIndx:p,column:r[p],rowIndxPage:l};h=h[n][v];l=h.colspan;var z=h.rowspan,A=f(r,m,q),p=d(k,c-t,s);q&&m<q&&l>A?(v=l-f(r,q,w),l=Math.max(v,A)):l-=f(r,v,m);s&&c>t&&c<u&&z>p?(n=z-d(k,s,x),z=Math.max(n,p)):z-=d(a,n,c);h.a_r1=c;
h.a_c1=m;e.rowspan=z;e.colspan=l;e.style=h.style;e.attr=h.attr;e.cls=h.cls}else return null}return e?e:b};c.getMergeCells=function(b,a,c){for(var d=this.that,m=d.options.mergeCells,e,h,d=d.rowIndxOffset,f=d+c,l=[],n=m?m.length:0,p=0;p<n;p++)if(c=m[p],e=c.r1,h=c.c1,!a||e>=d&&e<f)a&&(e-=d),e+=b,l.push({r1:e,c1:h,r2:e+c.rc-1,c2:h+c.cc-1});return l}})(jQuery);
(function(){var l=window.pq=window.pq||{};l.extend=function(a,b,c){var d=function(){};d.prototype=a.prototype;var d=b.prototype=new d,e=a.prototype,h;for(h in c){var f=e[h],l=c[h];d[h]=f?function(a,b){return function(){var c=this._super,d;this._super=function(){return a.apply(this,arguments)};d=b.apply(this,arguments);this._super=c;return d}}(f,l):l}d.constructor=b;d._base=a;d._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return e[a].apply(this,b)}};var n=l.Range=function(a,b,c,d){if(null==
a)throw"invalid param";this.that=a;if(!1==this instanceof n)return new n(a,b,c,d);this._type=c?c:"range";this.init(b,d)},f=n.prototype;f._areas=[];f.init=function(a,b){b=!1!==b;if(a)if("function"==typeof a.push)for(var c=0,d=a.length;c<d;c++)this.init(a[c],b);else if(c=this._normal(a,b))d=this._areas,d.length?d.push(c):this._areas=[c]};f.address=function(){this.dirty&&this.refresh();return this._areas};f.areas=function(a){this.dirty&&this.refresh();var b=this.that,c=this._areas,c=null==a?c:c[a];return l.Range(b,
c,"area")};f.merge=function(a){a=a||{};var b=this.that,c=b.options.mergeCells,d,e,h=this._areas[0];h&&(d=h.r2-h.r1+1,e=h.c2-h.c1+1,1<d||1<e)&&(h.rc=d,h.cc=e,c.push(h),!1!==a.refresh&&b.refreshView())};f.unmerge=function(a){a=a||{};var b=this.that,c=b.options.mergeCells,d=this._areas[0];if(d){for(var e=0;e<c.length;e++){var h=c[e];if(h.r1==d.r1&&h.c1==d.c1){c.splice(e,1);break}}!1!==a.refresh&&b.refreshView()}};f.hide=function(a){a=a||{};for(var b=this.that,c=b.colModel,d=b.get_p_data(),e=this._areas,
h=0,f=e.length;h<f;h++){var l=e[h],n=l.type,p=l.r1,s=l.r2,r=l.c1,l=l.c2;if("column"==n)for(n=r;n<=l;n++)c[n].hidden=!0;else if("row"==n)for(n=p;n<=s;n++)d[n].pq_hidden=!0}!1!==a.refresh&&b.refreshView()};f.unhide=function(a){a=a||{};for(var b=this.that,c=b.colModel,d=b.get_p_data(),e=this._areas,h=0,f=e.length;h<f;h++){var l=e[h],n=l.type,p=l.r1,s=l.r2,r=l.c1,l=l.c2;if("column"==n)for(n=r;n<=l;n++)c[n].hidden=!1;else if("row"==n)for(n=p;n<=s;n++)d[n].pq_hidden=!1}!1!==a.refresh&&b.refreshView()};
f.select=function(){var a=this.that,b=a.iSelection,c=b._areas[0],d=this._areas,e=d[0];if(!e)return this;var h=e.r1,f=e.c1;if(b.dirty||1!=d.length||"block"!=d[0].type||!c||"cell"!=c.type&&"block"!=c.type||h!=c.r1||f!=c.c1)for(b.removeAll({trigger:!1}),h=0,f=d.length;h<f;h++)b.add(d[h],!1);else{var l=c.r1,n=c.c1,p=c.r2,c=c.c2,s=e.r2,e=e.c2,a=a.iCells;if(s==p&&e==c)return this;e>c?a.selectBlock({range:{r1:h,c1:c+1,r2:s,c2:e}}):e<c&&a.selectBlock({range:{r1:Math.max(h,l),c1:e+1,r2:Math.max(s,p),c2:c},
remove:!0});s>p?a.selectBlock({range:{r1:p+1,c1:f,r2:s,c2:e}}):s<p&&a.selectBlock({range:{r1:s+1,c1:Math.max(f,n),r2:p,c2:Math.max(e,c)},remove:!0});b._areas=d}b._trigger();return this};f.resize=function(a,b){var c=this._areas[0];return n(this.that,{r1:c.r1,c1:c.c1,rc:a,cc:b})};f.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};f.copy=function(a){a=a||{};this.dirty&&this.refresh();var b=this.that,c=a.dest,d=a.cut?!0:!1,e=null==a.copy?!0:a.copy,h=a.source||(d?"cut":"copy"),f=null==a.history?!0:
a.history,l=null==a.allowInvalid?!0:a.allowInvalid,n=[],p=[],s=b.get_p_data(),r=b.colModel,t=b.readCell,q=b.iMerge,u=this._areas;if(u.length){var w=this._areas[0],x=w.type,z=w.r1,A=w.c1,B="cell"==x?z:w.r2,w="cell"==x?A:w.c2,E=0;do{for(;z<=B;z++){for(var D=[],F=s[z],N={},L={},J=A;J<=w;J++){var I=r[J],G=I.dataIndx;if(!1!==I.copy){var M=F[G];e&&D.push(t(F,I,q,z,J));d&&(N[G]=void 0,L[G]=M)}}d&&n.push({rowIndx:z,rowData:F,oldRow:L,newRow:N,type:"update"});D=D.join("\t");p.push(D)}E++;w=u[E];if("row"==
x&&w&&"row"==w.type)z=w.r1,A=w.c1,B=w.r2,w=w.c2;else break}while(1);e&&(D=p.join("\n"),a.clip?(a=a.clip,a.val(D),a.select()):b._setGlobalStr(D));c?b.paste({dest:c,rowList:n,history:f,allowInvalid:l}):d&&!1!==b._digestData({rowList:n,source:h,history:f,allowInvalid:l})&&b.refresh({source:"cut"})}};f.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};f.add=function(a){this.init(a)};f._countArea=function(a){var b=a.r1,c=a.c1,d=a.r2,e=a.c2;return"cell"==a.type?1:(d-b+1)*(e-c+1)};f.count=
function(){this.dirty&&this.refresh();for(var a="range"==this._type,b=this._areas,c=0,d=b.length,e=0;e<d;e++)c+=a?this._countArea(b[e]):1;return c};f.rows=function(a){this.dirty&&this.refresh();var b=this.that,c=[],d=this._areas[0];if(d){var e=d.r1,h=d.c1,f=d.r2,n=d.c2,d=d.type,f=null==a?f:e+a;for(a=null==a?e:e+a;a<=f;a++)c.push({r1:a,c1:h,r2:a,c2:n,type:d})}return l.Range(b,c,"row")};f.columns=function(a){this.dirty&&this.refresh();var b=this.that,c=[],d=this._areas[0];if(d){var e=d.r1,h=d.c1,f=
d.r2,n=d.c2,d=d.type,n=null==a?n:h+a;for(a=null==a?h:h+a;a<=n;a++)c.push({r1:e,c1:a,r2:f,c2:a,type:d})}return l.Range(b,c,"column")};f.cell=function(a,b){this.dirty&&this.refresh();var c=this.that,d=[],e=this._areas[0];e&&(d=e.r1+a,e=e.c1+b,d=[d,e,d,e]);return l.Range(c,d,"cell")};f.item=function(a){this.dirty&&this.refresh();for(var b=0,c=!1,d=this._areas,e=0,h=d.length;e<h;e++){var f=d[e],l=this._countArea(f);if(b+l>a){c=!0;a-=b;break}else b+=l}if(c){if(f)var n=f.r1,p=f.c1,b=f.c2-p+1,n=n+Math.floor(a/
b),p=p+a%b;return{r1:n,c1:p}}};f._normal=function(a,b){if(a.type)return a;if("function"==a.push){for(var c=[],d=0,e=a.length;d<e;d++){var h=this._normal(a[d],b);h&&c.push(h)}return c}var c=this.that,f=c.get_p_data().length-1,l=c.colModel.length-1,d=a.r1,e=a.c1,d=d>f?f:d,e=e>l?l:e,n=a.rc,p=a.cc,h=a.r2,s=a.c2,h=n?d+n-1:h>f?f:h,s=p?e+p-1:s>l?l:s;if(0>l||0>f)return null;d>h&&(n=d,d=h,h=n);e>s&&(n=e,e=s,s=n);if(null!=d||null!=e)return null==d?(d=0,h=f,s=null==s?e:s,f="column"):null==e?(e=0,h=null==h?d:
h,s=l,f="row"):null==h?(f="cell",h=d,s=e):f="block",b&&(c=c.iMerge.inflateRange(d,e,h,s),d=c[0],e=c[1],h=c[2],s=c[3]),a.r1=d,a.c1=e,a.r2=h,a.c2=s,a.type=a.type||f,a};f.getValue=function(){var a=this.address(),b,c=[],d,e,h=this.that,f,l,n,p,s,r;if(a.length){b=a[0];a=b.r1;f=b.c1;l=b.r2;n=b.c2;r=h.get_p_data();for(p=a;p<=l;p++)for(b=r[p],d=c[p-a]=[],s=f;s<=n;s++)e=b[h.colModel[s].dataIndx],d.push(e);return c}};f.value=function(a){var b,c,d,e=this.that,h=e.colModel,f,l,n,p,s=[],r=this.address();if(void 0===
a)return this.getValue();d="function"===typeof a.push;for(var t=0;t<r.length;t++){f=r[t];l=f.r1;n=f.c1;p=f.r2;f=f.c2;for(var q=l;q<=p;q++){b=e.normalize({rowIndx:q});var u=b.rowData,w=b.rowIndx,x={},z={};b=d?a[q-l]:a;for(var A=n;A<=f;A++){var B=h[A].dataIndx;c=d?b[A-n]:a;z[B]=c;x[B]=u[B]}s.push({rowData:u,rowIndx:w,type:"update",newRow:z,oldRow:x})}}s.length&&(e._digestData({rowList:s,source:"range"}),e.refresh());return this};var d=l.Selection=function(a,b){if(null==a)throw"invalid param";if(!1==
this instanceof d)return new d(a,b);this.that=a;var c=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&c.renew()});this._base(a,b)},c={renew:function(){this.dirty=!0},isDirty:function(){return this.dirty}},b=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",null,{selection:this.selection()}),this.off("mousePQUp",b),this.off("keyUp",b))};c._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,
{selection:this});a.off("mousePQUp",b);a.off("keyUp",b);a.on("mousePQUp",b);a.on("keyUp",b)};c.removeAll=function(a){a=a||{};var b=this.that;b.iCells.removeAll({refresh:!0});b.iRows.removeAll({refresh:!0,all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};f.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var b=a.type,c=a.r1,d=a.c1,e=a.r2;a=a.c2;for(var h=this._areas,f=0,l=h.length;f<l;f++){var n=h[f],p=n;if(b==n.type&&c>=p.r1&&e<=p.r2&&d==p.c1&&a==p.c2)return f}return-1};c.add=
function(a,b){var c=this.that,d=this._normal(a,!0),e=c.iCells,c=c.iRows,h=d.r1,f=d.c1,l=d.r2,n=d.type;0<=this.indexOf(d)||("row"==n?(e=this._areas,e.length&&(e=e[e.length-1],n=e.type,"row"==n&&h<=e.r2&&(this.dirty=!0)),l>h?c.selectRange({range:d}):c.add({rowIndx:h})):"column"==n||"block"==n?e.selectBlock({range:d}):"cell"==n&&e.add({rowIndx:h,colIndx:f}),this._super(d),!1!==b&&this._trigger())};c._adjust=function(a){var b=this.that,c=b.get_p_data().length-1,b=b.colModel.length-1,d=a.r1,e=a.c1,h=a.r2,
f=a.c2,h=h>c?c:h,f=f>b?b:f;if(0>b||0>c||d>h||e>f)return null;a.r1=d;a.r2=h;a.c1=e;a.c2=f;return a};f.removeRow=function(a,b){var c=a.r1,d=a.r2,e=this._areas,h=this._areas[b],f=h.r1,l=h.r2;c==f&&d==l?e.splice(b,1):c>f?(h.r2=c-1,d<l&&(c=this._normal({r1:d+1,r2:l}),e.splice(b+1,0,c))):d<l&&(c>f&&(c=this._normal({r1:d+1,r2:l}),e.splice(b,0,c)),h.r1=d+1)};c.removeRow=function(a,b){var c=this.that,d=this._normal(a),e=this.indexOf(d);-1<e&&"row"==d.type&&d.r1==d.r2&&(c.iRows.remove({rowIndx:d.r1}),this._super(a,
e),!1!==b&&this._trigger())};c.selectAll=function(a){a=a||{};var b=this.that,c=a.all,d=c?0:b.rowIndxOffset,e=b.colModel.length-1,h=d+(c?b.options.dataModel.data.length-1:b.pdata.length-1);"cell"==a.type?(a={r1:d,c1:0},a.r2=h,a.c2=e,b.range(a).select()):(a={r1:d},a.r2=h,c||this.removeRows({all:!1,trigger:!1}),b.iRows.selectRange({range:a}),b=c?[]:this._areas,b.push({r1:d,c1:0,r2:h,c2:e,type:"row"}),this._areas=b,this._trigger());return this};c.removeRows=function(a){a=a||{};var b=a.all;this.that.iRows.removeAll({refresh:!0,
all:a.all});b?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};c.refresh=function(){for(var a=this.that,b=[],c=a.colModel.length-1,a=a.get_p_data(),d=0,e=a.length;d<e;d++){var h=a[d],f;h&&(h.pq_cellselect=void 0,h.pq_rowselect?f?f.r2=d:f={r1:d,r2:d,c1:0,c2:c,type:"row"}:f&&(b.push(f),f=null))}f&&b.push(f);this.dirty=!1;this._areas=b};l.extend(n,d,c)})();
(function(l){function n(b,a,c,d){b.push("<li data-option='",c,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",a[c]?"checked":"","/>",d["strGroup_"+c],"</label></li>")}var f=l.paramquery;f.pqGrid.defaults.groupModel={on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],calcSummary:[],summaryInTitleRow:"collapsed",summaryEdit:!0,
refreshOnChange:!0};pq.aggregate={sum:function(b){for(var a=0,c=b.length,d;c--;)d=b[c],null!=d&&(a+=d-0);return a},avg:function(b,a){return this.sum(b,a,!0)/b.length},max:function(b,a){var c;c=a.dataType;"float"==c||"integer"==c?c=Math.max.apply(Math,b):"date"==c?(b.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&(a=0);isNaN(b)&&(b=0);return b-a}),c=b[0]):(b.sort(),c=b[b.length-1]);return c},min:function(b,a){var c;c=a.dataType;var d,f;if("integer"==c||"float"==c)c=Math.min.apply(Math,
b);else if("date"==c){f=b.length;for(c=[];f--;)(d=b[f])&&c.push({dateO:d,dateP:Date.parse(d)});c.sort(function(a,b){return a.dateP-b.dateP});c=c.length?c[0].dateO:void 0}else b.sort(),c=b[0];return c},count:function(b){return b.length}};var d=f.cGroup=function(b){this.that=b;b.options.groupModel.on&&this.init()},c=d.prototype;c.init=function(){var b,a,c,d;this._init||(this.mc=[],this.tree=[],this.summaryData=[],d=this.that,b=d.options,a=b.groupModel,b=b.bootstrap,c=(b=b.on)?"glyphicon ":"ui-icon ",
this.groupRemoveIcon="pq-group-remove "+c+(b?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+c,d.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,a)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,a)).on("dataReady",this.onDataReady(this,d)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};c.onCellClick=function(b){return function(a,c){c.rowData.pq_gtitle&&l(a.originalEvent.target).hasClass("pq-group-icon")&&
b.toggleRow(c.rowIndxPage,a)}};c.onChange=function(b,a){return function(){b.saveState(a.refreshOnChange)}};c.onCellMouseDown=function(){return function(b,a){a.rowData.pq_gtitle&&l(b.originalEvent.target).hasClass("pq-group-icon")&&b.stopImmediatePropagation()}};c.onCellKeyDown=function(b,a){return function(c,d){if(d.rowData.pq_gtitle&&0<=l.inArray(d.dataIndx,a.dataIndx)&&c.keyCode==l.ui.keyCode.ENTER)return b.toggleRow(d.rowIndxPage,c),!1}};c.showRows=function(){this.that.options.dataModel.data.forEach(function(b){b.pq_hidden&&
(b.pq_hidden=void 0)})};c.removeGroup=function(b){for(var a=0,c=this.that.options.groupModel.dataIndx;a<c.length;a++)if(b===c[a]){c.splice(a,1);break}c.length||(this.showRows(),this.mc.length=0);this._triggerChange=!0;this.refreshFull()};c.addGroup=function(b,a){var c=this.that.options.groupModel,c=c.dataIndx=c.dataIndx||[];null!=b&&-1===l.inArray(b,c)&&(null==a?c.push(b):c.splice(a,0,b),this._triggerChange=!0,this.refreshFull())};c._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,
tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};c.onColumnDrag=function(b){return function(a,c){var d=c.column,f=d.colModel;f&&f.length||!1===d.groupable?b.acceptDrop=!1:b._initHeadDroppable()}};c._initHeadDroppable=function(){var b=this,a=b.that,c=b.$header;c&&(c.droppable({accept:function(c){c=1*c.attr("pq-col-indx");if(!isNaN(c)&&a.colModel[c])return b.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:b.onDrop(a,b)}),b.acceptDrop=!0)};c.onDrop=
function(b,a){return function(c,d){var f=1*d.draggable.attr("pq-col-indx");a.addGroup(b.colModel[f].dataIndx);a.acceptDrop=!1}};c.onSortable=function(b,a){return function(){for(var c=[],d=a.groupModel,f=d.dataIndx,e=[],h=!1,n=l(this).find(".pq-group-item"),C=0;C<n.length;C++){var v=l(n[C]),p=v.data("indx"),v=v.data("dir");f[C]!==p&&(h=!0);c.push(p);e.push(v)}h&&(d.dataIndx=c,d.dir=e,b._triggerChange=!0,b.refreshFull())}};c._initHeader=function(b,a){if(this.$header){var c=this.$header,d=c.find(".pq-group-item");
c.data("uiSortable")||this._initHeadSortable();d.length||c.append("<span class='pq-group-placeholder'>"+b.strGroup_header+"</span>");a.headerMenu&&this._initHeaderMenu()}};c.createHeader=function(){for(var b=this.that,a=this.$header,c=b.options,f=c.bootstrap,m=b.columns,e=f.on,h=c.groupModel,n=h.dataIndx,C=n.length;C--;)null==m[n[C]]&&n.splice(C,1);C=n.length;if(h.header&&h.on){a?a.empty():(a=this.$header=l("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(b.$top),a.on("click",".pq-group-item",
d.onGroupItemClick(this)));if(C){for(var b=[],v=0;v<C;v++){var p=n[v],s=m[p],r=e?f.groupModel.icon:h.icon;b.push("<div tabindex='0' class='pq-group-item' data-indx='",p,"' data-dir='",h.dir[v],"'>","<span class='",this.toggleIcon,h.collapsed[v]?r[1]:r[0],"' ></span>",s.pqtitle||("string"==typeof s.title?s.title:p),"<span class='",this.groupRemoveIcon,"' ></span></div>")}a[0].innerHTML=b.join("")}this._initHeader(c,h)}else a&&(a.remove(),this.$header=null)};d.onGroupItemClick=function(b){return function(a){var c=
l(a.target),d=l(this).data("indx");c.hasClass("pq-group-remove")?b.removeGroup(d):b.toggleLevel(d,a)}};c._initHeaderMenu=function(){for(var b=this.that,a=b.options,c=this.$header,d=["<ul class='pq-group-menu'><li>",b.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],f=a.groupModel,e=f.menuItems,h=0,y=e.length;h<y;h++)n(d,f,e[h],a);d.push("</ul></li></ul>");c=l(d.join("")).appendTo(c);c.menu({icons:{submenu:"ui-icon-carat-1-w"},position:{my:"right top",at:"left top"}});c.change(function(c){if("INPUT"==
c.target.nodeName){c=l(c.target).closest("li").data("option");var d={};d[c]=!a.groupModel[c];b.groupOption(d)}})};c.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};c.onDataReady=function(b,a){return function(){b.tree.length=0;var c=a.options.groupModel,d=c.dataIndx.length;c.on&&(d||c.grandSummary)&&(b._groupData(),b.refreshColumns(),d&&(b._initcollapsed(),b._initmerge()));b.createHeader()}};c.onColumnOrder=function(b){return function(){b._initmerge()}};
c.toggleLevel=function(b,a){var c=this.that.options.groupModel,d=c.collapsed,c=l.inArray(b,c.dataIndx);this[(d[c]?"expand":"collapse")+(a.ctrlKey?"All":"")](c)};c.collapseTo=function(b){this.expandTo(b,!0)};c.expandTo=function(b,a){var c=this.that,d=!!a,f=b.split(","),e=f.length,h=this.tree,l,n,v;l=0;var p,s=c.pdata;if(!(e>h.length)){for(var r=0;r<e;r++){p=1*f[r]+l;l=h[r][p];if(!l){if(0==r)return;break}l=l.rip;if(!d||d&&r==e-1)n=s[l],n.pq_close!=d&&(v=n,n.pq_close=d);n=h[r+1];var t=void 0,q=p;if(n){do t=
n[q].rip,q++;while(t<l);l=q-1}else l=void 0}v&&!1!==c._trigger("group",null,{indx:p,close:d})&&this.saveState(!0)}};c._editorSummary=function(b,a){var c=b.summaryOptions,d=this;return function(b){var e=b.rowData;if(e.pq_gsummary||e.pq_gtitle){var e=pq.aggregate,h=b.column,f=h.summary,f=f?f.edit:null,n=h.dataType,h=[""];if(-1<l.inArray(b.dataIndx,a.dataIndx)||!a.summaryEdit&&!f||!1===f)return!1;"integer"==n||"float"==n?n="number":"date"!==n&&(n="string");f=c[n].split(",");b=l.inArray;for(var v in e)-1<
b(v,f)&&h.push(v);return 1==h.length?!1:{type:"select",prepend:a.prepend,options:a.options||h,valueIndx:a.valueIndx,labelIndx:a.labelIndx,init:a.init||d._editorInit,getData:a.getData||d._editorGetData}}}};c._editorInit=function(b){var a=b.column.summary;a||(a=b.column.summary={});a=a.type;b.$cell.find("select").val(a)};c._editorGetData=function(b){var a=b.column,c=a.dataType;b=b.$cell.find("select").val();a.summary.type=b;this.one("beforeValidate",function(b,d){d.allowInvalid=!0;d.track=!1;d.history=
!1;a.dataType="string";this.one(!0,"change",function(b,d){a.dataType=c})});return b};c._renderTitle=function(b,a){var c=this.that,d=b.bootstrap,f=d.on,d=f?d.groupModel.icon:a.icon,e=f?["glyphicon "+d[0],"glyphicon "+d[1]]:["ui-icon "+d[0],"ui-icon "+d[1]];return function(b){var d=b.rowData,f,k,m;if(d.pq_gtitle&&null!=b.cellData)return f=d.pq_close,k=d.pq_level,m=a.title,m=m[k]||a.titleDefault,m="function"===typeof m?m.call(c,b):m.replace("{0}",b.cellData).replace("{1}",d.pq_items),{text:(b.Export?
"":"<span class='pq-group-icon "+e[f?1:0]+"'></span>")+m,cls:"pq-group-title-cell",style:"text-align:left;"}}};c._renderSummary=function(b){var a=this.that;return function(c){var d=c.rowData,f,e;if(d.pq_gsummary||d.pq_gtitle){d=c.column;f=d.summary.type;e=b.summaryTitle[f];if("function"==typeof e)return e.call(a,c);f=c.formatVal;null==f&&(f=c.cellData,f=null==f?"":f);"number"!=typeof f||d.format||parseInt(f)===f||(f=f.toFixed(2));return e?e.replace("{0}",f):f}}};c.refreshColumns=function(){for(var b=
this.that,a=b.options,c=a.groupModel,d=c.on,f=c.fixCols,e,h,l,n,v,p=c.dataIndx,s=p.length,r=b.colModel,t=r.length;t--;){n=r[t];if(l=n._render)l==n._renderGT?(delete n._renderGT,delete n._render):l==n._renderGS&&(delete n._renderGS,delete n._render);n._nodrag&&(delete n._nodrag,delete n._nodrop);d&&(v=n.summary)&&v.type&&(h=h||this._renderSummary(a),n._render=n._renderGS=h)}a.geditor=d?this._editorSummary(a,c):void 0;if(d)for(t=s-1;0<=t;t--)n=b.getColumn({dataIndx:p[t]}),e=e||this._renderTitle(a,c),
n._renderGT=n._render=e;if(f&&d)for(t=0;t<s;t++)a=b.getColIndx({dataIndx:p[t]}),n=r[a],n._nodrag=n._nodrop=!0,a!=t&&(b.iDragColumns.moveColumn(a,t,!0),b.iColModel.init())};c.refreshFull=function(){var b=this.that;this.refreshColumns();this._triggerChange&&(b._trigger("groupChange"),this._triggerChange=!1);b.refreshView()};c.refreshView=function(){this.that.refreshView()};c.collapseAll=function(b){this.expandAll(b,!0)};c.expandAll=function(b,a){!1!==this.trigger({all:!0,close:!!a,level:b||0})&&this.that.refreshView()};
c.collapse=function(b){this.expand(b,!0)};c.expand=function(b,a){!1!==this.trigger({close:!!a,level:b||0})&&this.that.refreshView()};c.showHideRows=function(b,a,c){for(var d=this.that.pdata,f=b,e=d.length;f<e;f++)if(b=d[f],b.pq_gsummary)c.merge||c.summaryInTitleRow?b.pq_level>=a&&(b.pq_hidden=!0):b.pq_level>a&&(b.pq_hidden=!0);else if(b.pq_gtitle)if(b.pq_level<=a)break;else b.pq_hidden=!0;else b.pq_hidden=!0};d.beforeTrigger=function(b,a){return function(c){return!1===a._trigger("beforeGroupExpand",
b,c)}};c.trigger=function(b){var a=b.rd,c=b.level,f=b.all,m=b.close,e=this.that,h,l=e.options.groupModel;h=l.dataIndx;l=l.collapsed;b=d.beforeTrigger(b.evt,e);var n={};if(a){c=a.pq_level;m=h[c];h=a[m];m=!a.pq_close;n={level:c,close:m,group:h};if(b(n))return!1;a.pq_close=m}else if(f){n={all:!0,close:m,level:c};if(b(n))return!1;for(a=c;a<h.length;a++)l[a]=m}else if(null!=c){n={level:c,close:m};if(b(n))return!1;l[c]=m}return e._trigger("group",null,n)};c.toggleRow=function(b,a){!1!==this.trigger({evt:a,
rd:this.that.pdata[b]})&&this.saveState(!0)};c.saveState=function(b){var a=this.that,c=a.options.groupModel;if(c.on&&c.dataIndx.length){for(var c=a.pdata,d=c.length,f=Array(d),e=0;e<d;e++)f[e]=c[e];this.pdata=f;b&&a.refreshView()}};c._initmerge=function(){for(var b=this.that,a=b.options,c=a.groupModel,d=c.dataIndx,f=b.colIndxs,e=c.merge,h,l=this.tree,n=b.rowIndxOffset,v,p,s,r,t=b.colModel.length,q=[],u=b.pdata,w=0;w<l.length;w++){v=l[w];s=f[d[w]];for(var x=0,z=v.length;x<z;x++){p=v[x];h=p.rip;if(null==
h)break;e?(p=p.rip2,r=p-h,p=h+n,q.push({r1:p,rc:r,c1:s,cc:1})):(p=h+n,r=u[h],(h=c.summaryInTitleRow)&&(r.pq_close||"collapsed"!==h)||q.push({r1:p,rc:1,c1:s,cc:t-s}))}}q.length?(this.mc=a.mergeCells=q,b.iMerge.init()):this.mc.length&&(this.mc.length=0,b.iMerge.init())};c._initcollapsed=function(){var b=this.that,a=b.options.groupModel,c=a.merge,d=this.pdata,b=b.pdata,f,e,h,l;if(b){for(var n=0,v=b.length;n<v;n++)f=b[n],e=f.pq_gtitle,void 0!==e&&(e=f.pq_level,l=null,d&&(h=(h=d[n])?h.pq_close:null,null!=
h&&(l=f.pq_close=h)),null==l&&(l=f.pq_close),l?this.showHideRows(n+1,e,a):c&&(f.pq_hidden=!0));delete this.pdata}};c.setSumCols=function(b){var a=l.inArray,c=[],d=[];this.that.colModel.forEach(function(f){var e=f.summary;e&&e.type&&(e=f.dataIndx,-1===a(e,b)&&(c.push(f),d.push(e)))});this._sumCols=c;this._sumDIs=d;return[c,d]};c.getSumCols=function(){return this._sumCols};c.getSumDIs=function(){return this._sumDIs};c.group=function(b){return function(a,c,d){var f={},e=[];a.forEach(function(a){a.pq_hidden=
void 0;var l=b(a,c,d),n=f[l];null==n&&(f[l]=n=e.length,e[n]=[l,[]]);e[n][1].push(a)});return e}};c.summary=function(b,a){var c=pq.aggregate,d=b.map(function(a){return a.summary.type});return function(f,e,h){a.forEach(function(a,l){var n=[],p;f.forEach(function(b,c){n[c]=b[a]});p=c[d[l]](n,b[l]);e[a]=p;h&&(h[a]=p)})}};c.flatten=function(b,a,c,d){var f=c.dataIndx,e=this.concat(),h=this.tree=[],l=f.length,n=[];return function p(s,r,t){if(!l)return s;var q=r||0,u=f[q],w=c.collapsed[q],x=!1!==c.calcSummary[q],
z=c.showSummary[q],A=h[q]=h[q]||[];a(s,u,b[u]).forEach(function(a){var b,c=a[1],g=z?{pq_gsummary:!0,pq_level:q,pq_rowcls:"pq-summary-row"}:0,h=n.length;b={pq_gtitle:!0,pq_level:q,pq_close:w,pq_items:c.length,pq_children:[]};b[u]=a[0];n.push(b);t&&t.push(b);x&&d(c,b,g);q+1<l?p(c,q+1,b.pq_children):n=e(n,c,b);g&&n.push(g);A.push({rip:h,rip2:n.length})});return n}};c.concat=function(){return function(b,a,c){a.forEach(function(a){b.push(a)});c.pq_children=a;return b}};c._getVal=function(b){var a=l.trim;
return function(c,d,f){c=c[d];if(f=f.groupChange)return f=pq.getFn(f),f(c);c=a(c);return b?c.toUpperCase():c}};c._groupData=function(){var b=this.that,a=b.options,c=a.groupModel,d=this._getVal(c.ignoreCase),f=b.pdata,e=b.columns,h=this.setSumCols(c.dataIndx),h=this.summary(h[0],h[1]);if(c.grandSummary){var l={pq_grandsummary:!0,pq_gsummary:!0};h(f,l);this.summaryData=a.summaryData=[l]}else this.summaryData.length=0;b.pdata=this.flatten(e,this.group(d),c,h)(f)};f=f.pqGrid.prototype;f.group=function(b){var a=
this.iGroup;if(null==b)return a;a.expandTo(b.indx)};f.groupOption=function(b,a){var c=b.dataIndx,c=c?c.length:0,d=this.iGroup,f=this.options.groupModel,e=f.dataIndx;(b.on||null==b.on&&f.on)&&d.init();f.on&&e.length&&(!1===b.on||0===c)&&d.showRows();l.extend(f,b);d.setOption();!1!==a&&this.refreshView()}})(jQuery);
(function(l){var n=l.paramquery;l(document).on("pqGrid:bootup",function(d,c){new f(c.instance)});var f=n.cScroll=function(d){var c=l(document);this.that=d;d.one("refresh",this.oneRefresh(d,this,c,".pqgrid-csroll"))};n.cScroll=f;n=f.prototype;n.oneRefresh=function(d,c,b,a){return function(){d.$cont.on("mousedown",function(d){l(d.target).closest(".pq-sb").length||(b.on("mousemove"+a,function(a){c.onMouseDrag(a)}),b.on("mouseup"+a,function(){b.off(a)}))})}};n.onMouseDrag=function(d){var c=this.that.$cont,
b=c[0].offsetHeight,a=c[0].offsetWidth,g=c.offset(),c=g.top,g=g.left,b=c+b,a=g+a,f=d.pageY;d=d.pageX;var l=f-b,e=d-a,h=c-f,n=g-d;d>g&&d<a&&(0<l||0<h)?0<l?this.scrollV(l,!0):0<h&&this.scrollV(h):f>c&&f<b&&(0<e?this.scrollH(e,!0):0<n&&this.scrollH(n))};n.scrollH=function(d,c){this[this.that.options.virtualX?"scrollVirtual":"scrollNV"](d,c,!0)};n.scrollV=function(d,c){this[this.that.options.virtualY?"scrollVirtual":"scrollNV"](d,c)};n.scrollVirtual=function(d,c,b){var a=this.that;b=b?a.hscrollbar():
a.vscrollbar();var g=b.options,a=g.cur_pos,g=g.num_eles;d=Math.ceil(d/10);c=Math.pow(5,d-1)*(c?1:-1);a+=c;0>a?a=0:a>=g&&(a=g-1);b.option("cur_pos",a).scroll()};n.scrollNV=function(d,c,b){var a=this.that,g=a.$tbl[0][b?"offsetWidth":"offsetHeight"];b=b?a.hscrollbar():a.vscrollbar();d=(b.options.ratio*g+(c?d:-d))/g;1<d?d=1:0>d&&(d=0);b.option("ratio",d).drag()}})(jQuery);
(function(l){var n=l.paramquery;l(document).on("pqGrid:bootup",function(d,c){var b=c.instance;b.iFillHandle=new f(b)});n.pqGrid.defaults.fillHandle="all";n.pqGrid.defaults.autofill=!0;var f=n.cFillHandle=function(d){this.$wrap;this.locked;this.sel;this.that=d;d.on("selectChange",this.onSelectChange(this)).on("selectEnd",this.onSelectEnd(this)).on("refresh refreshRow",this.onRefresh(this))},n=f.prototype;n.onSelectChange=function(d){return function(){this.options.fillHandle&&d.create()}};n.onSelectEnd=
function(d){return function(){this.options.fillHandle&&(d.setDraggable(),d.setDoubleClickable())}};n.onRefresh=function(d){var c;return function(){this.options.fillHandle&&(clearTimeout(c),c=setTimeout(function(){d.that.element&&(d.create(),d.setDraggable())},300))}};n.remove=function(){var d=this.$wrap;d&&d.remove()};n.create=function(){if(!this.locked){this.remove();var d=this.that,c=d.selection().address();if(1===c.length){var c=c[0],b=c.r2,c=c.c2,a={rowIndx:b,colIndx:c},g=d.iMerge,b=g.ismergedCell(b,
c)?g.getRootCell(b,c,"a"):a,c=d.getCell(b);c.length&&!1!==d._trigger("beforeFillHandle",null,d.normalize(b))&&(b=c[0],c=c.closest(".pq-grid-cont-inner"),a=c[0],d=b.offsetLeft+b.offsetWidth-8-a.offsetLeft,b=b.offsetTop+b.offsetHeight-8-a.offsetTop,c=l("<div class='pq-fill-handle'></div>").appendTo(c),c.css({position:"absolute",top:b,left:d,height:10,width:10,background:"#333",cursor:"crosshair",border:"2px solid #fff"}),this.$wrap=c)}}};n.setDoubleClickable=function(){var d=this.$wrap;d&&d.on("dblclick",
this.onDblClick(this.that,this))};n.setDraggable=function(){var d=this,c=d.$wrap,b=d.that.$cont;c&&c.draggable({helper:function(){return"<div style='height:10px;width:10px;cursor:crosshair;'></div>"},appendTo:b,start:function(){d.onStart()},drag:function(a){d.onDrag(a)},stop:function(){d.onStop()}})};n.patternDate=function(d,c){var b=this;return function(a){var g=new Date(d);g.setDate(g.getDate()+(c?1-a:a-1));return b.formatDate(g)}};n.formatDate=function(d){return d.getMonth()+1+"/"+d.getDate()+
"/"+d.getFullYear()};n.patternDate2=function(d,c){var b=new Date(d),a=new Date(c),g,f=this,l=a.getDate()-b.getDate(),e=a.getMonth()-b.getMonth(),h=a.getFullYear()-b.getFullYear();if(!e&&!h||!l&&!e||!h&&!l)return function(a){var b=new Date(d);l?b.setDate(b.getDate()+l*(a-1)):e?b.setMonth(b.getMonth()+e*(a-1)):b.setFullYear(b.getFullYear()+h*(a-1));return f.formatDate(b)};b=Date.parse(b);g=Date.parse(a)-b;return function(a){return f.formatDate(new Date(b+g*(a-1)))}};n.pattern=function(d,c,b){var a,
g,f,l=d.length;c="date"===c;if(1===l)return a=d[0],c?this.patternDate(a,b):function(c){return a+(b?1-c:c-1)};if(2===l){if(c)return this.patternDate2(d[0],d[1]);a=d[1]-d[0];g=d[0]-a;return function(b){return a*b+g}}return 3===l?(a=(d[2]-2*d[1]+d[0])/2,g=d[1]-d[0]-3*a,f=d[0]-a-g,function(b){return a*b*b+g*b+f}):!1};n.autofillVal=function(d,c,b){var a=this.that,g=d.r1,f=d.c1,l=d.r2;d=d.c2;var e=c.r2;c=c.r1;var h=[],n,C,v,p,s,r=0;if(c<g){s=e-c+2;for(v=c;v<=g-1;v++)for(n=h[r++]=[],s--,C=0,p=f;p<=d;p++)n[C]=
b[C](s),C++;n={r1:c,r2:g-1,c1:f,c2:d}}else if(e>l){s=l-g+1;for(v=l+1;v<=e;v++)for(n=h[r++]=[],s++,C=0,p=f;p<=d;p++)n[C]=b[C](s),C++;n={r1:l+1,r2:e,c1:f,c2:d}}n&&a.range(n).value(h);return!0};n.autofill=function(d,c){var b=this.that,a=b.colModel,f,k,l,e,h,b=b.get_p_data(),n=[],C=d.r1;h=d.c1;var v=d.r2,p=d.c2,s=c.r1<C;if(c.c1==h&&c.c2==p){for(;h<=p;h++){f=a[h];k=f.dataType;if("date"!=k&&"integer"!=k&&"float"!=k)return;l=f.dataIndx;f=[];if(s)for(e=v;e>=C;e--)f.push(b[e][l]);else for(e=C;e<=v;e++)f.push(b[e][l]);
if(k=this.pattern(f,k,s))n.push(k);else return}return this.autofillVal(d,c,n)}};n.onStop=function(){var d=this.that,c=d.options.autofill,b=this.sel,a=d.selection().address()[0];this.locked=!1;c&&this.autofill(b,a)||d.range(b).copy({dest:a})};n.onStart=function(){this.locked=!0;this.sel=this.that.selection().address()[0]};n.onDrag=function(d){var c=this.that,b=c.options.fillHandle,a="all"==b,f=a||"horizontal"==b,b=a||"vertical"==b;d=document.elementFromPoint(d.clientX-10,d.clientY);d=l(d).closest(".pq-grid-cell");
if(d.length){var k=c.getCellIndices({$td:d}),m=this.sel;d=m.r1;var e=m.c1,h=m.r2,m=m.c2,n={r1:d,c1:e,r2:h,c2:m},C=function(a,b){n[a]=b;c.range(n).select()},v=k.rowIndx,k=k.colIndx;a&&v<=h&&v>=d||f&&!b?k>m?C("c2",k):k<e&&C("c1",k):b&&(v>h?C("r2",v):v<d&&C("r1",v))}};n.onDblClick=function(d,c){return function(){var b=d.options,a=b.fillHandle;if("all"==a||"vertical"==a){for(var a=d.selection().address()[0],f=a.c2,k=a.r2+1,l=b.dataModel.data,e=d.getColModel()[f].dataIndx;b=l[k];)if(null==b[e]||""===b[e])k++;
else{k--;break}c.onStart();d.range({r1:a.r1,c1:a.c1,r2:k,c2:f}).select();c.onStop()}}}})(jQuery);